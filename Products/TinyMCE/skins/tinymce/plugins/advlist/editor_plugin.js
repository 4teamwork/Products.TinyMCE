(function(){var a=tinymce.each;tinymce.create("tinymce.plugins.AdvListPlugin",{init:function(c,d){var e=this;e.editor=c;function b(g){var f=[];a(g.split(/,/),function(h){f.push({title:"advlist."+(h=="default"?"def":h.replace(/-/g,"_")),styles:{listStyleType:h=="default"?"":h}})});return f}e.numlist=c.getParam("advlist_number_styles")||b("default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");e.bullist=c.getParam("advlist_bullet_styles")||b("default,circle,disc,square");if(tinymce.isIE&&/MSIE [2-7]/.test(navigator.userAgent)){e.isIE7=true}},createControl:function(d,b){var g=this,f,i,c=g.editor;if(d=="numlist"||d=="bullist"){if(g[d][0].title=="advlist.def"){i=g[d][0]}function e(j,l){var k=true;a(l.styles,function(n,m){if(c.dom.getStyle(j,m)!=n){k=false;return false}});return k}function h(){var k,l=c.dom,j=c.selection;k=l.getParent(j.getNode(),"ol,ul");if(!k||k.nodeName==(d=="bullist"?"OL":"UL")||e(k,i)){c.execCommand(d=="bullist"?"InsertUnorderedList":"InsertOrderedList")}if(i){k=l.getParent(j.getNode(),"ol,ul");if(k){l.setStyles(k,i.styles);k.removeAttribute("data-mce-style")}}c.focus()}f=b.createSplitButton(d,{title:"advanced."+d+"_desc","class":"mce_"+d,onclick:function(){h()}});f.onRenderMenu.add(function(j,k){k.onHideMenu.add(function(){if(g.bookmark){c.selection.moveToBookmark(g.bookmark);g.bookmark=0}});k.onShowMenu.add(function(){var n=c.dom,m=n.getParent(c.selection.getNode(),"ol,ul"),l;if(m||i){l=g[d];a(k.items,function(o){var p=true;o.setSelected(0);if(m&&!o.isDisabled()){a(l,function(q){if(q.id==o.id){if(!e(m,q)){p=false;return false}}});if(p){o.setSelected(1)}}});if(!m){k.items[i.id].setSelected(1)}}c.focus();if(tinymce.isIE){g.bookmark=c.selection.getBookmark(1)}});k.add({id:c.dom.uniqueId(),title:"advlist.types","class":"mceMenuItemTitle",titleItem:true}).setDisabled(1);a(g[d],function(l){if(g.isIE7&&l.styles.listStyleType=="lower-greek"){return}l.id=c.dom.uniqueId();k.add({id:l.id,title:l.title,onclick:function(){i=l;h()}})})});return f}},getInfo:function(){return{longname:"Advanced lists",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advlist",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("advlist",tinymce.plugins.AdvListPlugin)})();