(function(){var f=tinymce.each,r=tinymce.dom.Event,h;function l(t,s){while(t&&(t.nodeType===8||(t.nodeType===3&&/^[ \t\n\r]*$/.test(t.nodeValue)))){t=s(t)}return t}function j(s){return l(s,function(t){return t.previousSibling})}function i(s){return l(s,function(t){return t.nextSibling})}function e(s,u,t){return s.dom.getParent(u,function(v){return tinymce.inArray(t,v)!==-1})}function n(s){return s&&(s.tagName==="OL"||s.tagName==="UL")}function d(s,w){var t,v,u;t=j(s.lastChild);while(n(t)){v=t;t=j(v.previousSibling)}if(v){u=w.create("li",{style:"list-style-type: none;"});w.split(s,v);w.insertAfter(u,v);u.appendChild(v);u.appendChild(v);s=u.previousSibling}return s}function o(u,s,t){u=b(u,s,t);return q(u,s,t)}function b(v,s,u){var t=j(v.previousSibling);if(t){return c(t,v,s?t:false,u)}else{return v}}function q(v,t,u){var s=i(v.nextSibling);if(s){return c(v,s,t?s:false,u)}else{return v}}function c(v,t,u,s){if(p(v,t,!!u,s)){return g(v,t,u)}else{if(v&&v.tagName==="LI"&&n(t)){v.appendChild(t)}}return t}function p(v,u,s,t){if(!v||!u){return false}else{if(v.tagName==="LI"&&u.tagName==="LI"){return u.style.listStyleType==="none"||a(u)}else{if(n(v)){return(v.tagName===u.tagName&&(s||v.style.listStyleType===u.style.listStyleType))||k(u)}else{return t&&v.tagName==="P"&&u.tagName==="P"}}}}function k(t){var s=i(t.firstChild),u=j(t.lastChild);return s&&u&&n(t)&&s===u&&(n(s)||s.style.listStyleType==="none"||a(s))}function a(t){var u=i(t.firstChild),s=j(t.lastChild);return u&&s&&u===s&&n(u)}function g(w,v,u){var s=j(w.lastChild),t=i(v.firstChild);if(w.tagName==="P"){w.appendChild(w.ownerDocument.createElement("br"))}while(v.firstChild){w.appendChild(v.firstChild)}if(u){w.style.listStyleType=u.style.listStyleType}v.parentNode.removeChild(v);c(s,t,false);return w}function m(t,u){var s;if(!u.is(t,"li,ol,ul")){s=u.getParent(t,"li");if(s){t=s}}return t}tinymce.create("tinymce.plugins.Lists",{init:function(A){var C="TABBING";var v="EMPTY";var K="ESCAPE";var B="PARAGRAPH";var O="UNKNOWN";var z=O;function s(T){return T.keyCode===tinymce.VK.TAB&&!(T.altKey||T.ctrlKey)&&(A.queryCommandState("InsertUnorderedList")||A.queryCommandState("InsertOrderedList"))}function F(){var U=A.selection.getRng();var T=U.startContainer;if(T.nodeType==3){return(U.endOffset==T.nodeValue.length)}else{if(T.nodeType==1){return U.endOffset==T.childNodes.length}}return false}function P(){var U=A.selection.getNode();var T=U.tagName==="P"&&U.parentNode.tagName==="LI"&&U.parentNode.lastChild===U;return A.selection.isCollapsed()&&T&&F()}function x(){var T=E();var V=T.parentNode.parentNode;var U=T.parentNode.lastChild===T;return U&&!w(V)&&Q(T)}function w(T){if(n(T)){return T.parentNode&&T.parentNode.tagName==="LI"}else{return T.tagName==="LI"}}function t(){return A.selection.isCollapsed()&&Q(E())}function E(){var T=A.selection.getStart();return((T.tagName=="BR"||T.tagName=="")&&T.parentNode.tagName=="LI")?T.parentNode:T}function Q(T){var U=T.childNodes.length;if(T.tagName==="LI"){return U==0?true:U==1&&(T.firstChild.tagName==""||T.firstChild.tagName=="BR"||H(T))}return false}function H(U){var V=tinymce.grep(U.parentNode.childNodes,function(X){return X.tagName=="LI"});var T=U==V[V.length-1];var W=U.firstChild;return tinymce.isIE9&&T&&(W.nodeValue==String.fromCharCode(160)||W.nodeValue==String.fromCharCode(32))}function S(T){return T.keyCode===tinymce.VK.ENTER}function y(T){return S(T)&&!T.shiftKey}function L(T){if(s(T)){return C}else{if(y(T)&&x()){return K}else{if(y(T)&&t()){return v}else{if(y(T)&&P()){return B}else{return O}}}}}function u(T,U){if(z==C||z==v||tinymce.isGecko&&z==K){r.cancel(U)}}function M(V,X){if(z==B){var W=V.selection.getNode();var U=V.dom.create("li");var T=V.dom.getParent(W,"li");V.dom.insertAfter(U,T);if(tinyMCE.isIE8){U.appendChild(V.dom.create("&nbsp;"));V.selection.setCursorLocation(U,1)}else{if(tinyMCE.isGecko){setTimeout(function(){var Y=V.getDoc().createTextNode("\uFEFF");U.appendChild(Y);V.selection.setCursorLocation(U,0)},0)}else{V.selection.setCursorLocation(U,0)}}r.cancel(X)}}function D(W,Z){var ab;if(!tinymce.isGecko){return}var U=W.selection.getStart();if(Z.keyCode!=tinymce.VK.BACKSPACE||U.tagName!=="IMG"){return}function V(af){var ag=af.firstChild;var ae=null;do{if(!ag){break}if(ag.tagName==="LI"){ae=ag}}while(ag=ag.nextSibling);return ae}function ad(af,ae){while(af.childNodes.length>0){ae.appendChild(af.childNodes[0])}}ab=U.parentNode.previousSibling;if(!ab){return}var Y;if(ab.tagName==="UL"||ab.tagName==="OL"){Y=ab}else{if(ab.previousSibling&&(ab.previousSibling.tagName==="UL"||ab.previousSibling.tagName==="OL")){Y=ab.previousSibling}else{return}}var ac=V(Y);var T=W.dom.createRng();T.setStart(ac,1);T.setEnd(ac,1);W.selection.setRng(T);W.selection.collapse(true);var X=W.selection.getBookmark();var aa=U.parentNode.cloneNode(true);if(aa.tagName==="P"||aa.tagName==="DIV"){ad(aa,ac)}else{ac.appendChild(aa)}U.parentNode.parentNode.removeChild(U.parentNode);W.selection.moveToBookmark(X)}function G(T){var U=A.dom.getParent(T,"ol,ul");if(U!=null){var V=U.lastChild;V.appendChild(A.getDoc().createElement(""));A.selection.setCursorLocation(V,0)}}this.ed=A;A.addCommand("Indent",this.indent,this);A.addCommand("Outdent",this.outdent,this);A.addCommand("InsertUnorderedList",function(){this.applyList("UL","OL")},this);A.addCommand("InsertOrderedList",function(){this.applyList("OL","UL")},this);A.onInit.add(function(){A.editorCommands.addCommands({outdent:function(){var U=A.selection,V=A.dom;function T(W){W=V.getParent(W,V.isBlock);return W&&(parseInt(A.dom.getStyle(W,"margin-left")||0,10)+parseInt(A.dom.getStyle(W,"padding-left")||0,10))>0}return T(U.getStart())||T(U.getEnd())||A.queryCommandState("InsertOrderedList")||A.queryCommandState("InsertUnorderedList")}},"state")});A.onKeyUp.add(function(U,W){if(z==C){U.execCommand(W.shiftKey?"Outdent":"Indent",true,null);z=O;return r.cancel(W)}else{if(z==v){var T=E();var V=U.settings.list_outdent_on_enter===true||W.shiftKey;U.execCommand(V?"Outdent":"Indent",true,null);if(tinymce.isIE){G(T)}return r.cancel(W)}else{if(z==K){if(tinymce.isIE8){var X=U.getDoc().createTextNode("\uFEFF");U.selection.getNode().appendChild(X)}else{if(tinymce.isIE9||tinymce.isGecko){U.execCommand("Outdent");return r.cancel(W)}}}}}});function N(T,U){var V=A.getDoc().createTextNode("\uFEFF");T.insertBefore(V,U);A.selection.setCursorLocation(V,0);A.execCommand("mceRepaint")}function R(V,W){if(S(W)){var T=E();if(T){var U=T.parentNode;var X=U&&U.parentNode;if(X&&X.nodeName=="LI"&&X.firstChild==U&&T==U.firstChild){N(X,U)}}}}function I(U,W){if(S(W)){var T=E();if(U.dom.select("ul li",T).length===1){var V=T.firstChild;N(T,V)}}}function J(V,Y){function W(ac,aa){var Z=[];var ad=new tinymce.dom.TreeWalker(aa,ac);for(var ab=ad.current();ab;ab=ad.next()){if(V.dom.is(ab,"ol,ul,li")){Z.push(ab)}}return Z}if(Y.keyCode==tinymce.VK.BACKSPACE){var U=E();if(U){var X=V.dom.getParent(U,"ol,ul");if(X&&X.firstChild===U){var T=W(X,U);V.execCommand("Outdent",false,T);V.undoManager.add();return r.cancel(Y)}}}}A.onKeyDown.add(function(T,U){z=L(U)});A.onKeyDown.add(u);A.onKeyDown.add(D);A.onKeyDown.add(M);if(tinymce.isGecko){A.onKeyUp.add(R)}if(tinymce.isIE8){A.onKeyUp.add(I)}if(tinymce.isGecko||tinymce.isWebKit){A.onKeyDown.add(J)}},applyList:function(z,u){var C=this,y=C.ed,F=y.dom,B=[],G=false,v=false,A=false,s,E=y.selection.getSelectedBlocks();function H(t){if(t&&t.tagName==="BR"){F.remove(t)}}function D(M){var N=F.create(z),t;function L(O){if(O.style.marginLeft||O.style.paddingLeft){C.adjustPaddingFunction(false)(O)}}if(M.tagName==="LI"){}else{if(M.tagName==="P"||M.tagName==="DIV"||M.tagName==="BODY"){K(M,function(P,O){I(P,O,M.tagName==="BODY"?null:P.parentNode);t=P.parentNode;L(t);H(O)});if(t){if(t.tagName==="LI"&&(M.tagName==="P"||E.length>1)){F.split(t.parentNode.parentNode,t.parentNode)}o(t.parentNode,true)}return}else{t=F.create("li");F.insertAfter(t,M);t.appendChild(M);L(M);M=t}}F.insertAfter(N,M);N.appendChild(M);o(N,true);B.push(M)}function I(P,L,M){var t,O=P,N;while(!F.isBlock(P.parentNode)&&P.parentNode!==F.getRoot()){P=F.split(P.parentNode,P.previousSibling);P=P.nextSibling;O=P}if(M){t=M.cloneNode(true);P.parentNode.insertBefore(t,P);while(t.firstChild){F.remove(t.firstChild)}t=F.rename(t,"li")}else{t=F.create("li");P.parentNode.insertBefore(t,P)}while(O&&O!=L){N=O.nextSibling;t.appendChild(O);O=N}if(t.childNodes.length===0){t.innerHTML='<br _mce_bogus="1" />'}D(t)}function K(O,T){var N,L,Q=3,M=1,t="br,ul,ol,p,div,h1,h2,h3,h4,h5,h6,table,blockquote,address,pre,form,center,dl";function P(X,U){var V=F.createRng(),W;h.keep=true;y.selection.moveToBookmark(h);h.keep=false;W=y.selection.getRng(true);if(!U){U=X.parentNode.lastChild}V.setStartBefore(X);V.setEndAfter(U);return !(V.compareBoundaryPoints(Q,W)>0||V.compareBoundaryPoints(M,W)<=0)}function S(U){if(U.nextSibling){return U.nextSibling}if(!F.isBlock(U.parentNode)&&U.parentNode!==F.getRoot()){return S(U.parentNode)}}N=O.firstChild;var R=false;f(F.select(t,O),function(U){if(U.hasAttribute&&U.hasAttribute("_mce_bogus")){return true}if(P(N,U)){F.addClass(U,"_mce_tagged_br");N=S(U)}});R=(N&&P(N,undefined));N=O.firstChild;f(F.select(t,O),function(V){var U=S(V);if(V.hasAttribute&&V.hasAttribute("_mce_bogus")){return true}if(F.hasClass(V,"_mce_tagged_br")){T(N,V,L);L=null}else{L=V}N=U});if(R){T(N,undefined,L)}}function J(t){K(t,function(N,L,M){I(N,L);H(L);H(M)})}function w(t){if(tinymce.inArray(B,t)!==-1){return}if(t.parentNode.tagName===u){F.split(t.parentNode,t);D(t);q(t.parentNode,false)}B.push(t)}function x(M){var O,N,L,t;if(tinymce.inArray(B,M)!==-1){return}M=d(M,F);while(F.is(M.parentNode,"ol,ul,li")){F.split(M.parentNode,M)}B.push(M);M=F.rename(M,"p");L=o(M,false,y.settings.force_br_newlines);if(L===M){O=M.firstChild;while(O){if(F.isBlock(O)){O=F.split(O.parentNode,O);t=true;N=O.nextSibling&&O.nextSibling.firstChild}else{N=O.nextSibling;if(t&&O.tagName==="BR"){F.remove(O)}t=false}O=N}}}f(E,function(t){t=m(t,F);if(t.tagName===u||(t.tagName==="LI"&&t.parentNode.tagName===u)){v=true}else{if(t.tagName===z||(t.tagName==="LI"&&t.parentNode.tagName===z)){G=true}else{A=true}}});if(A&&!G||v||E.length===0){s={LI:w,H1:D,H2:D,H3:D,H4:D,H5:D,H6:D,P:D,BODY:D,DIV:E.length>1?D:J,defaultAction:J,elements:this.selectedBlocks()}}else{s={defaultAction:x,elements:this.selectedBlocks()}}this.process(s)},indent:function(){var s=this.ed,w=s.dom,x=[];function u(y){var z=w.create("li",{style:"list-style-type: none;"});w.insertAfter(z,y);return z}function t(z){var D=u(z),C=w.getParent(z,"ol,ul"),A=C.tagName,E=w.getStyle(C,"list-style-type"),y={},B;if(E!==""){y.style="list-style-type: "+E+";"}B=w.create(A,y);D.appendChild(B);return B}function v(y){if(!e(s,y,x)){y=d(y,w);var z=t(y);z.appendChild(y);o(z.parentNode,false);o(z,false);x.push(y)}}this.process({LI:v,defaultAction:this.adjustPaddingFunction(true),elements:this.selectedBlocks()})},outdent:function(y,u){var x=this,v=x.ed,z=v.dom,s=[];function A(C){var B,t,D;if(!e(v,C,s)){if(z.getStyle(C,"margin-left")!==""||z.getStyle(C,"padding-left")!==""){return x.adjustPaddingFunction(false)(C)}D=z.getStyle(C,"text-align",true);if(D==="center"||D==="right"){z.setStyle(C,"text-align","left");return}C=d(C,z);B=C.parentNode;t=C.parentNode.parentNode;if(t.tagName==="P"){z.split(t,C.parentNode)}else{z.split(B,C);if(t.tagName==="LI"){z.split(t,C)}else{if(!z.is(t,"ol,ul")){z.rename(C,"p")}}}s.push(C)}}var w=u&&tinymce.is(u,"array")?u:this.selectedBlocks();this.process({LI:A,defaultAction:this.adjustPaddingFunction(false),elements:w});f(s,o)},process:function(x){var F=this,w=F.ed.selection,y=F.ed.dom,D,u;function B(s){var t=tinymce.grep(s.childNodes,function(H){return !(H.nodeName==="BR"||H.nodeName==="SPAN"&&y.getAttrib(H,"data-mce-type")=="bookmark"||H.nodeType==3&&(H.nodeValue==String.fromCharCode(160)||H.nodeValue==""))});return t.length===0}function A(t){y.removeClass(t,"_mce_act_on");if(!t||t.nodeType!==1||D.length>1&&B(t)){return}t=m(t,y);var s=x[t.tagName];if(!s){s=x.defaultAction}s(t)}function v(s){F.splitSafeEach(s.childNodes,A)}function E(s,t){return t>=0&&s.hasChildNodes()&&t<s.childNodes.length&&s.childNodes[t].tagName==="BR"}function C(){var t=w.getNode();var s=y.getParent(t,"td");return s!==null}D=x.elements;u=w.getRng(true);if(!u.collapsed){if(E(u.endContainer,u.endOffset-1)){u.setEnd(u.endContainer,u.endOffset-1);w.setRng(u)}if(E(u.startContainer,u.startOffset)){u.setStart(u.startContainer,u.startOffset+1);w.setRng(u)}}if(tinymce.isIE8){var G=F.ed.selection.getNode();if(G.tagName==="LI"&&!(G.parentNode.lastChild===G)){var z=F.ed.getDoc().createTextNode("\uFEFF");G.appendChild(z)}}h=w.getBookmark();x.OL=x.UL=v;F.splitSafeEach(D,A);w.moveToBookmark(h);h=null;if(!C()){F.ed.execCommand("mceRepaint")}},splitSafeEach:function(s,t){if(tinymce.isGecko&&(/Firefox\/[12]\.[0-9]/.test(navigator.userAgent)||/Firefox\/3\.[0-4]/.test(navigator.userAgent))){this.classBasedEach(s,t)}else{f(s,t)}},classBasedEach:function(s,v){var w=this.ed.dom,t,u;f(s,function(x){w.addClass(x,"_mce_act_on")});t=w.select("._mce_act_on");while(t.length>0){u=t.shift();w.removeClass(u,"_mce_act_on");v(u);t=w.select("._mce_act_on")}},adjustPaddingFunction:function(v){var s,u,t=this.ed;s=t.settings.indentation;u=/[a-z%]+/i.exec(s);s=parseInt(s,10);return function(x){var y,w;y=parseInt(t.dom.getStyle(x,"margin-left")||0,10)+parseInt(t.dom.getStyle(x,"padding-left")||0,10);if(v){w=y+s}else{w=y-s}t.dom.setStyle(x,"padding-left","");t.dom.setStyle(x,"margin-left",w>0?w+u:"")}},selectedBlocks:function(){var s=this.ed;var t=s.selection.getSelectedBlocks();return t.length==0?[s.dom.getRoot()]:t},getInfo:function(){return{longname:"Lists",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/lists",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("lists",tinymce.plugins.Lists)}());