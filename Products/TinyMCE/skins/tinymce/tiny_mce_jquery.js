(function(d){var c=/^\s*|\s*$/g,e,b="B".replace(/A(.)|B/,"$1")==="$1";var a={majorVersion:"@@tinymce_major_version@@",minorVersion:"@@tinymce_minor_version@@",releaseDate:"@@tinymce_release_date@@",_init:function(){var s=this,q=document,m=navigator,g=m.userAgent,l,f,k,j,h,r;s.isOpera=d.opera&&opera.buildNumber;s.isWebKit=/WebKit/.test(g);s.isIE=!s.isWebKit&&!s.isOpera&&(/MSIE/gi).test(g)&&(/Explorer/gi).test(m.appName);s.isIE6=s.isIE&&/MSIE [56]/.test(g);s.isIE7=s.isIE&&/MSIE [7]/.test(g);s.isIE8=s.isIE&&/MSIE [8]/.test(g);s.isIE9=s.isIE&&/MSIE [9]/.test(g);s.isGecko=!s.isWebKit&&/Gecko/.test(g);s.isMac=g.indexOf("Mac")!=-1;s.isAir=/adobeair/i.test(g);s.isIDevice=/(iPad|iPhone)/.test(g);s.isIOS5=s.isIDevice&&g.match(/AppleWebKit\/(\d*)/)[1]>=534;if(d.tinyMCEPreInit){s.suffix=tinyMCEPreInit.suffix;s.baseURL=tinyMCEPreInit.base;s.query=tinyMCEPreInit.query;return}s.suffix="";f=q.getElementsByTagName("base");for(l=0;l<f.length;l++){if(r=f[l].href){if(/^https?:\/\/[^\/]+$/.test(r)){r+="/"}j=r?r.match(/.*\//)[0]:""}}function o(i){if(i.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(i.src)){if(/_(src|dev)\.js/g.test(i.src)){s.suffix="_src"}if((h=i.src.indexOf("?"))!=-1){s.query=i.src.substring(h+1)}s.baseURL=i.src.substring(0,i.src.lastIndexOf("/"));if(j&&s.baseURL.indexOf("://")==-1&&s.baseURL.indexOf("/")!==0){s.baseURL=j+s.baseURL}return s.baseURL}return null}f=q.getElementsByTagName("script");for(l=0;l<f.length;l++){if(o(f[l])){return}}k=q.getElementsByTagName("head")[0];if(k){f=k.getElementsByTagName("script");for(l=0;l<f.length;l++){if(o(f[l])){return}}}return},is:function(g,f){if(!f){return g!==e}if(f=="array"&&(g.hasOwnProperty&&g instanceof Array)){return true}return typeof(g)==f},makeMap:function(f,j,h){var g;f=f||[];j=j||",";if(typeof(f)=="string"){f=f.split(j)}h=h||{};g=f.length;while(g--){h[f[g]]={}}return h},each:function(i,f,h){var j,g;if(!i){return 0}h=h||i;if(i.length!==e){for(j=0,g=i.length;j<g;j++){if(f.call(h,i[j],j,i)===false){return 0}}}else{for(j in i){if(i.hasOwnProperty(j)){if(f.call(h,i[j],j,i)===false){return 0}}}}return 1},trim:function(f){return(f?""+f:"").replace(c,"")},create:function(o,g,i){var n=this,f,j,l,k,h,m=0;o=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(o);l=o[3].match(/(^|\.)(\w+)$/i)[2];j=n.createNS(o[3].replace(/\.\w+$/,""),i);if(j[l]){return}if(o[2]=="static"){j[l]=g;if(this.onCreate){this.onCreate(o[2],o[3],j[l])}return}if(!g[l]){g[l]=function(){};m=1}j[l]=g[l];n.extend(j[l].prototype,g);if(o[5]){f=n.resolve(o[5]).prototype;k=o[5].match(/\.(\w+)$/i)[1];h=j[l];if(m){j[l]=function(){return f[k].apply(this,arguments)}}else{j[l]=function(){this.parent=f[k];return h.apply(this,arguments)}}j[l].prototype[l]=j[l];n.each(f,function(p,q){j[l].prototype[q]=f[q]});n.each(g,function(p,q){if(f[q]){j[l].prototype[q]=function(){this.parent=f[q];return p.apply(this,arguments)}}else{if(q!=l){j[l].prototype[q]=p}}})}n.each(g["static"],function(p,q){j[l][q]=p});if(this.onCreate){this.onCreate(o[2],o[3],j[l].prototype)}},walk:function(i,h,j,g){g=g||this;if(i){if(j){i=i[j]}a.each(i,function(k,f){if(h.call(g,k,f,j)===false){return false}a.walk(k,h,j,g)})}},createNS:function(j,h){var g,f;h=h||d;j=j.split(".");for(g=0;g<j.length;g++){f=j[g];if(!h[f]){h[f]={}}h=h[f]}return h},resolve:function(j,h){var g,f;h=h||d;j=j.split(".");for(g=0,f=j.length;g<f;g++){h=h[j[g]];if(!h){break}}return h},addUnload:function(j,i){var g=this;j={func:j,scope:i||this};if(!g.unloads){function h(){var f=g.unloads,l,m;if(f){for(m in f){l=f[m];if(l&&l.func){l.func.call(l.scope,1)}}if(d.detachEvent){d.detachEvent("onbeforeunload",k);d.detachEvent("onunload",h)}else{if(d.removeEventListener){d.removeEventListener("unload",h,false)}}g.unloads=l=f=w=h=0;if(d.CollectGarbage){CollectGarbage()}}}function k(){var l=document;if(l.readyState=="interactive"){function f(){l.detachEvent("onstop",f);if(h){h()}l=0}if(l){l.attachEvent("onstop",f)}d.setTimeout(function(){if(l){l.detachEvent("onstop",f)}},0)}}if(d.attachEvent){d.attachEvent("onunload",h);d.attachEvent("onbeforeunload",k)}else{if(d.addEventListener){d.addEventListener("unload",h,false)}}g.unloads=[j]}else{g.unloads.push(j)}return j},removeUnload:function(i){var g=this.unloads,h=null;a.each(g,function(j,f){if(j&&j.func==i){g.splice(f,1);h=i;return false}});return h},explode:function(f,g){return f?a.map(f.split(g||","),a.trim):f},_addVer:function(g){var f;if(!this.query){return g}f=(g.indexOf("?")==-1?"?":"&")+this.query;if(g.indexOf("#")==-1){return g+f}return g.replace("#",f+"#")},_replace:function(h,f,g){if(b){return g.replace(h,function(){var l=f,j=arguments,k;for(k=0;k<j.length-2;k++){if(j[k]===e){l=l.replace(new RegExp("\\$"+k,"g"),"")}else{l=l.replace(new RegExp("\\$"+k,"g"),j[k])}}return l})}return g.replace(h,f)}};a._init();d.tinymce=d.tinyMCE=a})(window);(function(e,a){var d=a.is,c=/^(href|src|style)$/i,f;if(!e&&window.console){return console.log("Load jQuery first!")}a.$=e;a.adapter={patchEditor:function(h){var j=e.fn;function i(n,o){var m=this;if(o){m.removeAttr("data-mce-style")}return j.css.apply(m,arguments)}function g(n,o){var m=this;if(c.test(n)){if(o!==f){m.each(function(p,q){h.dom.setAttrib(q,n,o)});return m}else{return m.attr("data-mce-"+n)}}return j.attr.apply(m,arguments)}function k(m){return function(n){if(n){n=h.dom.processHTML(n)}return m.call(this,n)}}function l(m){if(m.css!==i){m.css=i;m.attr=g;m.html=k(j.html);m.append=k(j.append);m.prepend=k(j.prepend);m.after=k(j.after);m.before=k(j.before);m.replaceWith=k(j.replaceWith);m.tinymce=h;m.pushStack=function(){return l(j.pushStack.apply(this,arguments))}}return m}h.$=function(m,n){var o=h.getDoc();return l(e(m||o,o||n))}}};a.extend=e.extend;a.extend(a,{map:e.map,grep:function(g,h){return e.grep(g,h||function(){return 1})},inArray:function(g,h){return e.inArray(h,g||[])}});var b={"tinymce.dom.DOMUtils":{select:function(g,i){var h=this;return e.find(g,h.get(i)||h.get(h.settings.root_element)||h.doc,[])},is:function(h,g){return e(this.get(h)).is(g)}}};a.onCreate=function(g,i,h){a.extend(h,b[i])}})(window.jQuery,tinymce);tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(a){this.scope=a||this;this.listeners=[]},add:function(a,b){this.listeners.push({cb:a,scope:b||this.scope});return a},addToTop:function(a,b){this.listeners.unshift({cb:a,scope:b||this.scope});return a},remove:function(a){var b=this.listeners,c=null;tinymce.each(b,function(e,d){if(a==e.cb){c=a;b.splice(d,1);return false}});return c},dispatch:function(){var f,d=arguments,e,b=this.listeners,g;for(e=0;e<b.length;e++){g=b[e];f=g.cb.apply(g.scope,d);if(f===false){break}}return f}});(function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(e,g){var f=this,i,d,c,h;e=tinymce.trim(e);g=f.settings=g||{};if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e)){f.source=e;return}if(e.indexOf("/")===0&&e.indexOf("//")!==0){e=(g.base_uri?g.base_uri.protocol||"http":"http")+"://mce_host"+e}if(!/^[\w-]*:?\/\//.test(e)){h=g.base_uri?g.base_uri.path:new tinymce.util.URI(location.href).directory;e=((g.base_uri&&g.base_uri.protocol)||"http")+"://mce_host"+f.toAbsPath(h,e)}e=e.replace(/@/g,"(mce_at)");e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(b,j){var k=e[j];if(k){k=k.replace(/\(mce_at\)/g,"@")}f[b]=k});if(c=g.base_uri){if(!f.protocol){f.protocol=c.protocol}if(!f.userInfo){f.userInfo=c.userInfo}if(!f.port&&f.host=="mce_host"){f.port=c.port}if(!f.host||f.host=="mce_host"){f.host=c.host}f.source=""}},setPath:function(c){var b=this;c=/^(.*?)\/?(\w+)?$/.exec(c);b.path=c[0];b.directory=c[1];b.file=c[2];b.source="";b.getURI()},toRelative:function(b){var c=this,d;if(b==="./"){return b}b=new tinymce.util.URI(b,{base_uri:c});if((b.host!="mce_host"&&c.host!=b.host&&b.host)||c.port!=b.port||c.protocol!=b.protocol){return b.getURI()}d=c.toRelPath(c.path,b.path);if(b.query){d+="?"+b.query}if(b.anchor){d+="#"+b.anchor}return d},toAbsolute:function(b,c){var b=new tinymce.util.URI(b,{base_uri:this});return b.getURI(this.host==b.host&&this.protocol==b.protocol?c:0)},toRelPath:function(g,h){var c,f=0,d="",e,b;g=g.substring(0,g.lastIndexOf("/"));g=g.split("/");c=h.split("/");if(g.length>=c.length){for(e=0,b=g.length;e<b;e++){if(e>=c.length||g[e]!=c[e]){f=e+1;break}}}if(g.length<c.length){for(e=0,b=c.length;e<b;e++){if(e>=g.length||g[e]!=c[e]){f=e+1;break}}}if(f==0){return"./"}if(f==1){return h}for(e=0,b=g.length-(f-1);e<b;e++){d+="../"}for(e=f-1,b=c.length;e<b;e++){if(e!=f-1){d+="/"+c[e]}else{d+=c[e]}}return d},toAbsPath:function(e,f){var c,b=0,h=[],d,g;d=/\/$/.test(f)?"/":"";e=e.split("/");f=f.split("/");a(e,function(i){if(i){h.push(i)}});e=h;for(c=f.length-1,h=[];c>=0;c--){if(f[c].length==0||f[c]=="."){continue}if(f[c]==".."){b++;continue}if(b>0){b--;continue}h.push(f[c])}c=e.length-b;if(c<=0){g=h.reverse().join("/")}else{g=e.slice(0,c).join("/")+"/"+h.reverse().join("/")}if(g.indexOf("/")!==0){g="/"+g}if(d&&g.lastIndexOf("/")!==g.length-1){g+=d}return g},getURI:function(d){var c,b=this;if(!b.source||d){c="";if(!d){if(b.protocol){c+=b.protocol+"://"}if(b.userInfo){c+=b.userInfo+"@"}if(b.host){c+=b.host}if(b.port){c+=":"+b.port}}if(b.path){c+=b.path}if(b.query){c+="?"+b.query}if(b.anchor){c+="#"+b.anchor}b.source=c}return b.source}})})();(function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(d){var b=this.get(d),c;if(b){a(b.split("&"),function(e){e=e.split("=");c=c||{};c[unescape(e[0])]=unescape(e[1])})}return c},setHash:function(j,b,g,f,i,c){var h="";a(b,function(e,d){h+=(!h?"":"&")+escape(d)+"="+escape(e)});this.set(j,h,g,f,i,c)},get:function(i){var h=document.cookie,g,f=i+"=",d;if(!h){return}d=h.indexOf("; "+f);if(d==-1){d=h.indexOf(f);if(d!=0){return null}}else{d+=2}g=h.indexOf(";",d);if(g==-1){g=h.length}return unescape(h.substring(d+f.length,g))},set:function(i,b,g,f,h,c){document.cookie=i+"="+escape(b)+((g)?"; expires="+g.toGMTString():"")+((f)?"; path="+escape(f):"")+((h)?"; domain="+h:"")+((c)?"; secure":"")},remove:function(e,b){var c=new Date();c.setTime(c.getTime()-1000);this.set(e,"",c,b,c)}})})();(function(){function serialize(o,quote){var i,v,t;quote=quote||'"';if(o==null){return"null"}t=typeof o;if(t=="string"){v="\bb\tt\nn\ff\rr\"\"''\\\\";return quote+o.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,b){if(quote==='"'&&a==="'"){return a}i=v.indexOf(b);if(i+1){return"\\"+v.charAt(i+1)}a=b.charCodeAt().toString(16);return"\\u"+"0000".substring(a.length)+a})+quote}if(t=="object"){if(o.hasOwnProperty&&o instanceof Array){for(i=0,v="[";i<o.length;i++){v+=(i>0?",":"")+serialize(o[i],quote)}return v+"]"}v="{";for(i in o){if(o.hasOwnProperty(i)){v+=typeof o[i]!="function"?(v.length>1?","+quote:quote)+i+quote+":"+serialize(o[i],quote):""}}return v+"}"}return""+o}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}})();tinymce.create("static tinymce.util.XHR",{send:function(g){var a,e,b=window,h=0;g.scope=g.scope||this;g.success_scope=g.success_scope||g.scope;g.error_scope=g.error_scope||g.scope;g.async=g.async===false?false:true;g.data=g.data||"";function d(i){a=0;try{a=new ActiveXObject(i)}catch(c){}return a}a=b.XMLHttpRequest?new XMLHttpRequest():d("Microsoft.XMLHTTP")||d("Msxml2.XMLHTTP");if(a){if(a.overrideMimeType){a.overrideMimeType(g.content_type)}a.open(g.type||(g.data?"POST":"GET"),g.url,g.async);if(g.content_type){a.setRequestHeader("Content-Type",g.content_type)}a.setRequestHeader("X-Requested-With","XMLHttpRequest");a.send(g.data);function f(){if(!g.async||a.readyState==4||h++>10000){if(g.success&&h<10000&&a.status==200){g.success.call(g.success_scope,""+a.responseText,a,g)}else{if(g.error){g.error.call(g.error_scope,h>10000?"TIMED_OUT":"GENERAL",a,g)}}a=null}else{b.setTimeout(f,10)}}if(!g.async){return f()}e=b.setTimeout(f,10)}}});(function(){var b=tinymce.extend,c=tinymce.util.JSON,a=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(d){this.settings=b({},d);this.count=0},send:function(f){var e=f.error,d=f.success;f=b(this.settings,f);f.success=function(h,g){h=c.parse(h);if(typeof(h)=="undefined"){h={error:"JSON Parse error."}}if(h.error){e.call(f.error_scope||f.scope,h.error,g)}else{d.call(f.success_scope||f.scope,h.result)}};f.error=function(h,g){if(e){e.call(f.error_scope||f.scope,h,g)}};f.data=c.serialize({id:f.id||"c"+(this.count++),method:f.method,params:f.params});f.content_type="application/json";a.send(f)},"static":{sendRPC:function(d){return new tinymce.util.JSONRequest().send(d)}}})}());(function(a){a.VK={DELETE:46,BACKSPACE:8,ENTER:13,TAB:9,SPACEBAR:32,UP:38,DOWN:40}})(tinymce);(function(j){var k=j.VK,l=k.BACKSPACE,h=k.DELETE;function b(n){var o=n.dom,m=n.selection;n.onKeyDown.add(function(r,u){var q,v,s,t,p;p=u.keyCode==h;if(p||u.keyCode==l){u.preventDefault();q=m.getRng();v=o.getParent(q.startContainer,o.isBlock);if(p){v=o.getNext(v,o.isBlock)}if(v){s=v.firstChild;while(s&&s.nodeType==3&&s.nodeValue.length==0){s=s.nextSibling}if(s&&s.nodeName==="SPAN"){t=s.cloneNode(false)}}r.getDoc().execCommand(p?"ForwardDelete":"Delete",false,null);v=o.getParent(q.startContainer,o.isBlock);j.each(o.select("span.Apple-style-span,font.Apple-style-span",v),function(x){var y=m.getBookmark();if(t){o.replace(t.cloneNode(false),x,true)}else{o.remove(x,true)}m.moveToBookmark(y)})}})}function d(m){m.onKeyUp.add(function(n,o){var p=o.keyCode;if(p==h||p==l){if(n.dom.isEmpty(n.getBody())){n.setContent("",{format:"raw"});n.nodeChanged();return}}})}function c(m){m.dom.bind(m.getDoc(),"focusin",function(){m.selection.setRng(m.selection.getRng())})}function e(m){m.onKeyDown.add(function(o,q){if(q.keyCode===l){if(o.selection.isCollapsed()&&o.selection.getRng(true).startOffset===0){var p=o.selection.getNode();var n=p.previousSibling;if(n&&n.nodeName&&n.nodeName.toLowerCase()==="hr"){o.dom.remove(n);j.dom.Event.cancel(q)}}}})}function f(m){if(!Range.prototype.getClientRects){m.onMouseDown.add(function(o,p){if(p.target.nodeName==="HTML"){var n=o.getBody();n.blur();setTimeout(function(){n.focus()},0)}})}}function a(m){m.onClick.add(function(n,o){o=o.target;if(/^(IMG|HR)$/.test(o.nodeName)){n.selection.getSel().setBaseAndExtent(o,0,o,1)}if(o.nodeName=="A"&&n.dom.hasClass(o,"mceItemAnchor")){n.selection.select(o)}n.nodeChanged()})}function i(n){var o,m;n.dom.bind(n.getDoc(),"selectionchange",function(){if(m){clearTimeout(m);m=0}m=window.setTimeout(function(){var p=n.selection.getRng();if(!o||!j.dom.RangeUtils.compareRanges(p,o)){n.nodeChanged();o=p}},50)})}function g(m){document.body.setAttribute("role","application")}j.create("tinymce.util.Quirks",{Quirks:function(m){if(j.isWebKit){b(m);d(m);c(m);a(m);if(j.isIDevice){i(m)}}if(j.isIE){e(m);d(m);g(m)}if(j.isGecko){e(m);f(m)}}})})(tinymce);(function(j){var g,f,e,k=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=/[<>&\"\']/g,d=/&(#x|#)?([\w]+);/g,i={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"};f={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"};e={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};function h(l){var m;m=document.createElement("div");m.innerHTML=l;return m.textContent||m.innerText||l}function b(l,p){var m,o,n,q={};if(l){l=l.split(",");p=p||10;for(m=0;m<l.length;m+=2){o=String.fromCharCode(parseInt(l[m],p));if(!f[o]){n="&"+l[m+1]+";";q[o]=n;q[n]=o}}return q}}g=b("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);j.html=j.html||{};j.html.Entities={encodeRaw:function(m,l){return m.replace(l?k:a,function(n){return f[n]||n})},encodeAllRaw:function(l){return(""+l).replace(c,function(m){return f[m]||m})},encodeNumeric:function(m,l){return m.replace(l?k:a,function(n){if(n.length>1){return"&#"+(((n.charCodeAt(0)-55296)*1024)+(n.charCodeAt(1)-56320)+65536)+";"}return f[n]||"&#"+n.charCodeAt(0)+";"})},encodeNamed:function(n,l,m){m=m||g;return n.replace(l?k:a,function(o){return f[o]||m[o]||o})},getEncodeFunc:function(n,p){var o=j.html.Entities;p=b(p)||g;function m(r,q){return r.replace(q?k:a,function(s){return f[s]||p[s]||"&#"+s.charCodeAt(0)+";"||s})}function l(r,q){return o.encodeNamed(r,q,p)}n=j.makeMap(n.replace(/\+/g,","));if(n.named&&n.numeric){return m}if(n.named){if(p){return l}return o.encodeNamed}if(n.numeric){return o.encodeNumeric}return o.encodeRaw},decode:function(l){return l.replace(d,function(n,m,o){if(m){o=parseInt(o,m.length===2?16:10);if(o>65535){o-=65536;return String.fromCharCode(55296+(o>>10),56320+(o&1023))}else{return i[o]||String.fromCharCode(o)}}return e[n]||g[n]||h(n)})}}})(tinymce);tinymce.html.Styles=function(c,e){var k=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,d=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,h=/\s*([^:]+):\s*([^;]+);?/g,j=/\s+$/,m=/rgb/,b,f,g={},l;c=c||{};l="\\\" \\' \\; \\: ; : \uFEFF".split(" ");for(f=0;f<l.length;f++){g[l[f]]="\uFEFF"+f;g["\uFEFF"+f]=l[f]}function a(n,q,p,i){function o(r){r=parseInt(r).toString(16);return r.length>1?r:"0"+r}return"#"+o(q)+o(p)+o(i)}return{toHex:function(i){return i.replace(k,a)},parse:function(r){var x={},q,n,z,s,t=c.url_converter,y=c.url_converter_scope||this;function p(A,F){var E,B,C,D;E=x[A+"-top"+F];if(!E){return}B=x[A+"-right"+F];if(E!=B){return}C=x[A+"-bottom"+F];if(B!=C){return}D=x[A+"-left"+F];if(C!=D){return}x[A+F]=D;delete x[A+"-top"+F];delete x[A+"-right"+F];delete x[A+"-bottom"+F];delete x[A+"-left"+F]}function i(B){var C=x[B],A;if(!C||C.indexOf(" ")<0){return}C=C.split(" ");A=C.length;while(A--){if(C[A]!==C[0]){return false}}x[B]=C[0];return true}function v(D,B,A,C){if(!i(B)){return}if(!i(A)){return}if(!i(C)){return}x[D]=x[B]+" "+x[A]+" "+x[C];delete x[B];delete x[A];delete x[C]}function o(A){s=true;return g[A]}function u(B,A){if(s){B=B.replace(/\uFEFF[0-9]/g,function(C){return g[C]})}if(!A){B=B.replace(/\\([\'\";:])/g,"$1")}return B}if(r){r=r.replace(/\\[\"\';:\uFEFF]/g,o).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(A){return A.replace(/[;:]/g,o)});while(q=h.exec(r)){n=q[1].replace(j,"").toLowerCase();z=q[2].replace(j,"");if(n&&z.length>0){if(n==="font-weight"&&z==="700"){z="bold"}else{if(n==="color"||n==="background-color"){z=z.toLowerCase()}}z=z.replace(k,a);z=z.replace(d,function(B,A,E,D,F,C){F=F||C;if(F){F=u(F);return"'"+F.replace(/\'/g,"\\'")+"'"}A=u(A||E||D);if(t){A=t.call(y,A,"style")}return"url('"+A.replace(/\'/g,"\\'")+"')"});x[n]=s?u(z,true):z}h.lastIndex=q.index+q[0].length}p("border","");p("border","-width");p("border","-color");p("border","-style");p("padding","");p("margin","");v("border","border-width","border-style","border-color");if(x.border==="medium none"){delete x.border}}return x},serialize:function(i,r){var p="",o,q;function n(t){var x,u,s,v;x=e.styles[t];if(x){for(u=0,s=x.length;u<s;u++){t=x[u];v=i[t];if(v!==b&&v.length>0){p+=(p.length>0?" ":"")+t+": "+v+";"}}}}if(r&&e&&e.styles){n("*");n(r)}else{for(o in i){q=i[o];if(q!==b&&q.length>0){p+=(p.length>0?" ":"")+o+": "+q+";"}}}return p}}};(function(l){var g={},j,m,f,e,a={},b,d,c=l.makeMap,k=l.each;function i(o,n){return o.split(n||",")}function h(r,q){var p,n={};function o(s){return s.replace(/[A-Z]+/g,function(t){return o(r[t])})}for(p in r){if(r.hasOwnProperty(p)){r[p]=o(r[p])}}o(q).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(v,t,s,u){s=i(s,"|");n[t]={attributes:c(s),attributesOrder:s,children:c(u,"|",{"#comment":{}})}});return n}m="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup";m=c(m,",",c(m.toUpperCase()));g=h({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]");j=c("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,autoplay,loop,controls");f=c("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source");e=l.extend(c("td,th,iframe,video,audio,object"),f);b=c("pre,script,style,textarea");d=c("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");l.html.Schema=function(r){var z=this,v={},n={},y=[],s,o;r=r||{};if(r.verify_html===false){r.valid_elements="*[*]"}if(r.valid_styles){s={};k(r.valid_styles,function(C,B){s[B]=l.explode(C)})}o=r.whitespace_elements?c(r.whitespace_elements):b;function A(B){return new RegExp("^"+B.replace(/([?+*])/g,".$1")+"$")}function q(H){var E,B,W,T,Y,C,N,S,U,L,V,Z,I,K,X,O,Q,M,P,aa,J,R,F=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,D=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,G=/[*?+]/;if(H){H=i(H);if(v["@"]){Q=v["@"].attributes;M=v["@"].attributesOrder}for(E=0,B=H.length;E<B;E++){C=F.exec(H[E]);if(C){X=C[1];L=C[2];O=C[3];U=C[4];I={};K=[];N={attributes:I,attributesOrder:K};if(X==="#"){N.paddEmpty=true}if(X==="-"){N.removeEmpty=true}if(Q){for(aa in Q){I[aa]=Q[aa]}K.push.apply(K,M)}if(U){U=i(U,"|");for(W=0,T=U.length;W<T;W++){C=D.exec(U[W]);if(C){S={};Z=C[1];V=C[2].replace(/::/g,":");X=C[3];R=C[4];if(Z==="!"){N.attributesRequired=N.attributesRequired||[];N.attributesRequired.push(V);S.required=true}if(Z==="-"){delete I[V];K.splice(l.inArray(K,V),1);continue}if(X){if(X==="="){N.attributesDefault=N.attributesDefault||[];N.attributesDefault.push({name:V,value:R});S.defaultValue=R}if(X===":"){N.attributesForced=N.attributesForced||[];N.attributesForced.push({name:V,value:R});S.forcedValue=R}if(X==="<"){S.validValues=c(R,"?")}}if(G.test(V)){N.attributePatterns=N.attributePatterns||[];S.pattern=A(V);N.attributePatterns.push(S)}else{if(!I[V]){K.push(V)}I[V]=S}}}}if(!Q&&L=="@"){Q=I;M=K}if(O){N.outputName=L;v[O]=N}if(G.test(L)){N.pattern=A(L);y.push(N)}else{v[L]=N}}}}}function u(B){v={};y=[];q(B);k(g,function(D,C){n[C]=D.children})}function p(C){var B=/^(~)?(.+)$/;if(C){k(i(C),function(G){var E=B.exec(G),H=E[1]==="~",F=H?"span":"div",D=E[2];n[D]=n[F];a[D]=F;if(!H){m[D]={}}k(n,function(I,J){if(I[F]){I[D]=I[F]}})})}}function t(B){var C=/^([+\-]?)(\w+)\[([^\]]+)\]$/;if(B){k(i(B),function(G){var F=C.exec(G),E,D;if(F){D=F[1];if(D){E=n[F[2]]}else{E=n[F[2]]={"#comment":{}}}E=n[F[2]];k(i(F[3],"|"),function(H){if(D==="-"){delete E[H]}else{E[H]={}}})}})}}function x(C){var B=v[C],D;if(B){return B}D=y.length;while(D--){B=y[D];if(B.pattern.test(C)){return B}}}if(!r.valid_elements){k(g,function(C,B){v[B]={attributes:C.attributes,attributesOrder:C.attributesOrder};n[B]=C.children});k(i("strong/b,em/i"),function(B){B=i(B,"/");v[B[1]].outputName=B[0]});v.img.attributesDefault=[{name:"alt",value:""}];k(i("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr"),function(B){v[B].removeEmpty=true});k(i("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(B){v[B].paddEmpty=true})}else{u(r.valid_elements)}p(r.custom_elements);t(r.valid_children);q(r.extended_valid_elements);t("+ol[ul|ol],+ul[ul|ol]");if(!x("span")){q("span[!data-mce-type|*]")}if(r.invalid_elements){l.each(l.explode(r.invalid_elements),function(B){if(v[B]){delete v[B]}})}z.children=n;z.styles=s;z.getBoolAttrs=function(){return j};z.getBlockElements=function(){return m};z.getShortEndedElements=function(){return f};z.getSelfClosingElements=function(){return d};z.getNonEmptyElements=function(){return e};z.getWhiteSpaceElements=function(){return o};z.isValidChild=function(C,D){var B=n[C];return !!(B&&B[D])};z.getElementRule=x;z.getCustomElements=function(){return a};z.addValidElements=q;z.setValidElements=u;z.addCustomElements=p;z.addValidChildren=t};l.html.Schema.boolAttrMap=j;l.html.Schema.blockElementsMap=m})(tinymce);(function(a){a.html.SaxParser=function(d,b){var c=this,e=function(){};d=d||{};c.schema=b=b||new a.html.Schema();if(d.fix_self_closing!==false){d.fix_self_closing=true}a.each("comment cdata text start end pi doctype".split(" "),function(f){if(f){c[f]=d[f]||e}});c.parse=function(D){var n=this,f,F=0,G,B,y=[],J,N,C,r,z,q,K,o,j,E,l,h,s,g,m,M,u,Q,I,R,k,L,v,H,P,x=0,O=a.html.Entities.decode,A,p;function t(S){var U,T;U=y.length;while(U--){if(y[U].name===S){break}}if(U>=0){for(T=y.length-1;T>=U;T--){S=y[T];if(S.valid){n.end(S.name)}}y.length=U}}L=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/)>))","g");v=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g;H={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi};K=b.getShortEndedElements();k=b.getSelfClosingElements();o=b.getBoolAttrs();E=d.validate;q=d.remove_internals;A=d.fix_self_closing;p=a.isIE;m=/^:/;while(f=L.exec(D)){if(F<f.index){n.text(O(D.substr(F,f.index-F)))}if(G=f[6]){G=G.toLowerCase();if(p&&m.test(G)){G=G.substr(1)}t(G)}else{if(G=f[7]){G=G.toLowerCase();if(p&&m.test(G)){G=G.substr(1)}j=G in K;if(A&&k[G]&&y.length>0&&y[y.length-1].name===G){t(G)}if(!E||(l=b.getElementRule(G))){h=true;if(E){M=l.attributes;u=l.attributePatterns}if(g=f[8]){z=g.indexOf("data-mce-type")!==-1;if(z&&q){h=false}J=[];J.map={};g.replace(v,function(T,S,X,W,V){var Y,U;S=S.toLowerCase();X=S in o?S:O(X||W||V||"");if(E&&!z&&S.indexOf("data-")!==0){Y=M[S];if(!Y&&u){U=u.length;while(U--){Y=u[U];if(Y.pattern.test(S)){break}}if(U===-1){Y=null}}if(!Y){return}if(Y.validValues&&!(X in Y.validValues)){return}}J.map[S]=X;J.push({name:S,value:X})})}else{J=[];J.map={}}if(E&&!z){Q=l.attributesRequired;I=l.attributesDefault;R=l.attributesForced;if(R){N=R.length;while(N--){s=R[N];r=s.name;P=s.value;if(P==="{$uid}"){P="mce_"+x++}J.map[r]=P;J.push({name:r,value:P})}}if(I){N=I.length;while(N--){s=I[N];r=s.name;if(!(r in J.map)){P=s.value;if(P==="{$uid}"){P="mce_"+x++}J.map[r]=P;J.push({name:r,value:P})}}}if(Q){N=Q.length;while(N--){if(Q[N] in J.map){break}}if(N===-1){h=false}}if(J.map["data-mce-bogus"]){h=false}}if(h){n.start(G,J,j)}}else{h=false}if(B=H[G]){B.lastIndex=F=f.index+f[0].length;if(f=B.exec(D)){if(h){C=D.substr(F,f.index-F)}F=f.index+f[0].length}else{C=D.substr(F);F=D.length}if(h&&C.length>0){n.text(C,true)}if(h){n.end(G)}L.lastIndex=F;continue}if(!j){if(!g||g.indexOf("/")!=g.length-1){y.push({name:G,valid:h})}else{if(h){n.end(G)}}}}else{if(G=f[1]){n.comment(G)}else{if(G=f[2]){n.cdata(G)}else{if(G=f[3]){n.doctype(G)}else{if(G=f[4]){n.pi(G,f[5])}}}}}}F=f.index+f[0].length}if(F<D.length){n.text(O(D.substr(F)))}for(N=y.length-1;N>=0;N--){G=y[N];if(G.valid){n.end(G.name)}}}}})(tinymce);(function(b){var d=/^[ \t\r\n]*$/,e={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};function a(k,f,j){var i,h,l=j?"lastChild":"firstChild",g=j?"prev":"next";if(k[l]){return k[l]}if(k!==f){i=k[g];if(i){return i}for(h=k.parent;h&&h!==f;h=h.parent){i=h[g];if(i){return i}}}}function c(f,g){this.name=f;this.type=g;if(g===1){this.attributes=[];this.attributes.map={}}}b.extend(c.prototype,{replace:function(g){var f=this;if(g.parent){g.remove()}f.insert(g,f);f.remove();return f},attr:function(h,l){var f=this,g,j,k;if(typeof h!=="string"){for(j in h){f.attr(j,h[j])}return f}if(g=f.attributes){if(l!==k){if(l===null){if(h in g.map){delete g.map[h];j=g.length;while(j--){if(g[j].name===h){g=g.splice(j,1);return f}}}return f}if(h in g.map){j=g.length;while(j--){if(g[j].name===h){g[j].value=l;break}}}else{g.push({name:h,value:l})}g.map[h]=l;return f}else{return g.map[h]}}},clone:function(){var g=this,n=new c(g.name,g.type),h,f,k,j,m;if(k=g.attributes){m=[];m.map={};for(h=0,f=k.length;h<f;h++){j=k[h];if(j.name!=="id"){m[m.length]={name:j.name,value:j.value};m.map[j.name]=j.value}}n.attributes=m}n.value=g.value;n.shortEnded=g.shortEnded;return n},wrap:function(g){var f=this;f.parent.insert(g,f);g.append(f);return f},unwrap:function(){var f=this,h,g;for(h=f.firstChild;h;){g=h.next;f.insert(h,f,true);h=g}f.remove()},remove:function(){var g=this,f=g.parent,h=g.next,i=g.prev;if(f){if(f.firstChild===g){f.firstChild=h;if(h){h.prev=null}}else{i.next=h}if(f.lastChild===g){f.lastChild=i;if(i){i.next=null}}else{h.prev=i}g.parent=g.next=g.prev=null}return g},append:function(h){var f=this,g;if(h.parent){h.remove()}g=f.lastChild;if(g){g.next=h;h.prev=g;f.lastChild=h}else{f.lastChild=f.firstChild=h}h.parent=f;return h},insert:function(i,h,f){var g;if(i.parent){i.remove()}g=h.parent||this;if(f){if(h===g.firstChild){g.firstChild=i}else{h.prev.next=i}i.prev=h.prev;i.next=h;h.prev=i}else{if(h===g.lastChild){g.lastChild=i}else{h.next.prev=i}i.next=h.next;i.prev=h;h.next=i}i.parent=g;return i},getAll:function(g){var f=this,h,i=[];for(h=f.firstChild;h;h=a(h,f)){if(h.name===g){i.push(h)}}return i},empty:function(){var g=this,f,h,j;if(g.firstChild){f=[];for(j=g.firstChild;j;j=a(j,g)){f.push(j)}h=f.length;while(h--){j=f[h];j.parent=j.firstChild=j.lastChild=j.next=j.prev=null}}g.firstChild=g.lastChild=null;return g},isEmpty:function(f){var g=this,k=g.firstChild,j,h;if(k){do{if(k.type===1){if(k.attributes.map["data-mce-bogus"]){continue}if(f[k.name]){return false}j=k.attributes.length;while(j--){h=k.attributes[j].name;if(h==="name"||h.indexOf("data-")===0){return false}}}if((k.type===3&&!d.test(k.value))){return false}}while(k=a(k,g))}return true},walk:function(f){return a(this,null,f)}});b.extend(c,{create:function(g,f){var i,h;i=new c(g,e[g]||1);if(f){for(h in f){i.attr(h,f[h])}}return i}});b.html.Node=c})(tinymce);(function(a){var b=a.html.Node;a.html.DomParser=function(e,c){var d=this,h={},g=[],i={},f={};e=e||{};e.validate="validate" in e?e.validate:true;e.root_name=e.root_name||"body";d.schema=c=c||new a.html.Schema();function j(l){var n,o,y,z,v,m,s,u,r,t,k,q,x,p;q=a.makeMap("tr,td,th,tbody,thead,tfoot,table");k=c.getNonEmptyElements();for(n=0;n<l.length;n++){o=l[n];if(!o.parent){continue}z=[o];for(y=o.parent;y&&!c.isValidChild(y.name,o.name)&&!q[y.name];y=y.parent){z.push(y)}if(y&&z.length>1){z.reverse();v=m=d.filterNode(z[0].clone());for(r=0;r<z.length-1;r++){if(c.isValidChild(m.name,z[r].name)){s=d.filterNode(z[r].clone());m.append(s)}else{s=m}for(u=z[r].firstChild;u&&u!=z[r+1];){p=u.next;s.append(u);u=p}m=s}if(!v.isEmpty(k)){y.insert(v,z[0],true);y.insert(o,v)}else{y.insert(o,z[0],true)}y=z[0];if(y.isEmpty(k)||y.firstChild===y.lastChild&&y.firstChild.name==="br"){y.empty().remove()}}else{if(o.parent){if(o.name==="li"){x=o.prev;if(x&&(x.name==="ul"||x.name==="ul")){x.append(o);continue}x=o.next;if(x&&(x.name==="ul"||x.name==="ul")){x.insert(o,x.firstChild,true);continue}o.wrap(d.filterNode(new b("ul",1)));continue}if(c.isValidChild(o.parent.name,"div")&&c.isValidChild("div",o.name)){o.wrap(d.filterNode(new b("div",1)))}else{if(o.name==="style"||o.name==="script"){o.empty().remove()}else{o.unwrap()}}}}}}d.filterNode=function(m){var l,k,n;if(k in h){n=i[k];if(n){n.push(m)}else{i[k]=[m]}}l=g.length;while(l--){k=g[l].name;if(k in m.attributes.map){n=f[k];if(n){n.push(m)}else{f[k]=[m]}}}return m};d.addNodeFilter=function(k,l){a.each(a.explode(k),function(m){var n=h[m];if(!n){h[m]=n=[]}n.push(l)})};d.addAttributeFilter=function(k,l){a.each(a.explode(k),function(m){var n;for(n=0;n<g.length;n++){if(g[n].name===m){g[n].callbacks.push(l);return}}g.push({name:m,callbacks:[l]})})};d.parse=function(u,n){var r,z,B,y,D,C,x,s,F,J,H,p,E,K=[],m,v,k,o,t,q;n=n||{};i={};f={};p=a.extend(a.makeMap("script,style,head,html,body,title,meta,param"),c.getBlockElements());t=c.getNonEmptyElements();o=c.children;H=e.validate;q="forced_root_block" in n?n.forced_root_block:e.forced_root_block;k=c.getWhiteSpaceElements();E=/^[ \t\r\n]+/;m=/[ \t\r\n]+$/;v=/[ \t\r\n]+/g;function A(){var L=z.firstChild,l,M;while(L){l=L.next;if(L.type==3||(L.type==1&&L.name!=="p"&&!p[L.name]&&!L.attr("data-mce-type"))){if(!M){M=I(q,1);z.insert(M,L);M.append(L)}else{M.append(L)}}else{M=null}L=l}}function I(l,L){var M=new b(l,L),N;if(l in h){N=i[l];if(N){N.push(M)}else{i[l]=[M]}}return M}function G(M){var N,L,l;for(N=M.prev;N&&N.type===3;){L=N.value.replace(m,"");if(L.length>0){N.value=L;N=N.prev}else{l=N.prev;N.remove();N=l}}}r=new a.html.SaxParser({validate:H,fix_self_closing:!H,cdata:function(l){B.append(I("#cdata",4)).value=l},text:function(M,l){var L;if(!k[B.name]){M=M.replace(v," ");if(B.lastChild&&p[B.lastChild.name]){M=M.replace(E,"")}}if(M.length!==0){L=I("#text",3);L.raw=!!l;B.append(L).value=M}},comment:function(l){B.append(I("#comment",8)).value=l},pi:function(l,L){B.append(I(l,7)).value=L;G(B)},doctype:function(L){var l;l=B.append(I("#doctype",10));l.value=L;G(B)},start:function(l,S,N){var Q,L,O,M,P,U,R,T;O=H?c.getElementRule(l):{};if(O){Q=I(O.outputName||l,1);Q.attributes=S;Q.shortEnded=N;B.append(Q);T=o[B.name];if(T&&o[Q.name]&&!T[Q.name]){K.push(Q)}L=g.length;while(L--){P=g[L].name;if(P in S.map){F=f[P];if(F){F.push(Q)}else{f[P]=[Q]}}}if(p[l]){G(Q)}if(!N){B=Q}}},end:function(L){var P,N,O,M,l;N=H?c.getElementRule(L):{};if(N){if(p[L]){if(!k[B.name]){for(P=B.firstChild;P&&P.type===3;){O=P.value.replace(E,"");if(O.length>0){P.value=O;P=P.next}else{M=P.next;P.remove();P=M}}for(P=B.lastChild;P&&P.type===3;){O=P.value.replace(m,"");if(O.length>0){P.value=O;P=P.prev}else{M=P.prev;P.remove();P=M}}}P=B.prev;if(P&&P.type===3){O=P.value.replace(E,"");if(O.length>0){P.value=O}else{P.remove()}}}if(N.removeEmpty||N.paddEmpty){if(B.isEmpty(t)){if(N.paddEmpty){B.empty().append(new b("#text","3")).value="\u00a0"}else{if(!B.attributes.map.name){l=B.parent;B.empty().remove();B=l;return}}}}B=B.parent}}},c);z=B=new b(n.context||e.root_name,11);r.parse(u);if(H&&K.length){if(!n.context){j(K)}else{n.invalid=true}}if(q&&z.name=="body"){A()}if(!n.invalid){for(J in i){F=h[J];y=i[J];x=y.length;while(x--){if(!y[x].parent){y.splice(x,1)}}for(D=0,C=F.length;D<C;D++){F[D](y,J,n)}}for(D=0,C=g.length;D<C;D++){F=g[D];if(F.name in f){y=f[F.name];x=y.length;while(x--){if(!y[x].parent){y.splice(x,1)}}for(x=0,s=F.callbacks.length;x<s;x++){F.callbacks[x](y,F.name,n)}}}}return z};if(e.remove_trailing_brs){d.addNodeFilter("br",function(m,n){var r,q=m.length,o,t=c.getBlockElements(),k=c.getNonEmptyElements(),u,p,s;t.body=1;for(r=0;r<q;r++){o=m[r];u=o.parent;if(t[o.parent.name]&&o===u.lastChild){p=o.prev;while(p){s=p.name;if(s!=="span"||p.attr("data-mce-type")!=="bookmark"){if(s!=="br"){break}if(s==="br"){o=null;break}}p=p.prev}if(o){o.remove();if(u.isEmpty(k)){elementRule=c.getElementRule(u.name);if(elementRule){if(elementRule.removeEmpty){u.remove()}else{if(elementRule.paddEmpty){u.empty().append(new a.html.Node("#text",3)).value="\u00a0"}}}}}}}})}}})(tinymce);tinymce.html.Writer=function(f){var d=[],g,c,e,b,a;f=f||{};g=f.indent;c=tinymce.makeMap(f.indent_before||"");e=tinymce.makeMap(f.indent_after||"");b=tinymce.html.Entities.getEncodeFunc(f.entity_encoding||"raw",f.entities);a=f.element_format=="html";return{start:function(m,k,p){var n,j,h,o;if(g&&c[m]&&d.length>0){o=d[d.length-1];if(o.length>0&&o!=="\n"){d.push("\n")}}d.push("<",m);if(k){for(n=0,j=k.length;n<j;n++){h=k[n];d.push(" ",h.name,'="',b(h.value,true),'"')}}if(!p||a){d[d.length]=">"}else{d[d.length]=" />"}if(p&&g&&e[m]&&d.length>0){o=d[d.length-1];if(o.length>0&&o!=="\n"){d.push("\n")}}},end:function(h){var i;d.push("</",h,">");if(g&&e[h]&&d.length>0){i=d[d.length-1];if(i.length>0&&i!=="\n"){d.push("\n")}}},text:function(i,h){if(i.length>0){d[d.length]=h?i:b(i)}},cdata:function(h){d.push("<![CDATA[",h,"]]>")},comment:function(h){d.push("<!--",h,"-->")},pi:function(h,i){if(i){d.push("<?",h," ",i,"?>")}else{d.push("<?",h,"?>")}if(g){d.push("\n")}},doctype:function(h){d.push("<!DOCTYPE",h,">",g?"\n":"")},reset:function(){d.length=0},getContent:function(){return d.join("").replace(/\n$/,"")}}};(function(a){a.html.Serializer=function(e,c){var d=this,b=new a.html.Writer(e);e=e||{};e.validate="validate" in e?e.validate:true;d.schema=c=c||new a.html.Schema();d.writer=b;d.serialize=function(h){var g,i;i=e.validate;g={3:function(k,j){b.text(k.value,k.raw)},8:function(j){b.comment(j.value)},7:function(j){b.pi(j.name,j.value)},10:function(j){b.doctype(j.value)},4:function(j){b.cdata(j.value)},11:function(j){if((j=j.firstChild)){do{f(j)}while(j=j.next)}}};b.reset();function f(m){var t=g[m.type],j,p,s,r,k,u,o,n,q;if(!t){j=m.name;p=m.shortEnded;s=m.attributes;if(i&&s&&s.length>1){u=[];u.map={};q=c.getElementRule(m.name);for(o=0,n=q.attributesOrder.length;o<n;o++){r=q.attributesOrder[o];if(r in s.map){k=s.map[r];u.map[r]=k;u.push({name:r,value:k})}}for(o=0,n=s.length;o<n;o++){r=s[o].name;if(!(r in u.map)){k=s.map[r];u.map[r]=k;u.push({name:r,value:k})}}s=u}b.start(m.name,s,p);if(!p){if((m=m.firstChild)){do{f(m)}while(m=m.next)}b.end(j)}}else{t(m)}}if(h.type==1&&!e.inner){f(h)}else{g[11](h)}return b.getContent()}}})(tinymce);(function(g){var f=g.each,d=g.is,b=g.isWebKit,a=g.isIE,c=g.html.Entities,e=/^([a-z0-9],?)+$/i,h=g.html.Schema.blockElementsMap,i=/^[ \t\r\n]*$/;g.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(o,m){var k=this,l,j;k.doc=o;k.win=window;k.files={};k.cssFlicker=false;k.counter=0;k.stdMode=!g.isIE||o.documentMode>=8;k.boxModel=!g.isIE||o.compatMode=="CSS1Compat"||k.stdMode;k.hasOuterHTML="outerHTML" in o.createElement("a");k.settings=m=g.extend({keep_values:false,hex_colors:1},m);k.schema=m.schema;k.styles=new g.html.Styles({url_converter:m.url_converter,url_converter_scope:m.url_converter_scope},m.schema);if(g.isIE6){try{o.execCommand("BackgroundImageCache",false,true)}catch(n){k.cssFlicker=true}}if(a&&m.schema){("abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video").replace(/\w+/g,function(p){o.createElement(p)});for(j in m.schema.getCustomElements()){o.createElement(j)}}g.addUnload(k.destroy,k)},getRoot:function(){var j=this,k=j.settings;return(k&&j.get(k.root_element))||j.doc.body},getViewPort:function(k){var l,j;k=!k?this.win:k;l=k.document;j=this.boxModel?l.documentElement:l.body;return{x:k.pageXOffset||j.scrollLeft,y:k.pageYOffset||j.scrollTop,w:k.innerWidth||j.clientWidth,h:k.innerHeight||j.clientHeight}},getRect:function(m){var l,j=this,k;m=j.get(m);l=j.getPos(m);k=j.getSize(m);return{x:l.x,y:l.y,w:k.w,h:k.h}},getSize:function(m){var k=this,j,l;m=k.get(m);j=k.getStyle(m,"width");l=k.getStyle(m,"height");if(j.indexOf("px")===-1){j=0}if(l.indexOf("px")===-1){l=0}return{w:parseInt(j)||m.offsetWidth||m.clientWidth,h:parseInt(l)||m.offsetHeight||m.clientHeight}},getParent:function(l,k,j){return this.getParents(l,k,j,false)},getParents:function(u,p,l,s){var k=this,j,m=k.settings,q=[];u=k.get(u);s=s===undefined;if(m.strict_root){l=l||k.getRoot()}if(d(p,"string")){j=p;if(p==="*"){p=function(o){return o.nodeType==1}}else{p=function(o){return k.is(o,j)}}}while(u){if(u==l||!u.nodeType||u.nodeType===9){break}if(!p||p(u)){if(s){q.push(u)}else{return u}}u=u.parentNode}return s?q:null},get:function(j){var k;if(j&&this.doc&&typeof(j)=="string"){k=j;j=this.doc.getElementById(j);if(j&&j.id!==k){return this.doc.getElementsByName(k)[1]}}return j},getNext:function(k,j){return this._findSib(k,j,"nextSibling")},getPrev:function(k,j){return this._findSib(k,j,"previousSibling")},add:function(m,q,j,l,o){var k=this;return this.run(m,function(s){var r,n;r=d(q,"string")?k.doc.createElement(q):q;k.setAttribs(r,j);if(l){if(l.nodeType){r.appendChild(l)}else{k.setHTML(r,l)}}return !o?s.appendChild(r):r})},create:function(l,j,k){return this.add(this.doc.createElement(l),l,j,k,1)},createHTML:function(r,j,p){var q="",m=this,l;q+="<"+r;for(l in j){if(j.hasOwnProperty(l)){q+=" "+l+'="'+m.encode(j[l])+'"'}}if(typeof(p)!="undefined"){return q+">"+p+"</"+r+">"}return q+" />"},remove:function(k,j){return this.run(k,function(m){var n,l=m.parentNode;if(!l){return null}if(j){while(n=m.firstChild){if(!g.isIE||n.nodeType!==3||n.nodeValue){l.insertBefore(n,m)}else{m.removeChild(n)}}}return l.removeChild(m)})},setStyle:function(m,j,k){var l=this;return l.run(m,function(p){var o,n;o=p.style;j=j.replace(/-(\D)/g,function(r,q){return q.toUpperCase()});if(l.pixelStyles.test(j)&&(g.is(k,"number")||/^[\-0-9\.]+$/.test(k))){k+="px"}switch(j){case"opacity":if(a){o.filter=k===""?"":"alpha(opacity="+(k*100)+")";if(!m.currentStyle||!m.currentStyle.hasLayout){o.display="inline-block"}}o[j]=o["-moz-opacity"]=o["-khtml-opacity"]=k||"";break;case"float":a?o.styleFloat=k:o.cssFloat=k;break;default:o[j]=k||""}if(l.settings.update_styles){l.setAttrib(p,"data-mce-style")}})},getStyle:function(m,j,l){m=this.get(m);if(!m){return}if(this.doc.defaultView&&l){j=j.replace(/[A-Z]/g,function(n){return"-"+n});try{return this.doc.defaultView.getComputedStyle(m,null).getPropertyValue(j)}catch(k){return null}}j=j.replace(/-(\D)/g,function(o,n){return n.toUpperCase()});if(j=="float"){j=a?"styleFloat":"cssFloat"}if(m.currentStyle&&l){return m.currentStyle[j]}return m.style?m.style[j]:undefined},setStyles:function(m,n){var k=this,l=k.settings,j;j=l.update_styles;l.update_styles=0;f(n,function(o,p){k.setStyle(m,p,o)});l.update_styles=j;if(l.update_styles){k.setAttrib(m,l.cssText)}},removeAllAttribs:function(j){return this.run(j,function(m){var l,k=m.attributes;for(l=k.length-1;l>=0;l--){m.removeAttributeNode(k.item(l))}})},setAttrib:function(l,m,j){var k=this;if(!l||!m){return}if(k.settings.strict){m=m.toLowerCase()}return this.run(l,function(o){var n=k.settings;if(j!==null){switch(m){case"style":if(!d(j,"string")){f(j,function(p,q){k.setStyle(o,q,p)});return}if(n.keep_values){if(j&&!k._isRes(j)){o.setAttribute("data-mce-style",j,2)}else{o.removeAttribute("data-mce-style",2)}}o.style.cssText=j;break;case"class":o.className=j||"";break;case"src":case"href":if(n.keep_values){if(n.url_converter){j=n.url_converter.call(n.url_converter_scope||k,j,m,o)}k.setAttrib(o,"data-mce-"+m,j,2)}break;case"shape":o.setAttribute("data-mce-style",j);break}}if(d(j)&&j!==null&&j.length!==0){o.setAttribute(m,""+j,2)}else{o.removeAttribute(m,2)}})},setAttribs:function(k,l){var j=this;return this.run(k,function(m){f(l,function(o,p){j.setAttrib(m,p,o)})})},getAttrib:function(o,p,l){var j,k=this,m;o=k.get(o);if(!o||o.nodeType!==1){return l===m?false:l}if(!d(l)){l=""}if(/^(src|href|style|coords|shape)$/.test(p)){j=o.getAttribute("data-mce-"+p);if(j){return j}}if(a&&k.props[p]){j=o[k.props[p]];j=j&&j.nodeValue?j.nodeValue:j}if(!j){j=o.getAttribute(p,2)}if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(p)){if(o[k.props[p]]===true&&j===""){return p}return j?p:""}if(o.nodeName==="FORM"&&o.getAttributeNode(p)){return o.getAttributeNode(p).nodeValue}if(p==="style"){j=j||o.style.cssText;if(j){j=k.serializeStyle(k.parseStyle(j),o.nodeName);if(k.settings.keep_values&&!k._isRes(j)){o.setAttribute("data-mce-style",j)}}}if(b&&p==="class"&&j){j=j.replace(/(apple|webkit)\-[a-z\-]+/gi,"")}if(a){switch(p){case"rowspan":case"colspan":if(j===1){j=""}break;case"size":if(j==="+0"||j===20||j===0){j=""}break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":if(j===0){j=""}break;case"hspace":if(j===-1){j=""}break;case"maxlength":case"tabindex":if(j===32768||j===2147483647||j==="32768"){j=""}break;case"multiple":case"compact":case"noshade":case"nowrap":if(j===65535){return p}return l;case"shape":j=j.toLowerCase();break;default:if(p.indexOf("on")===0&&j){j=g._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+j)}}}return(j!==m&&j!==null&&j!=="")?""+j:l},getPos:function(s,m){var k=this,j=0,q=0,o,p=k.doc,l;s=k.get(s);m=m||p.body;if(s){if(s.getBoundingClientRect){s=s.getBoundingClientRect();o=k.boxModel?p.documentElement:p.body;j=s.left+(p.documentElement.scrollLeft||p.body.scrollLeft)-o.clientTop;q=s.top+(p.documentElement.scrollTop||p.body.scrollTop)-o.clientLeft;return{x:j,y:q}}l=s;while(l&&l!=m&&l.nodeType){j+=l.offsetLeft||0;q+=l.offsetTop||0;l=l.offsetParent}l=s.parentNode;while(l&&l!=m&&l.nodeType){j-=l.scrollLeft||0;q-=l.scrollTop||0;l=l.parentNode}}return{x:j,y:q}},parseStyle:function(j){return this.styles.parse(j)},serializeStyle:function(k,j){return this.styles.serialize(k,j)},loadCSS:function(j){var l=this,m=l.doc,k;if(!j){j=""}k=l.select("head")[0];f(j.split(","),function(n){var o;if(l.files[n]){return}l.files[n]=true;o=l.create("link",{rel:"stylesheet",href:g._addVer(n)});if(a&&m.documentMode&&m.recalc){o.onload=function(){if(m.recalc){m.recalc()}o.onload=null}}k.appendChild(o)})},addClass:function(j,k){return this.run(j,function(l){var m;if(!k){return 0}if(this.hasClass(l,k)){return l.className}m=this.removeClass(l,k);return l.className=(m!=""?(m+" "):"")+k})},removeClass:function(l,m){var j=this,k;return j.run(l,function(o){var n;if(j.hasClass(o,m)){if(!k){k=new RegExp("(^|\\s+)"+m+"(\\s+|$)","g")}n=o.className.replace(k," ");n=g.trim(n!=" "?n:"");o.className=n;if(!n){o.removeAttribute("class");o.removeAttribute("className")}return n}return o.className})},hasClass:function(k,j){k=this.get(k);if(!k||!j){return false}return(" "+k.className+" ").indexOf(" "+j+" ")!==-1},show:function(j){return this.setStyle(j,"display","block")},hide:function(j){return this.setStyle(j,"display","none")},isHidden:function(j){j=this.get(j);return !j||j.style.display=="none"||this.getStyle(j,"display")=="none"},uniqueId:function(j){return(!j?"mce_":j)+(this.counter++)},setHTML:function(k,l){var j=this;return j.run(k,function(m){if(a){while(m.firstChild){m.removeChild(m.firstChild)}try{m.innerHTML="<br />"+l;m.removeChild(m.firstChild)}catch(n){m=j.create("div");m.innerHTML="<br />"+l;f(m.childNodes,function(p,o){if(o){m.appendChild(p)}})}}else{m.innerHTML=l}return l})},getOuterHTML:function(l){var k,j=this;l=j.get(l);if(!l){return null}if(l.nodeType===1&&j.hasOuterHTML){return l.outerHTML}k=(l.ownerDocument||j.doc).createElement("body");k.appendChild(l.cloneNode(true));return k.innerHTML},setOuterHTML:function(m,k,n){var j=this;function l(p,o,r){var s,q;q=r.createElement("body");q.innerHTML=o;s=q.lastChild;while(s){j.insertAfter(s.cloneNode(true),p);s=s.previousSibling}j.remove(p)}return this.run(m,function(p){p=j.get(p);if(p.nodeType==1){n=n||p.ownerDocument||j.doc;if(a){try{if(a&&p.nodeType==1){p.outerHTML=k}else{l(p,k,n)}}catch(o){l(p,k,n)}}else{l(p,k,n)}}})},decode:c.decode,encode:c.encodeAllRaw,insertAfter:function(j,k){k=this.get(k);return this.run(j,function(n){var m,l;m=k.parentNode;l=k.nextSibling;if(l){m.insertBefore(n,l)}else{m.appendChild(n)}return n})},isBlock:function(k){var j=k.nodeType;if(j){return !!(j===1&&h[k.nodeName])}return !!h[k]},replace:function(p,m,j){var l=this;if(d(m,"array")){p=p.cloneNode(true)}return l.run(m,function(k){if(j){f(g.grep(k.childNodes),function(n){p.appendChild(n)})}return k.parentNode.replaceChild(p,k)})},rename:function(m,k){var l=this,j;if(m.nodeName!=k.toUpperCase()){j=l.create(k);f(l.getAttribs(m),function(n){l.setAttrib(j,n.nodeName,l.getAttrib(m,n.nodeName))});l.replace(j,m,1)}return j||m},findCommonAncestor:function(l,j){var m=l,k;while(m){k=j;while(k&&m!=k){k=k.parentNode}if(m==k){break}m=m.parentNode}if(!m&&l.ownerDocument){return l.ownerDocument.documentElement}return m},toHex:function(j){var l=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(j);function k(m){m=parseInt(m).toString(16);return m.length>1?m:"0"+m}if(l){j="#"+k(l[1])+k(l[2])+k(l[3]);return j}return j},getClasses:function(){var n=this,j=[],m,o={},p=n.settings.class_filter,l;if(n.classes){return n.classes}function q(r){f(r.imports,function(s){q(s)});f(r.cssRules||r.rules,function(s){switch(s.type||1){case 1:if(s.selectorText){f(s.selectorText.split(","),function(t){t=t.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(t)||!/\.[\w\-]+$/.test(t)){return}l=t;t=g._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",t);if(p&&!(t=p(t,l))){return}if(!o[t]){j.push({"class":t});o[t]=1}})}break;case 3:q(s.styleSheet);break}})}try{f(n.doc.styleSheets,q)}catch(k){}if(j.length>0){n.classes=j}return j},run:function(m,l,k){var j=this,n;if(j.doc&&typeof(m)==="string"){m=j.get(m)}if(!m){return false}k=k||this;if(!m.nodeType&&(m.length||m.length===0)){n=[];f(m,function(p,o){if(p){if(typeof(p)=="string"){p=j.doc.getElementById(p)}n.push(l.call(k,p,o))}});return n}return l.call(k,m)},getAttribs:function(k){var j;k=this.get(k);if(!k){return[]}if(a){j=[];if(k.nodeName=="OBJECT"){return k.attributes}if(k.nodeName==="OPTION"&&this.getAttrib(k,"selected")){j.push({specified:1,nodeName:"selected"})}k.cloneNode(false).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(l){j.push({specified:1,nodeName:l})});return j}return k.attributes},isEmpty:function(l,o){var r=this,n,m,p,q,j,k;l=l.firstChild;if(l){q=new g.dom.TreeWalker(l);o=o||r.schema?r.schema.getNonEmptyElements():null;do{p=l.nodeType;if(p===1){if(l.getAttribute("data-mce-bogus")){continue}j=l.nodeName.toLowerCase();if(o&&o[j]){k=l.parentNode;if(j==="br"&&r.isBlock(k)&&k.firstChild===l&&k.lastChild===l){continue}return false}m=r.getAttribs(l);n=l.attributes.length;while(n--){j=l.attributes[n].nodeName;if(j==="name"||j==="data-mce-bookmark"){return false}}}if((p===3&&!i.test(l.nodeValue))){return false}}while(l=q.next())}return true},destroy:function(k){var j=this;if(j.events){j.events.destroy()}j.win=j.doc=j.root=j.events=null;if(!k){g.removeUnload(j.destroy)}},createRng:function(){var j=this.doc;return j.createRange?j.createRange():new g.dom.Range(this)},nodeIndex:function(n,o){var j=0,m,l,k;if(n){for(m=n.nodeType,n=n.previousSibling,l=n;n;n=n.previousSibling){k=n.nodeType;if(o&&k==3){if(k==m||!n.nodeValue.length){continue}}j++;m=k}}return j},split:function(n,m,s){var q=this,j=q.createRng(),o,l,p;function k(v){var t,r=v.childNodes,u=v.nodeType;if(u==1&&v.getAttribute("data-mce-type")=="bookmark"){return}for(t=r.length-1;t>=0;t--){k(r[t])}if(u!=9){if(u==3&&v.nodeValue.length>0){if(!q.isBlock(v.parentNode)||g.trim(v.nodeValue).length>0){return}}else{if(u==1){r=v.childNodes;if(r.length==1&&r[0]&&r[0].nodeType==1&&r[0].getAttribute("data-mce-type")=="bookmark"){v.parentNode.insertBefore(r[0],v)}if(r.length||/(br|hr|input|img)/i.test(v.nodeName)){return}}}q.remove(v)}return v}if(n&&m){j.setStart(n.parentNode,q.nodeIndex(n));j.setEnd(m.parentNode,q.nodeIndex(m));o=j.extractContents();j=q.createRng();j.setStart(m.parentNode,q.nodeIndex(m)+1);j.setEnd(n.parentNode,q.nodeIndex(n)+1);l=j.extractContents();p=n.parentNode;p.insertBefore(k(o),n);if(s){p.replaceChild(s,m)}else{p.insertBefore(m,n)}p.insertBefore(k(l),n);q.remove(n);return s||m}},bind:function(n,j,m,l){var k=this;if(!k.events){k.events=new g.dom.EventUtils()}return k.events.add(n,j,m,l||this)},unbind:function(m,j,l){var k=this;if(!k.events){k.events=new g.dom.EventUtils()}return k.events.remove(m,j,l)},_findSib:function(m,j,k){var l=this,n=j;if(m){if(d(n,"string")){n=function(o){return l.is(o,j)}}for(m=m[k];m;m=m[k]){if(n(m)){return m}}}return null},_isRes:function(j){return/^(top|left|bottom|right|width|height)/i.test(j)||/;\s*(top|left|bottom|right|width|height)/i.test(j)}});g.DOM=new g.dom.DOMUtils(document,{process_html:0})})(tinymce);(function(a){function b(c){var P=this,g=c.doc,T=0,F=1,k=2,D=true,R=false,U="startOffset",i="startContainer",Q="endContainer",C="endOffset",N=tinymce.extend,n=c.nodeIndex;N(P,{startContainer:g,startOffset:0,endContainer:g,endOffset:0,collapsed:D,commonAncestorContainer:g,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:p,setEnd:H,setStartBefore:O,setStartAfter:s,setEndBefore:r,setEndAfter:I,collapse:B,selectNode:E,selectNodeContents:x,compareBoundaryPoints:G,deleteContents:o,extractContents:v,cloneContents:e,insertNode:A,surroundContents:L,cloneRange:J});function p(V,t){z(D,V,t)}function H(V,t){z(R,V,t)}function O(t){p(t.parentNode,n(t))}function s(t){p(t.parentNode,n(t)+1)}function r(t){H(t.parentNode,n(t))}function I(t){H(t.parentNode,n(t)+1)}function B(t){if(t){P[Q]=P[i];P[C]=P[U]}else{P[i]=P[Q];P[U]=P[C]}P.collapsed=D}function E(t){O(t);I(t)}function x(t){p(t,0);H(t,t.nodeType===1?t.childNodes.length:t.nodeValue.length)}function G(Z,V){var ab=P[i],W=P[U],aa=P[Q],t=P[C],Y=V.startContainer,ad=V.startOffset,X=V.endContainer,ac=V.endOffset;if(Z===0){return u(ab,W,Y,ad)}if(Z===1){return u(aa,t,Y,ad)}if(Z===2){return u(aa,t,X,ac)}if(Z===3){return u(ab,W,X,ac)}}function o(){l(k)}function v(){return l(T)}function e(){return l(F)}function A(Y){var t=this[i],V=this[U],X,W;if((t.nodeType===3||t.nodeType===4)&&t.nodeValue){if(!V){t.parentNode.insertBefore(Y,t)}else{if(V>=t.nodeValue.length){c.insertAfter(Y,t)}else{X=t.splitText(V);t.parentNode.insertBefore(Y,X)}}}else{if(t.childNodes.length>0){W=t.childNodes[V]}if(W){t.insertBefore(Y,W)}else{t.appendChild(Y)}}}function L(V){var t=P.extractContents();P.insertNode(V);V.appendChild(t);P.selectNode(V)}function J(){return N(new b(c),{startContainer:P[i],startOffset:P[U],endContainer:P[Q],endOffset:P[C],collapsed:P.collapsed,commonAncestorContainer:P.commonAncestorContainer})}function f(t,V){var W;if(t.nodeType==3){return t}if(V<0){return t}W=t.firstChild;while(W&&V>0){--V;W=W.nextSibling}if(W){return W}return t}function M(){return(P[i]==P[Q]&&P[U]==P[C])}function u(Z,V,X,W){var ab,Y,t,aa,ac,ad;if(Z==X){if(V==W){return 0}if(V<W){return -1}return 1}ab=X;while(ab&&ab.parentNode!=Z){ab=ab.parentNode}if(ab){Y=0;t=Z.firstChild;while(t!=ab&&Y<V){Y++;t=t.nextSibling}if(V<=Y){return -1}return 1}ab=Z;while(ab&&ab.parentNode!=X){ab=ab.parentNode}if(ab){Y=0;t=X.firstChild;while(t!=ab&&Y<W){Y++;t=t.nextSibling}if(Y<W){return -1}return 1}aa=c.findCommonAncestor(Z,X);ac=Z;while(ac&&ac.parentNode!=aa){ac=ac.parentNode}if(!ac){ac=aa}ad=X;while(ad&&ad.parentNode!=aa){ad=ad.parentNode}if(!ad){ad=aa}if(ac==ad){return 0}t=aa.firstChild;while(t){if(t==ac){return -1}if(t==ad){return 1}t=t.nextSibling}}function z(V,Y,X){var t,W;if(V){P[i]=Y;P[U]=X}else{P[Q]=Y;P[C]=X}t=P[Q];while(t.parentNode){t=t.parentNode}W=P[i];while(W.parentNode){W=W.parentNode}if(W==t){if(u(P[i],P[U],P[Q],P[C])>0){P.collapse(V)}}else{P.collapse(V)}P.collapsed=M();P.commonAncestorContainer=c.findCommonAncestor(P[i],P[Q])}function l(ab){var aa,Y=0,ad=0,V,W,Z,X,t,ac;if(P[i]==P[Q]){return h(ab)}for(aa=P[Q],V=aa.parentNode;V;aa=V,V=V.parentNode){if(V==P[i]){return q(aa,ab)}++Y}for(aa=P[i],V=aa.parentNode;V;aa=V,V=V.parentNode){if(V==P[Q]){return S(aa,ab)}++ad}W=ad-Y;Z=P[i];while(W>0){Z=Z.parentNode;W--}X=P[Q];while(W<0){X=X.parentNode;W++}for(t=Z.parentNode,ac=X.parentNode;t!=ac;t=t.parentNode,ac=ac.parentNode){Z=t;X=ac}return K(Z,X,ab)}function h(Z){var ab,Y,X,aa,t,W,V;if(Z!=k){ab=g.createDocumentFragment()}if(P[U]==P[C]){return ab}if(P[i].nodeType==3){Y=P[i].nodeValue;X=Y.substring(P[U],P[C]);if(Z!=F){P[i].deleteData(P[U],P[C]-P[U]);P.collapse(D)}if(Z==k){return}ab.appendChild(g.createTextNode(X));return ab}aa=f(P[i],P[U]);t=P[C]-P[U];while(t>0){W=aa.nextSibling;V=y(aa,Z);if(ab){ab.appendChild(V)}--t;aa=W}if(Z!=F){P.collapse(D)}return ab}function q(ab,Y){var aa,Z,t,V,X,W;if(Y!=k){aa=g.createDocumentFragment()}Z=j(ab,Y);if(aa){aa.appendChild(Z)}t=n(ab);V=t-P[U];if(V<=0){if(Y!=F){P.setEndBefore(ab);P.collapse(R)}return aa}Z=ab.previousSibling;while(V>0){X=Z.previousSibling;W=y(Z,Y);if(aa){aa.insertBefore(W,aa.firstChild)}--V;Z=X}if(Y!=F){P.setEndBefore(ab);P.collapse(R)}return aa}function S(Z,Y){var ab,V,aa,t,X,W;if(Y!=k){ab=g.createDocumentFragment()}aa=d(Z,Y);if(ab){ab.appendChild(aa)}V=n(Z);++V;t=P[C]-V;aa=Z.nextSibling;while(t>0){X=aa.nextSibling;W=y(aa,Y);if(ab){ab.appendChild(W)}--t;aa=X}if(Y!=F){P.setStartAfter(Z);P.collapse(D)}return ab}function K(Y,V,ac){var X,ae,aa,t,ab,W,ad,Z;if(ac!=k){ae=g.createDocumentFragment()}X=d(Y,ac);if(ae){ae.appendChild(X)}aa=Y.parentNode;t=n(Y);ab=n(V);++t;W=ab-t;ad=Y.nextSibling;while(W>0){Z=ad.nextSibling;X=y(ad,ac);if(ae){ae.appendChild(X)}ad=Z;--W}X=j(V,ac);if(ae){ae.appendChild(X)}if(ac!=F){P.setStartAfter(Y);P.collapse(D)}return ae}function j(Z,aa){var W=f(P[Q],P[C]-1),ab,ac,Y,t,V,X=W!=P[Q];if(W==Z){return m(W,X,R,aa)}ab=W.parentNode;ac=m(ab,R,R,aa);while(ab){while(W){Y=W.previousSibling;t=m(W,X,R,aa);if(aa!=k){ac.insertBefore(t,ac.firstChild)}X=D;W=Y}if(ab==Z){return ac}W=ab.previousSibling;ab=ab.parentNode;V=m(ab,R,R,aa);if(aa!=k){V.appendChild(ac)}ac=V}}function d(Z,aa){var X=f(P[i],P[U]),Y=X!=P[i],ab,ac,V,t,W;if(X==Z){return m(X,Y,D,aa)}ab=X.parentNode;ac=m(ab,R,D,aa);while(ab){while(X){V=X.nextSibling;t=m(X,Y,D,aa);if(aa!=k){ac.appendChild(t)}Y=D;X=V}if(ab==Z){return ac}X=ab.nextSibling;ab=ab.parentNode;W=m(ab,R,D,aa);if(aa!=k){W.appendChild(ac)}ac=W}}function m(V,Y,ac,ab){var t,X,Z,W,aa;if(Y){return y(V,ab)}if(V.nodeType==3){t=V.nodeValue;if(ac){W=P[U];X=t.substring(W);Z=t.substring(0,W)}else{W=P[C];X=t.substring(0,W);Z=t.substring(W)}if(ab!=F){V.nodeValue=Z}if(ab==k){return}aa=V.cloneNode(R);aa.nodeValue=X;return aa}if(ab==k){return}return V.cloneNode(R)}function y(V,t){if(t!=k){return t==F?V.cloneNode(D):V}V.parentNode.removeChild(V)}}a.Range=b})(tinymce.dom);(function(){function a(d){var c=this,h=d.dom,e=true,f=false;function b(i,k){var j,s=0,q,o,l,m,n,r,p=-1,t;j=i.duplicate();j.collapse(k);t=j.parentElement();if(t.ownerDocument!==d.dom.doc){return}while(t.contentEditable==="false"){t=t.parentNode}if(!t.hasChildNodes()){return{node:t,inside:1}}l=t.children;q=l.length-1;while(s<=q){r=Math.floor((s+q)/2);m=l[r];j.moveToElementText(m);p=j.compareEndPoints(k?"StartToStart":"EndToEnd",i);if(p>0){q=r-1}else{if(p<0){s=r+1}else{return{node:m}}}}if(p<0){if(!m){j.moveToElementText(t);j.collapse(true);m=t;o=true}else{j.collapse(false)}j.setEndPoint(k?"EndToStart":"EndToEnd",i);if(j.compareEndPoints(k?"StartToStart":"StartToEnd",i)>0){j=i.duplicate();j.collapse(k);n=-1;while(t==j.parentElement()){if(j.move("character",-1)==0){break}n++}}n=n||j.text.replace("\r\n"," ").length}else{j.collapse(true);j.setEndPoint(k?"StartToStart":"StartToEnd",i);n=j.text.replace("\r\n"," ").length}return{node:m,position:p,offset:n,inside:o}}function g(){var i=d.getRng(),r=h.createRng(),k,l,q,p,m,j;k=i.item?i.item(0):i.parentElement();if(k.ownerDocument!=h.doc){return r}l=d.isCollapsed();if(i.item){r.setStart(k.parentNode,h.nodeIndex(k));r.setEnd(r.startContainer,r.startOffset+1);return r}function o(A){var t=b(i,A),x,y,z=0,v,u,s;x=t.node;y=t.offset;if(t.inside&&!x.hasChildNodes()){r[A?"setStart":"setEnd"](x,0);return}if(y===u){r[A?"setStartBefore":"setEndAfter"](x);return}if(t.position<0){v=t.inside?x.firstChild:x.nextSibling;if(!v){r[A?"setStartAfter":"setEndAfter"](x);return}if(!y){if(v.nodeType==3){r[A?"setStart":"setEnd"](v,0)}else{r[A?"setStartBefore":"setEndBefore"](v)}return}while(v){s=v.nodeValue;z+=s.length;if(z>=y){x=v;z-=y;z=s.length-z;break}v=v.nextSibling}}else{v=x.previousSibling;if(!v){return r[A?"setStartBefore":"setEndBefore"](x)}if(!y){if(x.nodeType==3){r[A?"setStart":"setEnd"](v,x.nodeValue.length)}else{r[A?"setStartAfter":"setEndAfter"](v)}return}while(v){z+=v.nodeValue.length;if(z>=y){x=v;z-=y;break}v=v.previousSibling}}r[A?"setStart":"setEnd"](x,z)}try{o(true);if(!l){o()}}catch(n){if(n.number==-2147024809){m=c.getBookmark(2);q=i.duplicate();q.collapse(true);k=q.parentElement();if(!l){q=i.duplicate();q.collapse(false);p=q.parentElement();p.innerHTML=p.innerHTML}k.innerHTML=k.innerHTML;c.moveToBookmark(m);i=d.getRng();o(true);if(!l){o()}}else{throw n}}return r}this.getBookmark=function(n){var k=d.getRng(),o,j,m={};function i(u){var u,q,p,t,s,r=[];q=u.parentNode;p=h.getRoot().parentNode;while(q!=p&&q.nodeType!==9){t=q.children;s=t.length;while(s--){if(u===t[s]){r.push(s);break}}u=q;q=q.parentNode}return r}function l(q){var p;p=b(k,q);if(p){return{position:p.position,offset:p.offset,indexes:i(p.node),inside:p.inside}}}if(n===2){if(!k.item){m.start=l(true);if(!d.isCollapsed()){m.end=l()}}else{m.start={ctrl:true,indexes:i(k.item(0))}}}return m};this.moveToBookmark=function(k){var j,i=h.doc.body;function m(o){var r,q,n,p;r=h.getRoot();for(q=o.length-1;q>=0;q--){p=r.children;n=o[q];if(n<=p.length-1){r=p[n]}}return r}function l(r){var n=k[r?"start":"end"],q,p,o;if(n){q=n.position>0;p=i.createTextRange();p.moveToElementText(m(n.indexes));offset=n.offset;if(offset!==o){p.collapse(n.inside||q);p.moveStart("character",q?-offset:offset)}else{p.collapse(r)}j.setEndPoint(r?"StartToStart":"EndToStart",p);if(r){j.collapse(true)}}}if(k.start){if(k.start.ctrl){j=i.createControlRange();j.addElement(m(k.start.indexes));j.select()}else{j=i.createTextRange();l(true);l();j.select()}}};this.addRange=function(i){var n,k,l,j,r,q,s=d.dom.doc,m=s.body;function p(z){var x,y,v,u,t;v=h.create("a");x=z?l:r;y=z?j:q;u=n.duplicate();if(x==s||x==s.documentElement){x=m;y=0}if(x.nodeType==3){x.parentNode.insertBefore(v,x);u.moveToElementText(v);u.moveStart("character",y);h.remove(v);n.setEndPoint(z?"StartToStart":"EndToEnd",u)}else{t=x.childNodes;if(t.length){if(y>=t.length){h.insertAfter(v,t[t.length-1])}else{x.insertBefore(v,t[y])}u.moveToElementText(v)}else{v=s.createTextNode("\uFEFF");x.appendChild(v);u.moveToElementText(v.parentNode);u.collapse(e)}n.setEndPoint(z?"StartToStart":"EndToEnd",u);h.remove(v)}}l=i.startContainer;j=i.startOffset;r=i.endContainer;q=i.endOffset;n=m.createTextRange();if(l==r&&l.nodeType==1&&j==q-1){if(j==q-1){try{k=m.createControlRange();k.addElement(l.childNodes[j]);k.select();return}catch(o){}}}p(true);p();n.select()};this.getRangeAt=g}tinymce.dom.TridentSelection=a})();(function(c){var f=c.each,e=c.DOM,d=c.isIE,a=c.isWebKit,b;c.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[];this.events=[]},add:function(m,p,l,j){var g,h=this,i=h.events,k;if(p instanceof Array){k=[];f(p,function(o){k.push(h.add(m,o,l,j))});return k}if(m&&m.hasOwnProperty&&m instanceof Array){k=[];f(m,function(n){n=e.get(n);k.push(h.add(n,p,l,j))});return k}m=e.get(m);if(!m){return}g=function(n){if(h.disabled){return}n=n||window.event;if(n&&d){if(!n.target){n.target=n.srcElement}c.extend(n,h._stoppers)}if(!j){return l(n)}return l.call(j,n)};if(p=="unload"){c.unloads.unshift({func:g});return g}if(p=="init"){if(h.domLoaded){g()}else{h.inits.push(g)}return g}i.push({obj:m,name:p,func:l,cfunc:g,scope:j});h._add(m,p,g);return l},remove:function(l,m,k){var h=this,g=h.events,i=false,j;if(l&&l.hasOwnProperty&&l instanceof Array){j=[];f(l,function(n){n=e.get(n);j.push(h.remove(n,m,k))});return j}l=e.get(l);f(g,function(o,n){if(o.obj==l&&o.name==m&&(!k||(o.func==k||o.cfunc==k))){g.splice(n,1);h._remove(l,m,o.cfunc);i=true;return false}});return i},clear:function(l){var j=this,g=j.events,h,k;if(l){l=e.get(l);for(h=g.length-1;h>=0;h--){k=g[h];if(k.obj===l){j._remove(k.obj,k.name,k.cfunc);k.obj=k.cfunc=null;g.splice(h,1)}}}},cancel:function(g){if(!g){return false}this.stop(g);return this.prevent(g)},stop:function(g){if(g.stopPropagation){g.stopPropagation()}else{g.cancelBubble=true}return false},prevent:function(g){if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}return false},destroy:function(){var g=this;f(g.events,function(j,h){g._remove(j.obj,j.name,j.cfunc);j.obj=j.cfunc=null});g.events=[];g=null},_add:function(h,i,g){if(h.attachEvent){h.attachEvent("on"+i,g)}else{if(h.addEventListener){h.addEventListener(i,g,false)}else{h["on"+i]=g}}},_remove:function(i,j,h){if(i){try{if(i.detachEvent){i.detachEvent("on"+j,h)}else{if(i.removeEventListener){i.removeEventListener(j,h,false)}else{i["on"+j]=null}}}catch(g){}}},_pageInit:function(h){var g=this;if(g.domLoaded){return}g.domLoaded=true;f(g.inits,function(i){i()});g.inits=[]},_wait:function(i){var g=this,h=i.document;if(i.tinyMCE_GZ&&tinyMCE_GZ.loaded){g.domLoaded=1;return}if(h.attachEvent){h.attachEvent("onreadystatechange",function(){if(h.readyState==="complete"){h.detachEvent("onreadystatechange",arguments.callee);g._pageInit(i)}});if(h.documentElement.doScroll&&i==i.top){(function(){if(g.domLoaded){return}try{h.documentElement.doScroll("left")}catch(j){setTimeout(arguments.callee,0);return}g._pageInit(i)})()}}else{if(h.addEventListener){g._add(i,"DOMContentLoaded",function(){g._pageInit(i)})}}g._add(i,"load",function(){g._pageInit(i)})},_stoppers:{preventDefault:function(){this.returnValue=false},stopPropagation:function(){this.cancelBubble=true}}});b=c.dom.Event=new c.dom.EventUtils();b._wait(window);c.addUnload(function(){b.destroy()})})(tinymce);(function(a){a.dom.Element=function(f,d){var b=this,e,c;b.settings=d=d||{};b.id=f;b.dom=e=d.dom||a.DOM;if(!a.isIE){c=e.get(b.id)}a.each(("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get").split(/,/),function(g){b[g]=function(){var h=[f],j;for(j=0;j<arguments.length;j++){h.push(arguments[j])}h=e[g].apply(e,h);b.update(g);return h}});a.extend(b,{on:function(i,h,g){return a.dom.Event.add(b.id,i,h,g)},getXY:function(){return{x:parseInt(b.getStyle("left")),y:parseInt(b.getStyle("top"))}},getSize:function(){var g=e.get(b.id);return{w:parseInt(b.getStyle("width")||g.clientWidth),h:parseInt(b.getStyle("height")||g.clientHeight)}},moveTo:function(g,h){b.setStyles({left:g,top:h})},moveBy:function(g,i){var h=b.getXY();b.moveTo(h.x+g,h.y+i)},resizeTo:function(g,i){b.setStyles({width:g,height:i})},resizeBy:function(g,j){var i=b.getSize();b.resizeTo(i.w+g,i.h+j)},update:function(h){var g;if(a.isIE6&&d.blocker){h=h||"";if(h.indexOf("get")===0||h.indexOf("has")===0||h.indexOf("is")===0){return}if(h=="remove"){e.remove(b.blocker);return}if(!b.blocker){b.blocker=e.uniqueId();g=e.add(d.container||e.getRoot(),"iframe",{id:b.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'});e.setStyle(g,"opacity",0)}else{g=e.get(b.blocker)}e.setStyles(g,{left:b.getStyle("left",1),top:b.getStyle("top",1),width:b.getStyle("width",1),height:b.getStyle("height",1),display:b.getStyle("display",1),zIndex:parseInt(b.getStyle("zIndex",1)||0)-1})}}})}})(tinymce);(function(a){function e(f){return f.replace(/[\n\r]+/g,"")}var c=a.is,b=a.isIE,d=a.each;a.create("tinymce.dom.Selection",{Selection:function(i,h,f){var g=this;g.dom=i;g.win=h;g.serializer=f;d(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(j){g[j]=new a.util.Dispatcher(g)});if(!g.win.getSelection){g.tridentSel=new a.dom.TridentSelection(g)}if(a.isIE&&i.boxModel){this._fixIESelection()}a.addUnload(g.destroy,g)},setCursorLocation:function(h,i){var f=this;var g=f.dom.createRng();g.setStart(h,i);g.setEnd(h,i);f.setRng(g);f.collapse(false)},getContent:function(g){var f=this,h=f.getRng(),l=f.dom.create("body"),j=f.getSel(),i,k,m;g=g||{};i=k="";g.get=true;g.format=g.format||"html";g.forced_root_block="";f.onBeforeGetContent.dispatch(f,g);if(g.format=="text"){return f.isCollapsed()?"":(h.text||(j.toString?j.toString():""))}if(h.cloneContents){m=h.cloneContents();if(m){l.appendChild(m)}}else{if(c(h.item)||c(h.htmlText)){l.innerHTML="<br>"+(h.item?h.item(0).outerHTML:h.htmlText);l.removeChild(l.firstChild)}else{l.innerHTML=h.toString()}}if(/^\s/.test(l.innerHTML)){i=" "}if(/\s+$/.test(l.innerHTML)){k=" "}g.getInner=true;g.content=f.isCollapsed()?"":i+f.serializer.serialize(l,g)+k;f.onGetContent.dispatch(f,g);return g.content},setContent:function(h,j){var m=this,f=m.getRng(),g,k=m.win.document,n,l;j=j||{format:"html"};j.set=true;h=j.content=h;if(!j.no_events){m.onBeforeSetContent.dispatch(m,j)}h=j.content;if(f.insertNode){h+='<span id="__caret">_</span>';if(f.startContainer==k&&f.endContainer==k){k.body.innerHTML=h}else{f.deleteContents();if(k.body.childNodes.length==0){k.body.innerHTML=h}else{if(f.createContextualFragment){f.insertNode(f.createContextualFragment(h))}else{n=k.createDocumentFragment();l=k.createElement("div");n.appendChild(l);l.outerHTML=h;f.insertNode(n)}}}g=m.dom.get("__caret");f=k.createRange();f.setStartBefore(g);f.setEndBefore(g);m.setRng(f);m.dom.remove("__caret");try{m.setRng(f)}catch(i){}}else{if(f.item){k.execCommand("Delete",false,null);f=m.getRng()}if(/^\s+/.test(h)){f.pasteHTML('<span id="__mce_tmp">_</span>'+h);m.dom.remove("__mce_tmp")}else{f.pasteHTML(h)}}if(!j.no_events){m.onSetContent.dispatch(m,j)}},getStart:function(){var f=this.getRng(),g,i,j,h;if(f.duplicate||f.item){if(f.item){return f.item(0)}j=f.duplicate();j.collapse(1);g=j.parentElement();i=h=f.parentElement();while(h=h.parentNode){if(h==g){g=i;break}}return g}else{g=f.startContainer;if(g.nodeType==1&&g.hasChildNodes()){g=g.childNodes[Math.min(g.childNodes.length-1,f.startOffset)]}if(g&&g.nodeType==3){return g.parentNode}return g}},getEnd:function(){var g=this,h=g.getRng(),i,f;if(h.duplicate||h.item){if(h.item){return h.item(0)}h=h.duplicate();h.collapse(0);i=h.parentElement();if(i&&i.nodeName=="BODY"){return i.lastChild||i}return i}else{i=h.endContainer;f=h.endOffset;if(i.nodeType==1&&i.hasChildNodes()){i=i.childNodes[f>0?f-1:f]}if(i&&i.nodeType==3){return i.parentNode}return i}},getBookmark:function(r,u){var v=this,n=v.dom,g,j,i,m,h,k,p,l="\uFEFF",s;function f(y,x){var t=0;d(n.select(y),function(A,z){if(A==x){t=z}});return t}if(r==2){function o(){var x=v.getRng(true),t=n.getRoot(),y={};function z(B,H){var D=B[H?"startContainer":"endContainer"],G=B[H?"startOffset":"endOffset"],A=[],C,F,E=0;if(D.nodeType==3){if(u){for(C=D.previousSibling;C&&C.nodeType==3;C=C.previousSibling){G+=C.nodeValue.length}}A.push(G)}else{F=D.childNodes;if(G>=F.length&&F.length){E=1;G=Math.max(0,F.length-1)}A.push(v.dom.nodeIndex(F[G],u)+E)}for(;D&&D!=t;D=D.parentNode){A.push(v.dom.nodeIndex(D,u))}return A}y.start=z(x,true);if(!v.isCollapsed()){y.end=z(x)}return y}if(v.tridentSel){return v.tridentSel.getBookmark(r)}return o()}if(r){return{rng:v.getRng()}}g=v.getRng();i=n.uniqueId();m=tinyMCE.activeEditor.selection.isCollapsed();s="overflow:hidden;line-height:0px";if(g.duplicate||g.item){if(!g.item){j=g.duplicate();try{g.collapse();g.pasteHTML('<span data-mce-type="bookmark" id="'+i+'_start" style="'+s+'">'+l+"</span>");if(!m){j.collapse(false);g.moveToElementText(j.parentElement());if(g.compareEndPoints("StartToEnd",j)==0){j.move("character",-1)}j.pasteHTML('<span data-mce-type="bookmark" id="'+i+'_end" style="'+s+'">'+l+"</span>")}}catch(q){return null}}else{k=g.item(0);h=k.nodeName;return{name:h,index:f(h,k)}}}else{k=v.getNode();h=k.nodeName;if(h=="IMG"){return{name:h,index:f(h,k)}}j=g.cloneRange();if(!m){j.collapse(false);j.insertNode(n.create("span",{"data-mce-type":"bookmark",id:i+"_end",style:s},l))}g.collapse(true);g.insertNode(n.create("span",{"data-mce-type":"bookmark",id:i+"_start",style:s},l))}v.moveToBookmark({id:i,keep:1});return{id:i}},moveToBookmark:function(n){var s=this,l=s.dom,j,i,f,r,m,q,g,p;if(n){if(n.start){f=l.createRng();r=l.getRoot();function o(z){var t=n[z?"start":"end"],v,x,y,u;if(t){y=t[0];for(x=r,v=t.length-1;v>=1;v--){u=x.childNodes;if(t[v]>u.length-1){return}x=u[t[v]]}if(x.nodeType===3){y=Math.min(t[0],x.nodeValue.length)}if(x.nodeType===1){y=Math.min(t[0],x.childNodes.length)}if(z){f.setStart(x,y)}else{f.setEnd(x,y)}}return true}if(s.tridentSel){return s.tridentSel.moveToBookmark(n)}if(o(true)&&o()){s.setRng(f)}}else{if(n.id){function k(A){var z=l.get(n.id+"_"+A),y,t,v,x,u=n.keep;if(z){y=z.parentNode;if(A=="start"){if(!u){t=l.nodeIndex(z)}else{y=z.firstChild;t=1}m=q=y;g=p=t}else{if(!u){t=l.nodeIndex(z)}else{y=z.firstChild;t=1}q=y;p=t}if(!u){x=z.previousSibling;v=z.nextSibling;d(a.grep(z.childNodes),function(B){if(B.nodeType==3){B.nodeValue=B.nodeValue.replace(/\uFEFF/g,"")}});while(z=l.get(n.id+"_"+A)){l.remove(z,1)}if(x&&v&&x.nodeType==v.nodeType&&x.nodeType==3&&!a.isOpera){t=x.nodeValue.length;x.appendData(v.nodeValue);l.remove(v);if(A=="start"){m=q=x;g=p=t}else{q=x;p=t}}}}}function h(t){if(l.isBlock(t)&&!t.innerHTML){t.innerHTML=!b?'<br data-mce-bogus="1" />':" "}return t}k("start");k("end");if(m){f=l.createRng();f.setStart(h(m),g);f.setEnd(h(q),p);s.setRng(f)}}else{if(n.name){s.select(l.select(n.name)[n.index])}else{if(n.rng){s.setRng(n.rng)}}}}}},select:function(k,j){var i=this,l=i.dom,g=l.createRng(),f;if(k){f=l.nodeIndex(k);g.setStart(k.parentNode,f);g.setEnd(k.parentNode,f+1);if(j){function h(m,o){var n=new a.dom.TreeWalker(m,m);do{if(m.nodeType==3&&a.trim(m.nodeValue).length!=0){if(o){g.setStart(m,0)}else{g.setEnd(m,m.nodeValue.length)}return}if(m.nodeName=="BR"){if(o){g.setStartBefore(m)}else{g.setEndBefore(m)}return}}while(m=(o?n.next():n.prev()))}h(k,1);h(k)}i.setRng(g)}return k},isCollapsed:function(){var f=this,h=f.getRng(),g=f.getSel();if(!h||h.item){return false}if(h.compareEndPoints){return h.compareEndPoints("StartToEnd",h)===0}return !g||h.collapsed},collapse:function(i){var g=this,f=g.getRng(),h;if(f.item){h=f.item(0);f=g.win.document.body.createTextRange();f.moveToElementText(h)}f.collapse(!!i);g.setRng(f)},getSel:function(){var g=this,f=this.win;return f.getSelection?f.getSelection():f.document.selection},getRng:function(l){var g=this,h,i,k,j=g.win.document;if(l&&g.tridentSel){return g.tridentSel.getRangeAt(0)}try{if(h=g.getSel()){i=h.rangeCount>0?h.getRangeAt(0):(h.createRange?h.createRange():j.createRange())}}catch(f){}if(a.isIE&&i&&i.setStart&&j.selection.createRange().item){k=j.selection.createRange().item(0);i=j.createRange();i.setStartBefore(k);i.setEndAfter(k)}if(!i){i=j.createRange?j.createRange():j.body.createTextRange()}if(g.selectedRange&&g.explicitRange){if(i.compareBoundaryPoints(i.START_TO_START,g.selectedRange)===0&&i.compareBoundaryPoints(i.END_TO_END,g.selectedRange)===0){i=g.explicitRange}else{g.selectedRange=null;g.explicitRange=null}}return i},setRng:function(i){var h,g=this;if(!g.tridentSel){h=g.getSel();if(h){g.explicitRange=i;try{h.removeAllRanges()}catch(f){}h.addRange(i);g.selectedRange=h.getRangeAt(0)}}else{if(i.cloneRange){g.tridentSel.addRange(i);return}try{i.select()}catch(f){}}},setNode:function(g){var f=this;f.setContent(f.dom.getOuterHTML(g));return g},getNode:function(){var h=this,g=h.getRng(),i=h.getSel(),l,k=g.startContainer,f=g.endContainer;if(!g){return h.dom.getRoot()}if(g.setStart){l=g.commonAncestorContainer;if(!g.collapsed){if(g.startContainer==g.endContainer){if(g.endOffset-g.startOffset<2){if(g.startContainer.hasChildNodes()){l=g.startContainer.childNodes[g.startOffset]}}}if(k.nodeType===3&&f.nodeType===3){function j(p,m){var o=p;while(p&&p.nodeType===3&&p.length===0){p=m?p.nextSibling:p.previousSibling}return p||o}if(k.length===g.startOffset){k=j(k.nextSibling,true)}else{k=k.parentNode}if(g.endOffset===0){f=j(f.previousSibling,false)}else{f=f.parentNode}if(k&&k===f){return k}}}if(l&&l.nodeType==3){return l.parentNode}return l}return g.item?g.item(0):g.parentElement()},getSelectedBlocks:function(m,f){var o=this,i=o.dom,l,j,h,g=[];l=i.getParent(m||o.getStart(),i.isBlock);j=i.getParent(f||o.getEnd(),i.isBlock);if(l){g.push(l)}if(l&&j&&l!=j){h=l;var k=new a.dom.TreeWalker(l,i.getRoot());while((h=k.next())&&h!=j){if(i.isBlock(h)){g.push(h)}}}if(j&&l!=j){g.push(j)}return g},normalize:function(){var h=this,g,i;if(a.isIE){return}function f(p){var l,o,n,m=h.dom,j=m.getRoot(),k;l=g[(p?"start":"end")+"Container"];o=g[(p?"start":"end")+"Offset"];if(l.nodeType===9){l=l.body;o=0}if(l===j){if(l.hasChildNodes()){l=l.childNodes[Math.min(!p&&o>0?o-1:o,l.childNodes.length-1)];o=0;if(l.hasChildNodes()){k=l;n=new a.dom.TreeWalker(l,j);do{if(k.nodeType===3){o=p?0:k.nodeValue.length-1;l=k;break}if(k.nodeName==="BR"){o=m.nodeIndex(k);l=k.parentNode;break}}while(k=(p?n.next():n.prev()));i=true}}}if(i){g["set"+(p?"Start":"End")](l,o)}}g=h.getRng();f(true);if(g.collapsed){f()}if(i){h.setRng(g)}},destroy:function(g){var f=this;f.win=null;if(!g){a.removeUnload(f.destroy)}},_fixIESelection:function(){var h=this.dom,l=h.doc,i=l.body,g,m,f;l.documentElement.unselectable=true;function j(o,r){var p=i.createTextRange();try{p.moveToPoint(o,r)}catch(q){p=null}return p}function k(p){var o;if(p.button){o=j(p.x,p.y);if(o){if(o.compareEndPoints("StartToStart",m)>0){o.setEndPoint("StartToStart",m)}else{o.setEndPoint("EndToEnd",m)}o.select()}}else{n()}}function n(){var o=l.selection.createRange();if(m&&!o.item&&o.compareEndPoints("StartToEnd",o)===0){m.select()}h.unbind(l,"mouseup",n);h.unbind(l,"mousemove",k);m=g=0}h.bind(l,["mousedown","contextmenu"],function(o){if(o.target.nodeName==="HTML"){if(g){n()}f=l.documentElement;if(f.scrollHeight>f.clientHeight){return}g=1;m=j(o.x,o.y);if(m){h.bind(l,"mouseup",n);h.bind(l,"mousemove",k);h.win.focus();m.select()}}})}})})(tinymce);(function(a){a.dom.Serializer=function(f,h,c){var i,b,e=a.isIE,g=a.each,d;if(!f.apply_source_formatting){f.indent=false}f.remove_trailing_brs=true;h=h||a.DOM;c=c||new a.html.Schema(f);f.entity_encoding=f.entity_encoding||"named";i=new a.util.Dispatcher(self);b=new a.util.Dispatcher(self);d=new a.html.DomParser(f,c);d.addAttributeFilter("src,href,style",function(j,k){var o=j.length,l,r,n="data-mce-"+k,p=f.url_converter,q=f.url_converter_scope,m;while(o--){l=j[o];r=l.attributes.map[n];if(r!==m){l.attr(k,r.length>0?r:null);l.attr(n,null)}else{r=l.attributes.map[k];if(k==="style"){r=h.serializeStyle(h.parseStyle(r),l.name)}else{if(p){r=p.call(q,r,k,l.name)}}l.attr(k,r.length>0?r:null)}}});d.addAttributeFilter("class",function(j,k){var l=j.length,m,n;while(l--){m=j[l];n=m.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,"");m.attr("class",n.length>0?n:null)}});d.addAttributeFilter("data-mce-type",function(j,l,k){var m=j.length,n;while(m--){n=j[m];if(n.attributes.map["data-mce-type"]==="bookmark"&&!k.cleanup){n.remove()}}});d.addNodeFilter("script,style",function(k,l){var m=k.length,n,o;function j(p){return p.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"").replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"")}while(m--){n=k[m];o=n.firstChild?n.firstChild.value:"";if(l==="script"){n.attr("type",(n.attr("type")||"text/javascript").replace(/^mce\-/,""));if(o.length>0){n.firstChild.value="// <![CDATA[\n"+j(o)+"\n// ]]>"}}else{if(o.length>0){n.firstChild.value="<!--\n"+j(o)+"\n-->"}}}});d.addNodeFilter("#comment",function(j,k){var l=j.length,m;while(l--){m=j[l];if(m.value.indexOf("[CDATA[")===0){m.name="#cdata";m.type=4;m.value=m.value.replace(/^\[CDATA\[|\]\]$/g,"")}else{if(m.value.indexOf("mce:protected ")===0){m.name="#text";m.type=3;m.raw=true;m.value=unescape(m.value).substr(14)}}}});d.addNodeFilter("xml:namespace,input",function(j,k){var l=j.length,m;while(l--){m=j[l];if(m.type===7){m.remove()}else{if(m.type===1){if(k==="input"&&!("type" in m.attributes.map)){m.attr("type","text")}}}}});if(f.fix_list_elements){d.addNodeFilter("ul,ol",function(j,k){var l=j.length,m,n;while(l--){m=j[l];n=m.parent;if(n.name==="ul"||n.name==="ol"){if(m.prev&&m.prev.name==="li"){m.prev.append(m)}}}})}d.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(j,k){var l=j.length;while(l--){j[l].attr(k,null)}});return{schema:c,addNodeFilter:d.addNodeFilter,addAttributeFilter:d.addAttributeFilter,onPreProcess:i,onPostProcess:b,serialize:function(o,l){var k,p,n,j,m;if(e&&h.select("script,style,select,map").length>0){m=o.innerHTML;o=o.cloneNode(false);h.setHTML(o,m)}else{o=o.cloneNode(true)}k=o.ownerDocument.implementation;if(k.createHTMLDocument){p=k.createHTMLDocument("");g(o.nodeName=="BODY"?o.childNodes:[o],function(q){p.body.appendChild(p.importNode(q,true))});if(o.nodeName!="BODY"){o=p.body.firstChild}else{o=p.body}n=h.doc;h.doc=p}l=l||{};l.format=l.format||"html";if(!l.no_events){l.node=o;i.dispatch(self,l)}j=new a.html.Serializer(f,c);l.content=j.serialize(d.parse(l.getInner?o.innerHTML:a.trim(h.getOuterHTML(o),l),l));if(!l.cleanup){l.content=l.content.replace(/\uFEFF|\u200B/g,"")}if(!l.no_events){b.dispatch(self,l)}if(n){h.doc=n}l.node=null;return l.content},addRules:function(j){c.addValidElements(j)},setRules:function(j){c.setValidElements(j)}}}})(tinymce);(function(a){a.dom.ScriptLoader=function(e){var k=0,j=1,f=2,l={},h=[],c={},b=[],d=0,g;function i(m,v){var x=this,q=a.DOM,s,o,r,n;function p(){q.remove(n);if(s){s.onreadystatechange=s.onload=s=null}v()}function u(){if(typeof(console)!=="undefined"&&console.log){console.log("Failed to load: "+m)}}n=q.uniqueId();if(a.isIE6){o=new a.util.URI(m);r=location;if(o.host==r.hostname&&o.port==r.port&&(o.protocol+":")==r.protocol&&o.protocol.toLowerCase()!="file"){a.util.XHR.send({url:a._addVer(o.getURI()),success:function(y){var t=q.create("script",{type:"text/javascript"});t.text=y;document.getElementsByTagName("head")[0].appendChild(t);q.remove(t);p()},error:u});return}}s=q.create("script",{id:n,type:"text/javascript",src:a._addVer(m)});if(!a.isIE){s.onload=p}s.onerror=u;if(!a.isOpera){s.onreadystatechange=function(){var t=s.readyState;if(t=="complete"||t=="loaded"){p()}}}(document.getElementsByTagName("head")[0]||document.body).appendChild(s)}this.isDone=function(m){return l[m]==f};this.markDone=function(m){l[m]=f};this.add=this.load=function(m,q,n){var o,p=l[m];if(p==g){h.push(m);l[m]=k}if(q){if(!c[m]){c[m]=[]}c[m].push({func:q,scope:n||this})}};this.loadQueue=function(n,m){this.loadScripts(h,n,m)};this.loadScripts=function(m,q,p){var o;function n(r){a.each(c[r],function(s){s.func.call(s.scope)});c[r]=g}b.push({func:q,scope:p||this});o=function(){var r=a.grep(m);m.length=0;a.each(r,function(s){if(l[s]==f){n(s);return}if(l[s]!=j){l[s]=j;d++;i(s,function(){l[s]=f;d--;n(s);o()})}});if(!d){a.each(b,function(s){s.func.call(s.scope)});b.length=0}};o()}};a.ScriptLoader=new a.dom.ScriptLoader()})(tinymce);tinymce.dom.TreeWalker=function(b,a){var c=b;function d(h,g,j,i){var f,e;if(h){if(!i&&h[g]){return h[g]}if(h!=a){f=h[j];if(f){return f}for(e=h.parentNode;e&&e!=a;e=e.parentNode){f=e[j];if(f){return f}}}}}this.current=function(){return c};this.next=function(e){return(c=d(c,"firstChild","nextSibling",e))};this.prev=function(e){return(c=d(c,"lastChild","previousSibling",e))}};(function(a){a.dom.RangeUtils=function(c){var b="\uFEFF";this.walk=function(d,s){var j=d.startContainer,f=d.startOffset,p=d.endContainer,m=d.endOffset,i,l,o,h,t,r,e;e=c.select("td.mceSelected,th.mceSelected");if(e.length>0){a.each(e,function(u){s([u])});return}function k(u){var v;v=u[0];if(v.nodeType===3&&v===j&&f>=v.nodeValue.length){u.splice(0,1)}v=u[u.length-1];if(m===0&&u.length>0&&v===p&&v.nodeType===3){u.splice(u.length-1,1)}return u}function q(x,v,u){var y=[];for(;x&&x!=u;x=x[v]){y.push(x)}return y}function n(v,u){do{if(v.parentNode==u){return v}v=v.parentNode}while(v)}function g(x,v,y){var u=y?"nextSibling":"previousSibling";for(h=x,t=h.parentNode;h&&h!=v;h=t){t=h.parentNode;r=q(h==x?h:h[u],u);if(r.length){if(!y){r.reverse()}s(k(r))}}}if(j.nodeType==1&&j.hasChildNodes()){j=j.childNodes[f]}if(p.nodeType==1&&p.hasChildNodes()){p=p.childNodes[Math.min(m-1,p.childNodes.length-1)]}if(j==p){return s(k([j]))}i=c.findCommonAncestor(j,p);for(h=j;h;h=h.parentNode){if(h===p){return g(j,i,true)}if(h===i){break}}for(h=p;h;h=h.parentNode){if(h===j){return g(p,i)}if(h===i){break}}l=n(j,i)||j;o=n(p,i)||p;g(j,l,true);r=q(l==j?l:l.nextSibling,"nextSibling",o==p?o.nextSibling:o);if(r.length){s(k(r))}g(p,o)};this.split=function(f){var e=f.startContainer,i=f.startOffset,d=f.endContainer,h=f.endOffset;function g(j,k){return j.splitText(k)}if(e==d&&e.nodeType==3){if(i>0&&i<e.nodeValue.length){d=g(e,i);e=d.previousSibling;if(h>i){h=h-i;e=d=g(d,h).previousSibling;h=d.nodeValue.length;i=0}else{h=0}}}else{if(e.nodeType==3&&i>0&&i<e.nodeValue.length){e=g(e,i);i=0}if(d.nodeType==3&&h>0&&h<d.nodeValue.length){d=g(d,h).previousSibling;h=d.nodeValue.length}}return{startContainer:e,startOffset:i,endContainer:d,endOffset:h}}};a.dom.RangeUtils.compareRanges=function(c,b){if(c&&b){if(c.item||c.duplicate){if(c.item&&b.item&&c.item(0)===b.item(0)){return true}if(c.isEqual&&b.isEqual&&b.isEqual(c)){return true}}else{return c.startContainer==b.startContainer&&c.startOffset==b.startOffset}}return false}})(tinymce);(function(b){var a=b.dom.Event,c=b.each;b.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(h,i){var p=this,m=h.root,k=h.items,o=h.enableUpDown,g=h.enableLeftRight||!h.enableUpDown,l=h.excludeFromTabOrder,j,f,n,d,e;i=i||b.DOM;j=function(q){e=q.target.id};f=function(q){i.setAttrib(q.target.id,"tabindex","-1")};d=function(q){var r=i.get(e);i.setAttrib(r,"tabindex","0");r.focus()};p.focus=function(){i.get(e).focus()};p.destroy=function(){c(k,function(q){i.unbind(i.get(q.id),"focus",j);i.unbind(i.get(q.id),"blur",f)});i.unbind(i.get(m),"focus",d);i.unbind(i.get(m),"keydown",n);k=i=m=p.focus=j=f=n=d=null;p.destroy=function(){}};p.moveFocus=function(t,r){var q=-1,u=p.controls,s;if(!e){return}c(k,function(x,v){if(x.id===e){q=v;return false}});q+=t;if(q<0){q=k.length-1}else{if(q>=k.length){q=0}}s=k[q];i.setAttrib(e,"tabindex","-1");i.setAttrib(s.id,"tabindex","0");i.get(s.id).focus();if(h.actOnFocus){h.onAction(s.id)}if(r){a.cancel(r)}};n=function(y){var r=37,s=39,x=38,z=40,u=27,t=14,v=13,q=32;switch(y.keyCode){case r:if(g){p.moveFocus(-1)}break;case s:if(g){p.moveFocus(1)}break;case x:if(o){p.moveFocus(-1)}break;case z:if(o){p.moveFocus(1)}break;case u:if(h.onCancel){h.onCancel();a.cancel(y)}break;case t:case v:case q:if(h.onAction){h.onAction(e);a.cancel(y)}break}};c(k,function(s,q){var r;if(!s.id){s.id=i.uniqueId("_mce_item_")}if(l){i.bind(s.id,"blur",f);r="-1"}else{r=(q===0?"0":"-1")}i.setAttrib(s.id,"tabindex",r);i.bind(i.get(s.id),"focus",j)});if(k[0]){e=k[0].id}i.setAttrib(m,"tabindex","-1");i.bind(i.get(m),"focus",d);i.bind(i.get(m),"keydown",n)}})})(tinymce);(function(a){var c=a.DOM,b=a.is;a.create("tinymce.ui.Control",{Control:function(f,e,d){this.id=f;this.settings=e=e||{};this.rendered=false;this.onRender=new a.util.Dispatcher(this);this.classPrefix="";this.scope=e.scope||this;this.disabled=0;this.active=0;this.editor=d},setAriaProperty:function(d,f){var e=c.get(this.id+"_aria")||c.get(this.id);if(e){c.setAttrib(e,"aria-"+d,!!f)}},focus:function(){c.get(this.id).focus()},setDisabled:function(d){if(d!=this.disabled){this.setAriaProperty("disabled",d);this.setState("Disabled",d);this.setState("Enabled",!d);this.disabled=d}},isDisabled:function(){return this.disabled},setActive:function(d){if(d!=this.active){this.setState("Active",d);this.active=d;this.setAriaProperty("pressed",d)}},isActive:function(){return this.active},setState:function(f,d){var e=c.get(this.id);f=this.classPrefix+f;if(d){c.addClass(e,f)}else{c.removeClass(e,f)}},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(d){c.setHTML(d,this.renderHTML())},postRender:function(){var e=this,d;if(b(e.disabled)){d=e.disabled;e.disabled=-1;e.setDisabled(d)}if(b(e.active)){d=e.active;e.active=-1;e.setActive(d)}},remove:function(){c.remove(this.id);this.destroy()},destroy:function(){a.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(c,b,a){this.parent(c,b,a);this.controls=[];this.lookup={}},add:function(a){this.lookup[a.id]=a;this.controls.push(a);return a},get:function(a){return this.lookup[a]}});tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(b,a){this.parent(b,a);this.classPrefix="mceSeparator";this.setDisabled(true)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}});(function(b){var d=b.is,c=b.DOM,e=b.each,a=b.walk;b.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(g,f){this.parent(g,f);this.classPrefix="mceMenuItem"},setSelected:function(f){this.setState("Selected",f);this.setAriaProperty("checked",!!f);this.selected=f},isSelected:function(){return this.selected},postRender:function(){var f=this;f.parent();if(d(f.selected)){f.setSelected(f.selected)}}})})(tinymce);(function(b){var d=b.is,c=b.DOM,e=b.each,a=b.walk;b.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(h,g){var f=this;f.parent(h,g);f.items={};f.collapsed=false;f.menuCount=0;f.onAddItem=new b.util.Dispatcher(this)},expand:function(g){var f=this;if(g){a(f,function(h){if(h.expand){h.expand()}},"items",f)}f.collapsed=false},collapse:function(g){var f=this;if(g){a(f,function(h){if(h.collapse){h.collapse()}},"items",f)}f.collapsed=true},isCollapsed:function(){return this.collapsed},add:function(f){if(!f.settings){f=new b.ui.MenuItem(f.id||c.uniqueId(),f)}this.onAddItem.dispatch(this,f);return this.items[f.id]=f},addSeparator:function(){return this.add({separator:true})},addMenu:function(f){if(!f.collapse){f=this.createMenu(f)}this.menuCount++;return this.add(f)},hasMenus:function(){return this.menuCount!==0},remove:function(f){delete this.items[f.id]},removeAll:function(){var f=this;a(f,function(g){if(g.removeAll){g.removeAll()}else{g.remove()}g.destroy()},"items",f);f.items={}},createMenu:function(g){var f=new b.ui.Menu(g.id||c.uniqueId(),g);f.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return f}})})(tinymce);(function(b){var e=b.is,d=b.DOM,f=b.each,a=b.dom.Event,c=b.dom.Element;b.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(h,g){g=g||{};g.container=g.container||d.doc.body;g.offset_x=g.offset_x||0;g.offset_y=g.offset_y||0;g.vp_offset_x=g.vp_offset_x||0;g.vp_offset_y=g.vp_offset_y||0;if(e(g.icons)&&!g.icons){g["class"]+=" mceNoIcons"}this.parent(h,g);this.onShowMenu=new b.util.Dispatcher(this);this.onHideMenu=new b.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(j){var h=this,i=h.settings,g;j.container=j.container||i.container;j.parent=h;j.constrain=j.constrain||i.constrain;j["class"]=j["class"]||i["class"];j.vp_offset_x=j.vp_offset_x||i.vp_offset_x;j.vp_offset_y=j.vp_offset_y||i.vp_offset_y;j.keyboard_focus=i.keyboard_focus;g=new b.ui.DropMenu(j.id||d.uniqueId(),j);g.onAddItem.add(h.onAddItem.dispatch,h.onAddItem);return g},focus:function(){var g=this;if(g.keyboardNav){g.keyboardNav.focus()}},update:function(){var i=this,j=i.settings,g=d.get("menu_"+i.id+"_tbl"),l=d.get("menu_"+i.id+"_co"),h,k;h=j.max_width?Math.min(g.clientWidth,j.max_width):g.clientWidth;k=j.max_height?Math.min(g.clientHeight,j.max_height):g.clientHeight;if(!d.boxModel){i.element.setStyles({width:h+2,height:k+2})}else{i.element.setStyles({width:h,height:k})}if(j.max_width){d.setStyle(l,"width",h)}if(j.max_height){d.setStyle(l,"height",k);if(g.clientHeight<j.max_height){d.setStyle(l,"overflow","hidden")}}},showMenu:function(p,o,u){var z=this,A=z.settings,n,g=d.getViewPort(),r,l,v,q,i=2,k,j,m=z.classPrefix;z.collapse(1);if(z.isMenuVisible){return}if(!z.rendered){n=d.add(z.settings.container,z.renderNode());f(z.items,function(h){h.postRender()});z.element=new c("menu_"+z.id,{blocker:1,container:A.container})}else{n=d.get("menu_"+z.id)}if(!b.isOpera){d.setStyles(n,{left:-65535,top:-65535})}d.show(n);z.update();p+=A.offset_x||0;o+=A.offset_y||0;g.w-=4;g.h-=4;if(A.constrain){r=n.clientWidth-i;l=n.clientHeight-i;v=g.x+g.w;q=g.y+g.h;if((p+A.vp_offset_x+r)>v){p=u?u-r:Math.max(0,(v-A.vp_offset_x)-r)}if((o+A.vp_offset_y+l)>q){o=Math.max(0,(q-A.vp_offset_y)-l)}}d.setStyles(n,{left:p,top:o});z.element.update();z.isMenuVisible=1;z.mouseClickFunc=a.add(n,"click",function(s){var h;s=s.target;if(s&&(s=d.getParent(s,"tr"))&&!d.hasClass(s,m+"ItemSub")){h=z.items[s.id];if(h.isDisabled()){return}k=z;while(k){if(k.hideMenu){k.hideMenu()}k=k.settings.parent}if(h.settings.onclick){h.settings.onclick(s)}return a.cancel(s)}});if(z.hasMenus()){z.mouseOverFunc=a.add(n,"mouseover",function(x){var h,t,s;x=x.target;if(x&&(x=d.getParent(x,"tr"))){h=z.items[x.id];if(z.lastMenu){z.lastMenu.collapse(1)}if(h.isDisabled()){return}if(x&&d.hasClass(x,m+"ItemSub")){t=d.getRect(x);h.showMenu((t.x+t.w-i),t.y-i,t.x);z.lastMenu=h;d.addClass(d.get(h.id).firstChild,m+"ItemActive")}}})}a.add(n,"keydown",z._keyHandler,z);z.onShowMenu.dispatch(z);if(A.keyboard_focus){z._setupKeyboardNav()}},hideMenu:function(j){var g=this,i=d.get("menu_"+g.id),h;if(!g.isMenuVisible){return}if(g.keyboardNav){g.keyboardNav.destroy()}a.remove(i,"mouseover",g.mouseOverFunc);a.remove(i,"click",g.mouseClickFunc);a.remove(i,"keydown",g._keyHandler);d.hide(i);g.isMenuVisible=0;if(!j){g.collapse(1)}if(g.element){g.element.hide()}if(h=d.get(g.id)){d.removeClass(h.firstChild,g.classPrefix+"ItemActive")}g.onHideMenu.dispatch(g)},add:function(i){var g=this,h;i=g.parent(i);if(g.isRendered&&(h=d.get("menu_"+g.id))){g._add(d.select("tbody",h)[0],i)}return i},collapse:function(g){this.parent(g);this.hideMenu(1)},remove:function(g){d.remove(g.id);this.destroy();return this.parent(g)},destroy:function(){var g=this,h=d.get("menu_"+g.id);if(g.keyboardNav){g.keyboardNav.destroy()}a.remove(h,"mouseover",g.mouseOverFunc);a.remove(d.select("a",h),"focus",g.mouseOverFunc);a.remove(h,"click",g.mouseClickFunc);a.remove(h,"keydown",g._keyHandler);if(g.element){g.element.remove()}d.remove(h)},renderNode:function(){var i=this,j=i.settings,l,h,k,g;if(j["class"].indexOf("mceListBoxMenu")!=-1&&b.EditorManager.settings.theme_advanced_toolbar_location=="external"){g=d.create("div",{role:"listbox",id:"menu_"+i.id,"class":j["class"],style:"position:fixed;_position:absolute;left:0;top:0;z-index:200000;outline:0"})}else{g=d.create("div",{role:"listbox",id:"menu_"+i.id,"class":j["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"})}if(i.settings.parent){d.setAttrib(g,"aria-parent","menu_"+i.settings.parent.id)}k=d.add(g,"div",{role:"presentation",id:"menu_"+i.id+"_co","class":i.classPrefix+(j["class"]?" "+j["class"]:"")});i.element=new c("menu_"+i.id,{blocker:1,container:j.container});if(j.menu_line){d.add(k,"span",{"class":i.classPrefix+"Line"})}l=d.add(k,"table",{role:"presentation",id:"menu_"+i.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});h=d.add(l,"tbody");f(i.items,function(m){i._add(h,m)});i.rendered=true;return g},_setupKeyboardNav:function(){var h,g,i=this;h=d.select("#menu_"+i.id)[0];g=d.select("a[role=option]","menu_"+i.id);g.splice(0,0,h);i.keyboardNav=new b.ui.KeyboardNavigation({root:"menu_"+i.id,items:g,onCancel:function(){i.hideMenu()},enableUpDown:true});h.focus()},_keyHandler:function(g){var h=this,i;switch(g.keyCode){case 37:if(h.settings.parent){h.hideMenu();h.settings.parent.focus();a.cancel(g)}break;case 39:if(h.mouseOverFunc){h.mouseOverFunc(g)}break}},_add:function(j,h){var i,q=h.settings,p,l,k,m=this.classPrefix,g;if(q.separator){l=d.add(j,"tr",{id:h.id,"class":m+"ItemSeparator"});d.add(l,"td",{"class":m+"ItemSeparator"});if(i=l.previousSibling){d.addClass(i,"mceLast")}return}i=l=d.add(j,"tr",{id:h.id,"class":m+"Item "+m+"ItemEnabled"});i=k=d.add(i,q.titleItem?"th":"td");i=p=d.add(i,"a",{id:h.id+"_aria",role:q.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"});if(q.parent){d.setAttrib(p,"aria-haspopup","true");d.setAttrib(p,"aria-owns","menu_"+h.id)}d.addClass(k,q["class"]);g=d.add(i,"span",{"class":"mceIcon"+(q.icon?" mce_"+q.icon:"")});if(q.icon_src){d.add(g,"img",{src:q.icon_src})}i=d.add(i,q.element||"span",{"class":"mceText",title:h.settings.title},h.settings.title);if(h.settings.style){d.setAttrib(i,"style",h.settings.style)}if(j.childNodes.length==1){d.addClass(l,"mceFirst")}if((i=l.previousSibling)&&d.hasClass(i,m+"ItemSeparator")){d.addClass(l,"mceFirst")}if(h.collapse){d.addClass(l,m+"ItemSub")}if(i=l.previousSibling){d.removeClass(i,"mceLast")}d.addClass(l,"mceLast")}})})(tinymce);(function(a){var b=a.DOM;a.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,d,c){this.parent(e,d,c);this.classPrefix="mceButton"},renderHTML:function(){var f=this.classPrefix,e=this.settings,d,c;c=b.encode(e.label||"");d='<a role="button" id="'+this.id+'" href="javascript:;" class="'+f+" "+f+"Enabled "+e["class"]+(c?" "+f+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+b.encode(e.title)+'">';if(e.image&&!(this.editor&&this.editor.forcedHighContrastMode)){d+='<img class="mceIcon" src="'+e.image+'" alt="'+b.encode(e.title)+'" />'+c}else{d+='<span class="mceIcon '+e["class"]+'"></span>'+(c?'<span class="'+f+'Label">'+c+"</span>":"")}d+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+e.title+"</span>";d+="</a>";return d},postRender:function(){var c=this,d=c.settings;a.dom.Event.add(c.id,"click",function(f){if(!c.isDisabled()){return d.onclick.call(d.scope,f)}})}})})(tinymce);(function(c){var d=c.DOM,b=c.dom.Event,e=c.each,a=c.util.Dispatcher;c.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(i,h,f){var g=this;g.parent(i,h,f);g.items=[];g.onChange=new a(g);g.onPostRender=new a(g);g.onAdd=new a(g);g.onRenderMenu=new c.util.Dispatcher(this);g.classPrefix="mceListBox"},select:function(h){var g=this,j,i;if(h==undefined){return g.selectByIndex(-1)}if(h&&h.call){i=h}else{i=function(f){return f==h}}if(h!=g.selectedValue){e(g.items,function(k,f){if(i(k.value)){j=1;g.selectByIndex(f);return false}});if(!j){g.selectByIndex(-1)}}},selectByIndex:function(f){var h=this,i,j,g;if(f!=h.selectedIndex){i=d.get(h.id+"_text");g=d.get(h.id+"_voiceDesc");j=h.items[f];if(j){h.selectedValue=j.value;h.selectedIndex=f;d.setHTML(i,d.encode(j.title));d.setHTML(g,h.settings.title+" - "+j.title);d.removeClass(i,"mceTitle");d.setAttrib(h.id,"aria-valuenow",j.title)}else{d.setHTML(i,d.encode(h.settings.title));d.setHTML(g,d.encode(h.settings.title));d.addClass(i,"mceTitle");h.selectedValue=h.selectedIndex=null;d.setAttrib(h.id,"aria-valuenow",h.settings.title)}i=0}},add:function(i,f,h){var g=this;h=h||{};h=c.extend(h,{title:i,value:f});g.items.push(h);g.onAdd.dispatch(g,h)},getLength:function(){return this.items.length},renderHTML:function(){var i="",f=this,g=f.settings,j=f.classPrefix;i='<span role="listbox" aria-haspopup="true" aria-labelledby="'+f.id+'_voiceDesc" aria-describedby="'+f.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+f.id+'" cellpadding="0" cellspacing="0" class="'+j+" "+j+"Enabled"+(g["class"]?(" "+g["class"]):"")+'"><tbody><tr>';i+="<td>"+d.createHTML("span",{id:f.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},f.settings.title);i+=d.createHTML("a",{id:f.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},d.encode(f.settings.title))+"</td>";i+="<td>"+d.createHTML("a",{id:f.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25BC</span></span>')+"</td>";i+="</tr></tbody></table></span>";return i},showMenu:function(){var g=this,i,h=d.get(this.id),f;if(g.isDisabled()||g.items.length==0){return}if(g.menu&&g.menu.isMenuVisible){return g.hideMenu()}if(!g.isMenuRendered){g.renderMenu();g.isMenuRendered=true}i=d.getPos(h);f=g.menu;f.settings.offset_x=i.x;f.settings.offset_y=i.y;f.settings.keyboard_focus=!c.isOpera;if(g.oldID){f.items[g.oldID].setSelected(0)}e(g.items,function(j){if(j.value===g.selectedValue){f.items[j.id].setSelected(1);g.oldID=j.id}});f.showMenu(0,h.clientHeight);b.add(d.doc,"mousedown",g.hideMenu,g);d.addClass(g.id,g.classPrefix+"Selected")},hideMenu:function(g){var f=this;if(f.menu&&f.menu.isMenuVisible){d.removeClass(f.id,f.classPrefix+"Selected");if(g&&g.type=="mousedown"&&(g.target.id==f.id+"_text"||g.target.id==f.id+"_open")){return}if(!g||!d.getParent(g.target,".mceMenu")){d.removeClass(f.id,f.classPrefix+"Selected");b.remove(d.doc,"mousedown",f.hideMenu,f);f.menu.hideMenu()}}},renderMenu:function(){var g=this,f;f=g.settings.control_manager.createDropMenu(g.id+"_menu",{menu_line:1,"class":g.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});f.onHideMenu.add(function(){g.hideMenu();g.focus()});f.add({title:g.settings.title,"class":"mceMenuItemTitle",onclick:function(){if(g.settings.onselect("")!==false){g.select("")}}});e(g.items,function(h){if(h.value===undefined){f.add({title:h.title,role:"option","class":"mceMenuItemTitle",onclick:function(){if(g.settings.onselect("")!==false){g.select("")}}})}else{h.id=d.uniqueId();h.role="option";h.onclick=function(){if(g.settings.onselect(h.value)!==false){g.select(h.value)}};f.add(h)}});g.onRenderMenu.dispatch(g,f);g.menu=f},postRender:function(){var f=this,g=f.classPrefix;b.add(f.id,"click",f.showMenu,f);b.add(f.id,"keydown",function(h){if(h.keyCode==32){f.showMenu(h);b.cancel(h)}});b.add(f.id,"focus",function(){if(!f._focused){f.keyDownHandler=b.add(f.id,"keydown",function(h){if(h.keyCode==40){f.showMenu();b.cancel(h)}});f.keyPressHandler=b.add(f.id,"keypress",function(i){var h;if(i.keyCode==13){h=f.selectedValue;f.selectedValue=null;b.cancel(i);f.settings.onselect(h)}})}f._focused=1});b.add(f.id,"blur",function(){b.remove(f.id,"keydown",f.keyDownHandler);b.remove(f.id,"keypress",f.keyPressHandler);f._focused=0});if(c.isIE6||!d.boxModel){b.add(f.id,"mouseover",function(){if(!d.hasClass(f.id,g+"Disabled")){d.addClass(f.id,g+"Hover")}});b.add(f.id,"mouseout",function(){if(!d.hasClass(f.id,g+"Disabled")){d.removeClass(f.id,g+"Hover")}})}f.onPostRender.dispatch(f,d.get(f.id))},destroy:function(){this.parent();b.clear(this.id+"_text");b.clear(this.id+"_open")}})})(tinymce);(function(c){var d=c.DOM,b=c.dom.Event,e=c.each,a=c.util.Dispatcher;c.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(g,f){this.parent(g,f);this.classPrefix="mceNativeListBox"},setDisabled:function(f){d.get(this.id).disabled=f;this.setAriaProperty("disabled",f)},isDisabled:function(){return d.get(this.id).disabled},select:function(h){var g=this,j,i;if(h==undefined){return g.selectByIndex(-1)}if(h&&h.call){i=h}else{i=function(f){return f==h}}if(h!=g.selectedValue){e(g.items,function(k,f){if(i(k.value)){j=1;g.selectByIndex(f);return false}});if(!j){g.selectByIndex(-1)}}},selectByIndex:function(f){d.get(this.id).selectedIndex=f+1;this.selectedValue=this.items[f]?this.items[f].value:null},add:function(j,g,f){var i,h=this;f=f||{};f.value=g;if(h.isRendered()){d.add(d.get(this.id),"option",f,j)}i={title:j,value:g,attribs:f};h.items.push(i);h.onAdd.dispatch(h,i)},getLength:function(){return this.items.length},renderHTML:function(){var g,f=this;g=d.createHTML("option",{value:""},"-- "+f.settings.title+" --");e(f.items,function(h){g+=d.createHTML("option",{value:h.value},h.title)});g=d.createHTML("select",{id:f.id,"class":"mceNativeListBox","aria-labelledby":f.id+"_aria"},g);g+=d.createHTML("span",{id:f.id+"_aria",style:"display: none"},f.settings.title);return g},postRender:function(){var g=this,h,i=true;g.rendered=true;function f(k){var j=g.items[k.target.selectedIndex-1];if(j&&(j=j.value)){g.onChange.dispatch(g,j);if(g.settings.onselect){g.settings.onselect(j)}}}b.add(g.id,"change",f);b.add(g.id,"keydown",function(k){var j;b.remove(g.id,"change",h);i=false;j=b.add(g.id,"blur",function(){if(i){return}i=true;b.add(g.id,"change",f);b.remove(g.id,"blur",j)});if(c.isWebKit&&(k.keyCode==37||k.keyCode==39)){return b.prevent(k)}if(k.keyCode==13||k.keyCode==32){f(k);return b.cancel(k)}});g.onPostRender.dispatch(g,d.get(g.id))}})})(tinymce);(function(b){var c=b.DOM,a=b.dom.Event,d=b.each;b.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(g,f,e){this.parent(g,f,e);this.onRenderMenu=new b.util.Dispatcher(this);f.menu_container=f.menu_container||c.doc.body},showMenu:function(){var g=this,j,i,h=c.get(g.id),f;if(g.isDisabled()){return}if(!g.isMenuRendered){g.renderMenu();g.isMenuRendered=true}if(g.isMenuVisible){return g.hideMenu()}j=c.getPos(g.settings.menu_container);i=c.getPos(h);f=g.menu;f.settings.offset_x=i.x;f.settings.offset_y=i.y;f.settings.vp_offset_x=i.x;f.settings.vp_offset_y=i.y;f.settings.keyboard_focus=g._focused;f.showMenu(0,h.clientHeight);a.add(c.doc,"mousedown",g.hideMenu,g);g.setState("Selected",1);g.isMenuVisible=1},renderMenu:function(){var f=this,e;e=f.settings.control_manager.createDropMenu(f.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:f.settings.icons});e.onHideMenu.add(function(){f.hideMenu();f.focus()});f.onRenderMenu.dispatch(f,e);f.menu=e},hideMenu:function(g){var f=this;if(g&&g.type=="mousedown"&&c.getParent(g.target,function(h){return h.id===f.id||h.id===f.id+"_open"})){return}if(!g||!c.getParent(g.target,".mceMenu")){f.setState("Selected",0);a.remove(c.doc,"mousedown",f.hideMenu,f);if(f.menu){f.menu.hideMenu()}}f.isMenuVisible=0},postRender:function(){var e=this,f=e.settings;a.add(e.id,"click",function(){if(!e.isDisabled()){if(f.onclick){f.onclick(e.value)}e.showMenu()}})}})})(tinymce);(function(b){var c=b.DOM,a=b.dom.Event,d=b.each;b.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(g,f,e){this.parent(g,f,e);this.classPrefix="mceSplitButton"},renderHTML:function(){var i,f=this,g=f.settings,e;i="<tbody><tr>";if(g.image){e=c.createHTML("img ",{src:g.image,role:"presentation","class":"mceAction "+g["class"]})}else{e=c.createHTML("span",{"class":"mceAction "+g["class"]},"")}e+=c.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:f.id+"_voice",style:"display:none;"},g.title);i+="<td >"+c.createHTML("a",{role:"button",id:f.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+g["class"],onclick:"return false;",onmousedown:"return false;",title:g.title},e)+"</td>";e=c.createHTML("span",{"class":"mceOpen "+g["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25BC</span>');i+="<td >"+c.createHTML("a",{role:"button",id:f.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+g["class"],onclick:"return false;",onmousedown:"return false;",title:g.title},e)+"</td>";i+="</tr></tbody>";i=c.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+g["class"],cellpadding:"0",cellspacing:"0",title:g.title},i);return c.createHTML("div",{id:f.id,role:"button",tabindex:"0","aria-labelledby":f.id+"_voice","aria-haspopup":"true"},i)},postRender:function(){var f=this,g=f.settings,e;if(g.onclick){e=function(h){if(!f.isDisabled()){g.onclick(f.value);a.cancel(h)}};a.add(f.id+"_action","click",e);a.add(f.id,["click","keydown"],function(h){var m=32,k=14,i=13,j=38,l=40;if((h.keyCode===32||h.keyCode===13||h.keyCode===14)&&!h.altKey&&!h.ctrlKey&&!h.metaKey){e();a.cancel(h)}else{if(h.type==="click"||h.keyCode===l){f.showMenu();a.cancel(h)}}})}a.add(f.id+"_open","click",function(h){f.showMenu();a.cancel(h)});a.add([f.id,f.id+"_open"],"focus",function(){f._focused=1});a.add([f.id,f.id+"_open"],"blur",function(){f._focused=0});if(b.isIE6||!c.boxModel){a.add(f.id,"mouseover",function(){if(!c.hasClass(f.id,"mceSplitButtonDisabled")){c.addClass(f.id,"mceSplitButtonHover")}});a.add(f.id,"mouseout",function(){if(!c.hasClass(f.id,"mceSplitButtonDisabled")){c.removeClass(f.id,"mceSplitButtonHover")}})}},destroy:function(){this.parent();a.clear(this.id+"_action");a.clear(this.id+"_open");a.clear(this.id)}})})(tinymce);(function(b){var d=b.DOM,a=b.dom.Event,c=b.is,e=b.each;b.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(i,h,f){var g=this;g.parent(i,h,f);g.settings=h=b.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},g.settings);g.onShowMenu=new b.util.Dispatcher(g);g.onHideMenu=new b.util.Dispatcher(g);g.value=h.default_color},showMenu:function(){var f=this,g,j,i,h;if(f.isDisabled()){return}if(!f.isMenuRendered){f.renderMenu();f.isMenuRendered=true}if(f.isMenuVisible){return f.hideMenu()}i=d.get(f.id);d.show(f.id+"_menu");d.addClass(i,"mceSplitButtonSelected");h=d.getPos(i);d.setStyles(f.id+"_menu",{left:h.x,top:h.y+i.clientHeight,zIndex:200000});i=0;a.add(d.doc,"mousedown",f.hideMenu,f);f.onShowMenu.dispatch(f);if(f._focused){f._keyHandler=a.add(f.id+"_menu","keydown",function(k){if(k.keyCode==27){f.hideMenu()}});d.select("a",f.id+"_menu")[0].focus()}f.isMenuVisible=1},hideMenu:function(g){var f=this;if(f.isMenuVisible){if(g&&g.type=="mousedown"&&d.getParent(g.target,function(h){return h.id===f.id+"_open"})){return}if(!g||!d.getParent(g.target,".mceSplitButtonMenu")){d.removeClass(f.id,"mceSplitButtonSelected");a.remove(d.doc,"mousedown",f.hideMenu,f);a.remove(f.id+"_menu","keydown",f._keyHandler);d.hide(f.id+"_menu")}f.isMenuVisible=0;f.onHideMenu.dispatch()}},renderMenu:function(){var p=this,h,k=0,q=p.settings,g,j,l,o,f;o=d.add(q.menu_container,"div",{role:"listbox",id:p.id+"_menu","class":q.menu_class+" "+q["class"],style:"position:absolute;left:0;top:-1000px;"});h=d.add(o,"div",{"class":q["class"]+" mceSplitButtonMenu"});d.add(h,"span",{"class":"mceMenuLine"});g=d.add(h,"table",{role:"presentation","class":"mceColorSplitMenu"});j=d.add(g,"tbody");k=0;e(c(q.colors,"array")?q.colors:q.colors.split(","),function(i){i=i.replace(/^#/,"");if(!k--){l=d.add(j,"tr");k=q.grid_width-1}g=d.add(l,"td");g=d.add(g,"a",{role:"option",href:"javascript:;",style:{backgroundColor:"#"+i},title:p.editor.getLang("colors."+i,i),"data-mce-color":"#"+i});if(p.editor.forcedHighContrastMode){g=d.add(g,"canvas",{width:16,height:16,"aria-hidden":"true"});if(g.getContext&&(f=g.getContext("2d"))){f.fillStyle="#"+i;f.fillRect(0,0,16,16)}else{d.remove(g)}}});if(q.more_colors_func){g=d.add(j,"tr");g=d.add(g,"td",{colspan:q.grid_width,"class":"mceMoreColors"});g=d.add(g,"a",{role:"option",id:p.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},q.more_colors_title);a.add(g,"click",function(i){q.more_colors_func.call(q.more_colors_scope||this);return a.cancel(i)})}d.addClass(h,"mceColorSplitMenu");new b.ui.KeyboardNavigation({root:p.id+"_menu",items:d.select("a",p.id+"_menu"),onCancel:function(){p.hideMenu();p.focus()}});a.add(p.id+"_menu","mousedown",function(i){return a.cancel(i)});a.add(p.id+"_menu","click",function(i){var m;i=d.getParent(i.target,"a",j);if(i&&i.nodeName.toLowerCase()=="a"&&(m=i.getAttribute("data-mce-color"))){p.setColor(m)}return a.cancel(i)});return o},setColor:function(f){this.displayColor(f);this.hideMenu();this.settings.onselect(f)},displayColor:function(g){var f=this;d.setStyle(f.id+"_preview","backgroundColor",g);f.value=g},postRender:function(){var f=this,g=f.id;f.parent();d.add(g+"_action","div",{id:g+"_preview","class":"mceColorPreview"});d.setStyle(f.id+"_preview","backgroundColor",f.value)},destroy:function(){this.parent();a.clear(this.id+"_menu");a.clear(this.id+"_more");d.remove(this.id+"_menu")}})})(tinymce);(function(b){var d=b.DOM,c=b.each,a=b.dom.Event;b.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var e=this,i=[],g=e.controls,j=b.each,f=e.settings;i.push('<div id="'+e.id+'" role="group" aria-labelledby="'+e.id+'_voice">');i.push("<span role='application'>");i.push('<span id="'+e.id+'_voice" class="mceVoiceLabel" style="display:none;">'+d.encode(f.name)+"</span>");j(g,function(h){i.push(h.renderHTML())});i.push("</span>");i.push("</div>");return i.join("")},focus:function(){var e=this;d.get(e.id).focus()},postRender:function(){var f=this,e=[];c(f.controls,function(g){c(g.controls,function(h){if(h.id){e.push(h)}})});f.keyNav=new b.ui.KeyboardNavigation({root:f.id,items:e,onCancel:function(){if(b.isWebKit){d.get(f.editor.id+"_ifr").focus()}f.editor.focus()},excludeFromTabOrder:!f.settings.tab_focus_toolbar})},destroy:function(){var e=this;e.parent();e.keyNav.destroy();a.clear(e.id)}})})(tinymce);(function(a){var c=a.DOM,b=a.each;a.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var m=this,f="",j,k,n=m.settings,e,d,g,l;l=m.controls;for(e=0;e<l.length;e++){k=l[e];d=l[e-1];g=l[e+1];if(e===0){j="mceToolbarStart";if(k.Button){j+=" mceToolbarStartButton"}else{if(k.SplitButton){j+=" mceToolbarStartSplitButton"}else{if(k.ListBox){j+=" mceToolbarStartListBox"}}}f+=c.createHTML("td",{"class":j},c.createHTML("span",null,"<!-- IE -->"))}if(d&&k.ListBox){if(d.Button||d.SplitButton){f+=c.createHTML("td",{"class":"mceToolbarEnd"},c.createHTML("span",null,"<!-- IE -->"))}}if(c.stdMode){f+='<td style="position: relative">'+k.renderHTML()+"</td>"}else{f+="<td>"+k.renderHTML()+"</td>"}if(g&&k.ListBox){if(g.Button||g.SplitButton){f+=c.createHTML("td",{"class":"mceToolbarStart"},c.createHTML("span",null,"<!-- IE -->"))}}}j="mceToolbarEnd";if(k.Button){j+=" mceToolbarEndButton"}else{if(k.SplitButton){j+=" mceToolbarEndSplitButton"}else{if(k.ListBox){j+=" mceToolbarEndListBox"}}}f+=c.createHTML("td",{"class":j},c.createHTML("span",null,"<!-- IE -->"));return c.createHTML("table",{id:m.id,"class":"mceToolbar"+(n["class"]?" "+n["class"]:""),cellpadding:"0",cellspacing:"0",align:m.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+f+"</tr></tbody>")}})})(tinymce);(function(b){var a=b.util.Dispatcher,c=b.each;b.create("tinymce.AddOnManager",{AddOnManager:function(){var d=this;d.items=[];d.urls={};d.lookup={};d.onAdd=new a(d)},get:function(d){if(this.lookup[d]){return this.lookup[d].instance}else{return undefined}},dependencies:function(e){var d;if(this.lookup[e]){d=this.lookup[e].dependencies}return d||[]},requireLangPack:function(e){var d=b.settings;if(d&&d.language&&d.language_load!==false){b.ScriptLoader.add(this.urls[e]+"/langs/"+d.language+".js")}},add:function(f,e,d){this.items.push(e);this.lookup[f]={instance:e,dependencies:d};this.onAdd.dispatch(this,f,e);return e},createUrl:function(d,e){if(typeof e==="object"){return e}else{return{prefix:d.prefix,resource:e,suffix:d.suffix}}},addComponents:function(e,d){var f=this.urls[e];b.each(d,function(g){b.ScriptLoader.add(f+"/"+g)})},load:function(j,f,d,h){var g=this,e=f;function i(){var k=g.dependencies(j);b.each(k,function(l){var m=g.createUrl(f,l);g.load(m.resource,m,undefined,undefined)});if(d){if(h){d.call(h)}else{d.call(b.ScriptLoader)}}}if(g.urls[j]){return}if(typeof f==="object"){e=f.prefix+f.resource+f.suffix}if(e.indexOf("/")!=0&&e.indexOf("://")==-1){e=b.baseURL+"/"+e}g.urls[j]=e.substring(0,e.lastIndexOf("/"));if(g.lookup[j]){i()}else{b.ScriptLoader.add(e,i,h)}}});b.PluginManager=new b.AddOnManager();b.ThemeManager=new b.AddOnManager()}(tinymce));(function(h){var g=h.each,b=h.extend,k=h.DOM,j=h.dom.Event,f=h.ThemeManager,d=h.PluginManager,a=h.explode,i=h.util.Dispatcher,e,c=0;h.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");if(!/[\/\\]$/.test(h.documentBaseURL)){h.documentBaseURL+="/"}h.baseURL=new h.util.URI(h.documentBaseURL).toAbsolute(h.baseURL);h.baseURI=new h.util.URI(h.baseURL);h.onBeforeUnload=new i(h);j.add(window,"beforeunload",function(l){h.onBeforeUnload.dispatch(h,l)});h.onAddEditor=new i(h);h.onRemoveEditor=new i(h);h.EditorManager=b(h,{editors:[],i18n:{},activeEditor:null,init:function(r){var o=this,q,m=h.ScriptLoader,u,p=[],n;function l(x,y,t){var v=x[y];if(!v){return}if(h.is(v,"string")){t=v.replace(/\.\w+$/,"");t=t?h.resolve(t):0;v=h.resolve(v)}return v.apply(t||this,Array.prototype.slice.call(arguments,2))}r=b({theme:"simple",language:"en"},r);o.settings=r;j.add(document,"init",function(){var s,v;l(r,"onpageload");switch(r.mode){case"exact":s=r.elements||"";if(s.length>0){g(a(s),function(x){if(k.get(x)){n=new h.Editor(x,r);p.push(n);n.render(1)}else{g(document.forms,function(y){g(y.elements,function(z){if(z.name===x){x="mce_editor_"+c++;k.setAttrib(z,"id",x);n=new h.Editor(x,r);p.push(n);n.render(1)}})})}})}break;case"textareas":case"specific_textareas":function t(y,x){return x.constructor===RegExp?x.test(y.className):k.hasClass(y,x)}g(k.select("textarea"),function(x){if(r.editor_deselector&&t(x,r.editor_deselector)){return}if(!r.editor_selector||t(x,r.editor_selector)){u=k.get(x.name);if(!x.id&&!u){x.id=x.name}if(!x.id||o.get(x.id)){x.id=k.uniqueId()}n=new h.Editor(x.id,r);p.push(n);n.render(1)}});break}if(r.oninit){s=v=0;g(p,function(x){v++;if(!x.initialized){x.onInit.add(function(){s++;if(s==v){l(r,"oninit")}})}else{s++}if(s==v){l(r,"oninit")}})}})},get:function(l){if(l===e){return this.editors}return this.editors[l]},getInstanceById:function(l){return this.get(l)},add:function(n){var m=this,l=m.editors;l[n.id]=n;l.push(n);m._setActive(n);m.onAddEditor.dispatch(m,n);if(h.adapter){h.adapter.patchEditor(n)}return n},remove:function(m){var o=this,n,l=o.editors;if(!l[m.id]){return null}delete l[m.id];for(n=0;n<l.length;n++){if(l[n]==m){l.splice(n,1);break}}if(o.activeEditor==m){o._setActive(l[0])}m.destroy();o.onRemoveEditor.dispatch(o,m);return m},execCommand:function(r,p,o){var q=this,n=q.get(o),l;switch(r){case"mceFocus":n.focus();return true;case"mceAddEditor":case"mceAddControl":if(!q.get(o)){new h.Editor(o,q.settings).render()}return true;case"mceAddFrameControl":l=o.window;l.tinyMCE=tinyMCE;l.tinymce=h;h.DOM.doc=l.document;h.DOM.win=l;n=new h.Editor(o.element_id,o);n.render();if(h.isIE){function m(){n.destroy();l.detachEvent("onunload",m);l=l.tinyMCE=l.tinymce=null}l.attachEvent("onunload",m)}o.page_window=null;return true;case"mceRemoveEditor":case"mceRemoveControl":if(n){n.remove()}return true;case"mceToggleEditor":if(!n){q.execCommand("mceAddControl",0,o);return true}if(n.isHidden()){n.show()}else{n.hide()}return true}if(q.activeEditor){return q.activeEditor.execCommand(r,p,o)}return false},execInstanceCommand:function(p,o,n,m){var l=this.get(p);if(l){return l.execCommand(o,n,m)}return false},triggerSave:function(){g(this.editors,function(l){l.save()})},addI18n:function(n,q){var l,m=this.i18n;if(!h.is(n,"string")){g(n,function(r,p){g(r,function(t,s){g(t,function(v,u){if(s==="common"){m[p+"."+u]=v}else{m[p+"."+s+"."+u]=v}})})})}else{g(q,function(r,p){m[n+"."+p]=r})}},_setActive:function(l){this.selectedInstance=this.activeEditor=l}})})(tinymce);(function(j){var n=j.DOM,l=j.dom.Event,c=j.extend,k=j.util.Dispatcher,i=j.each,b=j.isGecko,d=j.isIE,e=j.isWebKit,g=j.is,h=j.ThemeManager,f=j.PluginManager,o=j.inArray,m=j.grep,a=j.explode;j.create("tinymce.Editor",{Editor:function(r,q){var p=this;p.id=p.editorId=r;p.execCommands={};p.queryStateCommands={};p.queryValueCommands={};p.isNotDirty=false;p.plugins={};i(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(s){p[s]=new k(p)});p.settings=q=c({id:r,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:j.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:j.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:true,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:true,entity_encoding:"named",url_converter:p.convertURL,url_converter_scope:p,ie7_compat:true},q);p.documentBaseURI=new j.util.URI(q.document_base_url||j.documentBaseURL,{base_uri:tinyMCE.baseURI});p.baseURI=j.baseURI;p.contentCSS=[];p.execCallback("setup",p)},render:function(r){var u=this,v=u.settings,x=u.id,p=j.ScriptLoader;if(!l.domLoaded){l.add(document,"init",function(){u.render()});return}tinyMCE.settings=v;if(!u.getElement()){return}if(j.isIDevice&&!j.isIOS5){return}if(!/TEXTAREA|INPUT/i.test(u.getElement().nodeName)&&v.hidden_input&&n.getParent(x,"form")){n.insertAfter(n.create("input",{type:"hidden",name:x}),x)}if(j.WindowManager){u.windowManager=new j.WindowManager(u)}if(v.encoding=="xml"){u.onGetContent.add(function(s,t){if(t.save){t.content=n.encode(t.content)}})}if(v.add_form_submit_trigger){u.onSubmit.addToTop(function(){if(u.initialized){u.save();u.isNotDirty=1}})}if(v.add_unload_trigger){u._beforeUnload=tinyMCE.onBeforeUnload.add(function(){if(u.initialized&&!u.destroyed&&!u.isHidden()){u.save({format:"raw",no_events:true})}})}j.addUnload(u.destroy,u);if(v.submit_patch){u.onBeforeRenderUI.add(function(){var s=u.getElement().form;if(!s){return}if(s._mceOldSubmit){return}if(!s.submit.nodeType&&!s.submit.length){u.formElement=s;s._mceOldSubmit=s.submit;s.submit=function(){j.triggerSave();u.isNotDirty=1;return u.formElement._mceOldSubmit(u.formElement)}}s=null})}function q(){if(v.language&&v.language_load!==false){p.add(j.baseURL+"/langs/"+v.language+".js")}if(v.theme&&v.theme.charAt(0)!="-"&&!h.urls[v.theme]){h.load(v.theme,"themes/"+v.theme+"/editor_template"+j.suffix+".js")}i(a(v.plugins),function(t){if(t&&!f.urls[t]){if(t.charAt(0)=="-"){t=t.substr(1,t.length);var s=f.dependencies(t);i(s,function(z){var y={prefix:"plugins/",resource:z,suffix:"/editor_plugin"+j.suffix+".js"};var z=f.createUrl(y,z);f.load(z.resource,z)})}else{if(t=="safari"){return}f.load(t,{prefix:"plugins/",resource:t,suffix:"/editor_plugin"+j.suffix+".js"})}}});p.loadQueue(function(){if(!u.removed){u.init()}})}q()},init:function(){var r,H=this,I=H.settings,E,A,D=H.getElement(),q,p,F,x,C,G,y,z=[];j.add(H);I.aria_label=I.aria_label||n.getAttrib(D,"aria-label",H.getLang("aria.rich_text_area"));if(I.theme){I.theme=I.theme.replace(/-/,"");q=h.get(I.theme);H.theme=new q();if(H.theme.init&&I.init_theme){H.theme.init(H,h.urls[I.theme]||j.documentBaseURL.replace(/\/$/,""))}}function B(J){var K=f.get(J),t=f.urls[J]||j.documentBaseURL.replace(/\/$/,""),s;if(K&&j.inArray(z,J)===-1){i(f.dependencies(J),function(u){B(u)});s=new K(H,t);H.plugins[J]=s;if(s.init){s.init(H,t);z.push(J)}}}i(a(I.plugins.replace(/\-/g,"")),B);if(I.popup_css!==false){if(I.popup_css){I.popup_css=H.documentBaseURI.toAbsolute(I.popup_css)}else{I.popup_css=H.baseURI.toAbsolute("themes/"+I.theme+"/skins/"+I.skin+"/dialog.css")}}if(I.popup_css_add){I.popup_css+=","+H.documentBaseURI.toAbsolute(I.popup_css_add)}H.controlManager=new j.ControlManager(H);if(I.custom_undo_redo){H.onBeforeExecCommand.add(function(t,J,u,K,s){if(J!="Undo"&&J!="Redo"&&J!="mceRepaint"&&(!s||!s.skip_undo)){H.undoManager.beforeChange()}});H.onExecCommand.add(function(t,J,u,K,s){if(J!="Undo"&&J!="Redo"&&J!="mceRepaint"&&(!s||!s.skip_undo)){H.undoManager.add()}})}H.onExecCommand.add(function(s,t){if(!/^(FontName|FontSize)$/.test(t)){H.nodeChanged()}});if(b){function v(s,t){if(!t||!t.initial){H.execCommand("mceRepaint")}}H.onUndo.add(v);H.onRedo.add(v);H.onSetContent.add(v)}H.onBeforeRenderUI.dispatch(H,H.controlManager);if(I.render_ui){E=I.width||D.style.width||D.offsetWidth;A=I.height||D.style.height||D.offsetHeight;H.orgDisplay=D.style.display;G=/^[0-9\.]+(|px)$/i;if(G.test(""+E)){E=Math.max(parseInt(E)+(q.deltaWidth||0),100)}if(G.test(""+A)){A=Math.max(parseInt(A)+(q.deltaHeight||0),100)}q=H.theme.renderUI({targetNode:D,width:E,height:A,deltaWidth:I.delta_width,deltaHeight:I.delta_height});H.editorContainer=q.editorContainer}if(document.domain&&location.hostname!=document.domain){j.relaxedDomain=document.domain}if(I.theme_advanced_toolbar_location!="external"){n.setStyles(q.sizeContainer||q.editorContainer,{width:E,height:A})}if(I.content_css){j.each(a(I.content_css),function(s){H.contentCSS.push(H.documentBaseURI.toAbsolute(s))})}A=(q.iframeHeight||A)+(typeof(A)=="number"?(q.deltaHeight||0):"");if(A<100){A=100}H.iframeHTML=I.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';H.iframeHTML+='<base href="'+H.documentBaseURI.getURI()+'" />';if(I.ie7_compat){H.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'}else{H.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />'}H.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(y=0;y<H.contentCSS.length;y++){H.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+H.contentCSS[y]+'" />'}x=I.body_id||"tinymce";if(x.indexOf("=")!=-1){x=H.getParam("body_id","","hash");x=x[H.id]||x}C=I.body_class||"";if(C.indexOf("=")!=-1){C=H.getParam("body_class","","hash");C=C[H.id]||""}H.iframeHTML+='</head><body id="'+x+'" class="mceContentBody '+C+'"><br></body></html>';if(j.relaxedDomain&&(d||(j.isOpera&&parseFloat(opera.version())<11))){F='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+H.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()'}r=n.add(q.iframeContainer,"iframe",{id:H.id+"_ifr",src:F||'javascript:""',frameBorder:"0",allowTransparency:"true",title:I.aria_label,style:{width:"100%",height:A,display:"block"}});H.contentAreaContainer=q.iframeContainer;n.get(q.editorContainer).style.display=H.orgDisplay;n.get(H.id).style.display="none";n.setAttrib(H.id,"aria-hidden",true);if(!j.relaxedDomain||!F){H.setupIframe()}D=r=q=null},setupIframe:function(){var r=this,v=r.settings,x=n.get(r.id),y=r.getDoc(),u,p;if(!d||!j.relaxedDomain){y.open();y.write(r.iframeHTML);y.close();if(j.relaxedDomain){y.domain=j.relaxedDomain}}p=r.getBody();p.disabled=true;if(!v.readonly){p.contentEditable=true}p.disabled=false;r.schema=new j.html.Schema(v);r.dom=new j.dom.DOMUtils(r.getDoc(),{keep_values:true,url_converter:r.convertURL,url_converter_scope:r,hex_colors:v.force_hex_style_colors,class_filter:v.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:r.schema});r.parser=new j.html.DomParser(v,r.schema);if(!r.settings.allow_html_in_named_anchor){r.parser.addAttributeFilter("name",function(t,z){var B=t.length,C,A,s,D;while(B--){D=t[B];if(D.name==="a"&&D.firstChild){s=D.parent;C=D.lastChild;do{A=C.prev;s.insert(C,D);C=A}while(C)}}})}r.parser.addAttributeFilter("src,href,style",function(t,z){var A=t.length,B,D=r.dom,C,s;while(A--){B=t[A];C=B.attr(z);s="data-mce-"+z;if(!B.attributes.map[s]){if(z==="style"){B.attr(s,D.serializeStyle(D.parseStyle(C),B.name))}else{B.attr(s,r.convertURL(C,z,B.name))}}}});r.parser.addNodeFilter("script",function(s,t){var z=s.length,A;while(z--){A=s[z];A.attr("type","mce-"+(A.attr("type")||"text/javascript"))}});r.parser.addNodeFilter("#cdata",function(s,t){var z=s.length,A;while(z--){A=s[z];A.type=8;A.name="#comment";A.value="[CDATA["+A.value+"]]"}});r.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t,z){var A=t.length,B,s=r.schema.getNonEmptyElements();while(A--){B=t[A];if(B.isEmpty(s)){B.empty().append(new j.html.Node("br",1)).shortEnded=true}}});r.serializer=new j.dom.Serializer(v,r.dom,r.schema);r.selection=new j.dom.Selection(r.dom,r.getWin(),r.serializer);r.formatter=new j.Formatter(this);r.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",collapsed:false,styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",collapsed:false,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:false,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",collapsed:false,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:true},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:true},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:false},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:false},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:true,deep:true,onmatch:function(s){return true},onformat:function(z,s,t){i(t,function(B,A){r.dom.setAttrib(z,A,B)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:true,expand:false,block_expand:true,deep:true},{selector:"span",attributes:["style","class"],remove:"empty",split:true,expand:false,deep:true},{selector:"*",attributes:["style","class"],split:false,expand:false,deep:true}]});i("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(s){r.formatter.register(s,{block:s,remove:"all"})});r.formatter.register(r.settings.formats);r.undoManager=new j.UndoManager(r);r.undoManager.onAdd.add(function(t,s){if(t.hasUndo()){return r.onChange.dispatch(r,s,t)}});r.undoManager.onUndo.add(function(t,s){return r.onUndo.dispatch(r,s,t)});r.undoManager.onRedo.add(function(t,s){return r.onRedo.dispatch(r,s,t)});r.forceBlocks=new j.ForceBlocks(r,{forced_root_block:v.forced_root_block});r.editorCommands=new j.EditorCommands(r);r.serializer.onPreProcess.add(function(s,t){return r.onPreProcess.dispatch(r,t,s)});r.serializer.onPostProcess.add(function(s,t){return r.onPostProcess.dispatch(r,t,s)});r.onPreInit.dispatch(r);if(!v.gecko_spellcheck){r.getBody().spellcheck=0}if(!v.readonly){r._addEvents()}r.controlManager.onPostRender.dispatch(r,r.controlManager);r.onPostRender.dispatch(r);r.quirks=new j.util.Quirks(this);if(v.directionality){r.getBody().dir=v.directionality}if(v.nowrap){r.getBody().style.whiteSpace="nowrap"}if(v.handle_node_change_callback){r.onNodeChange.add(function(t,s,z){r.execCallback("handle_node_change_callback",r.id,z,-1,-1,true,r.selection.isCollapsed())})}if(v.save_callback){r.onSaveContent.add(function(s,z){var t=r.execCallback("save_callback",r.id,z.content,r.getBody());if(t){z.content=t}})}if(v.onchange_callback){r.onChange.add(function(t,s){r.execCallback("onchange_callback",r,s)})}if(v.protect){r.onBeforeSetContent.add(function(s,t){if(v.protect){i(v.protect,function(z){t.content=t.content.replace(z,function(A){return"<!--mce:protected "+escape(A)+"-->"})})}})}if(v.convert_newlines_to_brs){r.onBeforeSetContent.add(function(s,t){if(t.initial){t.content=t.content.replace(/\r?\n/g,"<br />")}})}if(v.preformatted){r.onPostProcess.add(function(s,t){t.content=t.content.replace(/^\s*<pre.*?>/,"");t.content=t.content.replace(/<\/pre>\s*$/,"");if(t.set){t.content='<pre class="mceItemHidden">'+t.content+"</pre>"}})}if(v.verify_css_classes){r.serializer.attribValueFilter=function(B,z){var A,t;if(B=="class"){if(!r.classesRE){t=r.dom.getClasses();if(t.length>0){A="";i(t,function(s){A+=(A?"|":"")+s["class"]});r.classesRE=new RegExp("("+A+")","gi")}}return !r.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(z)||r.classesRE.test(z)?z:""}return z}}if(v.cleanup_callback){r.onBeforeSetContent.add(function(s,t){t.content=r.execCallback("cleanup_callback","insert_to_editor",t.content,t)});r.onPreProcess.add(function(s,t){if(t.set){r.execCallback("cleanup_callback","insert_to_editor_dom",t.node,t)}if(t.get){r.execCallback("cleanup_callback","get_from_editor_dom",t.node,t)}});r.onPostProcess.add(function(s,t){if(t.set){t.content=r.execCallback("cleanup_callback","insert_to_editor",t.content,t)}if(t.get){t.content=r.execCallback("cleanup_callback","get_from_editor",t.content,t)}})}if(v.save_callback){r.onGetContent.add(function(s,t){if(t.save){t.content=r.execCallback("save_callback",r.id,t.content,r.getBody())}})}if(v.handle_event_callback){r.onEvent.add(function(s,t,z){if(r.execCallback("handle_event_callback",t,s,z)===false){l.cancel(t)}})}r.onSetContent.add(function(){r.addVisual(r.getBody())});if(v.padd_empty_editor){r.onPostProcess.add(function(s,t){t.content=t.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")})}if(b){function q(s,t){i(s.dom.select("a"),function(A){var z=A.parentNode;if(s.dom.isBlock(z)&&z.lastChild===A){s.dom.add(z,"br",{"data-mce-bogus":1})}})}r.onExecCommand.add(function(s,t){if(t==="CreateLink"){q(s)}});r.onSetContent.add(r.selection.onSetContent.add(q))}r.load({initial:true,format:"html"});r.startContent=r.getContent({format:"raw"});r.undoManager.add();r.initialized=true;r.onInit.dispatch(r);r.execCallback("setupcontent_callback",r.id,r.getBody(),r.getDoc());r.execCallback("init_instance_callback",r);r.focus(true);r.nodeChanged({initial:1});i(r.contentCSS,function(s){r.dom.loadCSS(s)});if(v.auto_focus){setTimeout(function(){var s=j.get(v.auto_focus);s.selection.select(s.getBody(),1);s.selection.collapse(1);s.getBody().focus();s.getWin().focus()},100)}l.add(!b?r.getWin():r.getDoc(),"blur",function(s){r.onDeactivate.dispatch(r,s)});l.add(!b?r.getWin():r.getDoc(),"focus",function(s){r.onActivate.dispatch(r,s)});x=null},focus:function(u){var y,r=this,q=r.selection,x=r.settings.content_editable,s,p,v=r.getDoc();if(!u){s=q.getRng();if(s.item){p=s.item(0)}r._refreshContentEditable();q.normalize();if(!x){r.getWin().focus()}if(j.isGecko){r.getBody().focus()}if(p&&p.ownerDocument==v){s=v.body.createControlRange();s.addElement(p);s.select()}}j._setActive(r)},execCallback:function(u){var p=this,r=p.settings[u],q;if(!r){return}if(p.callbackLookup&&(q=p.callbackLookup[u])){r=q.func;q=q.scope}if(g(r,"string")){q=r.replace(/\.\w+$/,"");q=q?j.resolve(q):0;r=j.resolve(r);p.callbackLookup=p.callbackLookup||{};p.callbackLookup[u]={func:r,scope:q}}return r.apply(q||p,Array.prototype.slice.call(arguments,1))},translate:function(p){var r=this.settings.language||"en",q=j.i18n;if(!p){return""}return q[r+"."+p]||p.replace(/{\#([^}]+)\}/g,function(t,s){return q[r+"."+s]||"{#"+s+"}"})},getLang:function(q,p){return j.i18n[(this.settings.language||"en")+"."+q]||(g(p)?p:"{#"+q+"}")},getParam:function(u,r,p){var s=j.trim,q=g(this.settings[u])?this.settings[u]:r,t;if(p==="hash"){t={};if(g(q,"string")){i(q.indexOf("=")>0?q.split(/[;,](?![^=;,]*(?:[;,]|$))/):q.split(","),function(x){x=x.split("=");if(x.length>1){t[s(x[0])]=s(x[1])}else{t[s(x[0])]=s(x)}})}else{t=q}return t}return q},nodeChanged:function(r){var p=this,q=p.selection,u=q.getStart()||p.getBody();if(p.initialized){r=r||{};u=d&&u.ownerDocument!=p.getDoc()?p.getBody():u;r.parents=[];p.dom.getParent(u,function(s){if(s.nodeName=="BODY"){return true}r.parents.push(s)});p.onNodeChange.dispatch(p,r?r.controlManager||p.controlManager:p.controlManager,u,q.isCollapsed(),r)}},addButton:function(r,q){var p=this;p.buttons=p.buttons||{};p.buttons[r]=q},addCommand:function(p,r,q){this.execCommands[p]={func:r,scope:q||this}},addQueryStateHandler:function(p,r,q){this.queryStateCommands[p]={func:r,scope:q||this}},addQueryValueHandler:function(p,r,q){this.queryValueCommands[p]={func:r,scope:q||this}},addShortcut:function(r,u,p,s){var q=this,v;if(!q.settings.custom_shortcuts){return false}q.shortcuts=q.shortcuts||{};if(g(p,"string")){v=p;p=function(){q.execCommand(v,false,null)}}if(g(p,"object")){v=p;p=function(){q.execCommand(v[0],v[1],v[2])}}i(a(r),function(t){var x={func:p,scope:s||this,desc:u,alt:false,ctrl:false,shift:false};i(a(t,"+"),function(y){switch(y){case"alt":case"ctrl":case"shift":x[y]=true;break;default:x.charCode=y.charCodeAt(0);x.keyCode=y.toUpperCase().charCodeAt(0)}});q.shortcuts[(x.ctrl?"ctrl":"")+","+(x.alt?"alt":"")+","+(x.shift?"shift":"")+","+x.keyCode]=x});return true},execCommand:function(x,v,z,p){var r=this,u=0,y,q;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(x)&&(!p||!p.skip_focus)){r.focus()}y={};r.onBeforeExecCommand.dispatch(r,x,v,z,y);if(y.terminate){return false}if(r.execCallback("execcommand_callback",r.id,r.selection.getNode(),x,v,z)){r.onExecCommand.dispatch(r,x,v,z,p);return true}if(y=r.execCommands[x]){q=y.func.call(y.scope,v,z);if(q!==true){r.onExecCommand.dispatch(r,x,v,z,p);return q}}i(r.plugins,function(s){if(s.execCommand&&s.execCommand(x,v,z)){r.onExecCommand.dispatch(r,x,v,z,p);u=1;return false}});if(u){return true}if(r.theme&&r.theme.execCommand&&r.theme.execCommand(x,v,z)){r.onExecCommand.dispatch(r,x,v,z,p);return true}if(r.editorCommands.execCommand(x,v,z)){r.onExecCommand.dispatch(r,x,v,z,p);return true}r.getDoc().execCommand(x,v,z);r.onExecCommand.dispatch(r,x,v,z,p)},queryCommandState:function(u){var q=this,v,r;if(q._isHidden()){return}if(v=q.queryStateCommands[u]){r=v.func.call(v.scope);if(r!==true){return r}}v=q.editorCommands.queryCommandState(u);if(v!==-1){return v}try{return this.getDoc().queryCommandState(u)}catch(p){}},queryCommandValue:function(v){var q=this,u,r;if(q._isHidden()){return}if(u=q.queryValueCommands[v]){r=u.func.call(u.scope);if(r!==true){return r}}u=q.editorCommands.queryCommandValue(v);if(g(u)){return u}try{return this.getDoc().queryCommandValue(v)}catch(p){}},show:function(){var p=this;n.show(p.getContainer());n.hide(p.id);p.load()},hide:function(){var p=this,q=p.getDoc();if(d&&q){q.execCommand("SelectAll")}p.save();n.hide(p.getContainer());n.setStyle(p.id,"display",p.orgDisplay)},isHidden:function(){return !n.isHidden(this.id)},setProgressState:function(p,q,r){this.onSetProgressState.dispatch(this,p,q,r);return p},load:function(s){var p=this,r=p.getElement(),q;if(r){s=s||{};s.load=true;q=p.setContent(g(r.value)?r.value:r.innerHTML,s);s.element=r;if(!s.no_events){p.onLoadContent.dispatch(p,s)}s.element=r=null;return q}},save:function(u){var p=this,s=p.getElement(),q,r;if(!s||!p.initialized){return}u=u||{};u.save=true;if(!u.no_events){p.undoManager.typing=false;p.undoManager.add()}u.element=s;q=u.content=p.getContent(u);if(!u.no_events){p.onSaveContent.dispatch(p,u)}q=u.content;if(!/TEXTAREA|INPUT/i.test(s.nodeName)){s.innerHTML=q;if(r=n.getParent(p.id,"form")){i(r.elements,function(t){if(t.name==p.id){t.value=q;return false}})}}else{s.value=q}u.element=s=null;return q},setContent:function(u,s){var q=this,t,p=q.getBody(),r;s=s||{};s.format=s.format||"html";s.set=true;s.content=u;if(!s.no_events){q.onBeforeSetContent.dispatch(q,s)}u=s.content;if(!j.isIE&&(u.length===0||/^\s+$/.test(u))){r=q.settings.forced_root_block;if(r){u="<"+r+'><br data-mce-bogus="1"></'+r+">"}else{u='<br data-mce-bogus="1">'}p.innerHTML=u;q.selection.select(p,true);q.selection.collapse(true);return}if(s.format!=="raw"){u=new j.html.Serializer({},q.schema).serialize(q.parser.parse(u))}s.content=j.trim(u);q.dom.setHTML(p,s.content);if(!s.no_events){q.onSetContent.dispatch(q,s)}q.selection.normalize();return s.content},getContent:function(q){var p=this,r;q=q||{};q.format=q.format||"html";q.get=true;if(!q.no_events){p.onBeforeGetContent.dispatch(p,q)}if(q.format=="raw"){r=p.getBody().innerHTML}else{r=p.serializer.serialize(p.getBody(),q)}q.content=j.trim(r);if(!q.no_events){p.onGetContent.dispatch(p,q)}return q.content},isDirty:function(){var p=this;return j.trim(p.startContent)!=j.trim(p.getContent({format:"raw",no_events:1}))&&!p.isNotDirty},getContainer:function(){var p=this;if(!p.container){p.container=n.get(p.editorContainer||p.id+"_parent")}return p.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return n.get(this.settings.content_element||this.id)},getWin:function(){var p=this,q;if(!p.contentWindow){q=n.get(p.id+"_ifr");if(q){p.contentWindow=q.contentWindow}}return p.contentWindow},getDoc:function(){var q=this,p;if(!q.contentDocument){p=q.getWin();if(p){q.contentDocument=p.document}}return q.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(p,x,v){var q=this,r=q.settings;if(r.urlconverter_callback){return q.execCallback("urlconverter_callback",p,v,true,x)}if(!r.convert_urls||(v&&v.nodeName=="LINK")||p.indexOf("file:")===0){return p}if(r.relative_urls){return q.documentBaseURI.toRelative(p)}p=q.documentBaseURI.toAbsolute(p,r.remove_script_host);return p},addVisual:function(r){var p=this,q=p.settings;r=r||p.getBody();if(!g(p.hasVisual)){p.hasVisual=q.visual}i(p.dom.select("table,a",r),function(t){var s;switch(t.nodeName){case"TABLE":s=p.dom.getAttrib(t,"border");if(!s||s=="0"){if(p.hasVisual){p.dom.addClass(t,q.visual_table_class)}else{p.dom.removeClass(t,q.visual_table_class)}}return;case"A":s=p.dom.getAttrib(t,"name");if(s){if(p.hasVisual){p.dom.addClass(t,"mceItemAnchor")}else{p.dom.removeClass(t,"mceItemAnchor")}}return}});p.onVisualAid.dispatch(p,r,p.hasVisual)},remove:function(){var p=this,q=p.getContainer();p.removed=1;p.hide();p.execCallback("remove_instance_callback",p);p.onRemove.dispatch(p);p.onExecCommand.listeners=[];j.remove(p);n.remove(q)},destroy:function(q){var p=this;if(p.destroyed){return}if(!q){j.removeUnload(p.destroy);tinyMCE.onBeforeUnload.remove(p._beforeUnload);if(p.theme&&p.theme.destroy){p.theme.destroy()}p.controlManager.destroy();p.selection.destroy();p.dom.destroy();if(!p.settings.content_editable){l.clear(p.getWin());l.clear(p.getDoc())}l.clear(p.getBody());l.clear(p.formElement)}if(p.formElement){p.formElement.submit=p.formElement._mceOldSubmit;p.formElement._mceOldSubmit=null}p.contentAreaContainer=p.formElement=p.container=p.settings.content_element=p.bodyElement=p.contentDocument=p.contentWindow=null;if(p.selection){p.selection=p.selection.win=p.selection.dom=p.selection.dom.doc=null}p.destroyed=1},_addEvents:function(){var A=this,r,C=A.settings,q=A.dom,v={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};function p(t,D){var s=t.type;if(A.removed){return}if(A.onEvent.dispatch(A,t,D)!==false){A[v[t.fakeType||t.type]].dispatch(A,t,D)}}i(v,function(t,s){switch(s){case"contextmenu":q.bind(A.getDoc(),s,p);break;case"paste":q.bind(A.getBody(),s,function(D){p(D)});break;case"submit":case"reset":q.bind(A.getElement().form||n.getParent(A.id,"form"),s,p);break;default:q.bind(C.content_editable?A.getBody():A.getDoc(),s,p)}});q.bind(C.content_editable?A.getBody():(b?A.getDoc():A.getWin()),"focus",function(s){A.focus(true)});if(j.isGecko){q.bind(A.getDoc(),"DOMNodeInserted",function(t){var s;t=t.target;if(t.nodeType===1&&t.nodeName==="IMG"&&(s=t.getAttribute("data-mce-src"))){t.src=A.documentBaseURI.toAbsolute(s)}})}if(b){function u(){var E=this,G=E.getDoc(),F=E.settings;if(b&&!F.readonly){E._refreshContentEditable();try{G.execCommand("styleWithCSS",0,false)}catch(D){if(!E._isHidden()){try{G.execCommand("useCSS",0,true)}catch(D){}}}if(!F.table_inline_editing){try{G.execCommand("enableInlineTableEditing",false,false)}catch(D){}}if(!F.object_resizing){try{G.execCommand("enableObjectResizing",false,false)}catch(D){}}}}A.onBeforeExecCommand.add(u);A.onMouseDown.add(u)}A.onMouseUp.add(A.nodeChanged);A.onKeyUp.add(function(s,t){var D=t.keyCode;if((D>=33&&D<=36)||(D>=37&&D<=40)||D==13||D==45||D==46||D==8||(j.isMac&&(D==91||D==93))||t.ctrlKey){A.nodeChanged()}});A.onKeyDown.add(function(t,D){if(D.keyCode!=8){return}var F=t.selection.getRng().startContainer;var E=t.selection.getRng().startOffset;while(F&&F.nodeType&&F.nodeType!=1&&F.parentNode){F=F.parentNode}if(F&&F.parentNode&&F.parentNode.tagName==="BLOCKQUOTE"&&F.parentNode.firstChild==F&&E==0){t.formatter.toggle("blockquote",null,F.parentNode);var s=t.selection.getRng();s.setStart(F,0);s.setEnd(F,0);t.selection.setRng(s);t.selection.collapse(false)}});A.onReset.add(function(){A.setContent(A.startContent,{format:"raw"})});if(C.custom_shortcuts){if(C.custom_undo_redo_keyboard_shortcuts){A.addShortcut("ctrl+z",A.getLang("undo_desc"),"Undo");A.addShortcut("ctrl+y",A.getLang("redo_desc"),"Redo")}A.addShortcut("ctrl+b",A.getLang("bold_desc"),"Bold");A.addShortcut("ctrl+i",A.getLang("italic_desc"),"Italic");A.addShortcut("ctrl+u",A.getLang("underline_desc"),"Underline");for(r=1;r<=6;r++){A.addShortcut("ctrl+"+r,"",["FormatBlock",false,"h"+r])}A.addShortcut("ctrl+7","",["FormatBlock",false,"p"]);A.addShortcut("ctrl+8","",["FormatBlock",false,"div"]);A.addShortcut("ctrl+9","",["FormatBlock",false,"address"]);function x(t){var s=null;if(!t.altKey&&!t.ctrlKey&&!t.metaKey){return s}i(A.shortcuts,function(D){if(j.isMac&&D.ctrl!=t.metaKey){return}else{if(!j.isMac&&D.ctrl!=t.ctrlKey){return}}if(D.alt!=t.altKey){return}if(D.shift!=t.shiftKey){return}if(t.keyCode==D.keyCode||(t.charCode&&t.charCode==D.charCode)){s=D;return false}});return s}A.onKeyUp.add(function(s,t){var D=x(t);if(D){return l.cancel(t)}});A.onKeyPress.add(function(s,t){var D=x(t);if(D){return l.cancel(t)}});A.onKeyDown.add(function(s,t){var D=x(t);if(D){D.func.call(D.scope);return l.cancel(t)}})}if(j.isIE){q.bind(A.getDoc(),"controlselect",function(D){var t=A.resizeInfo,s;D=D.target;if(D.nodeName!=="IMG"){return}if(t){q.unbind(t.node,t.ev,t.cb)}if(!q.hasClass(D,"mceItemNoResize")){ev="resizeend";s=q.bind(D,ev,function(F){var E;F=F.target;if(E=q.getStyle(F,"width")){q.setAttrib(F,"width",E.replace(/[^0-9%]+/g,""));q.setStyle(F,"width","")}if(E=q.getStyle(F,"height")){q.setAttrib(F,"height",E.replace(/[^0-9%]+/g,""));q.setStyle(F,"height","")}})}else{ev="resizestart";s=q.bind(D,"resizestart",l.cancel,l)}t=A.resizeInfo={node:D,ev:ev,cb:s}})}if(j.isOpera){A.onClick.add(function(s,t){l.prevent(t)})}if(C.custom_undo_redo){function B(){A.undoManager.typing=false;A.undoManager.add()}q.bind(A.getDoc(),"focusout",function(s){if(!A.removed&&A.undoManager.typing){B()}});A.dom.bind(A.dom.getRoot(),"dragend",function(s){B()});A.onKeyUp.add(function(s,t){var D=t.keyCode;if((D>=33&&D<=36)||(D>=37&&D<=40)||D==13||D==45||t.ctrlKey){B()}});A.onKeyDown.add(function(s,D){var E=D.keyCode,t;if(E==8){t=A.getDoc().selection;if(t&&t.createRange&&t.createRange().item){A.undoManager.beforeChange();s.dom.remove(t.createRange().item(0));B();return l.cancel(D)}}if((E>=33&&E<=36)||(E>=37&&E<=40)||E==13||E==45){if(j.isIE&&E==13){A.undoManager.beforeChange()}if(A.undoManager.typing){B()}return}if((E<16||E>20)&&E!=224&&E!=91&&!A.undoManager.typing){A.undoManager.beforeChange();A.undoManager.typing=true;A.undoManager.add()}});A.onMouseDown.add(function(){if(A.undoManager.typing){B()}})}if(j.isGecko){function y(){var s=A.dom.getAttribs(A.selection.getStart().cloneNode(false));return function(){var t=A.selection.getStart();if(t!==A.getBody()){A.dom.setAttrib(t,"style",null);i(s,function(D){t.setAttributeNode(D.cloneNode(true))})}}}function z(){var t=A.selection;return !t.isCollapsed()&&t.getStart()!=t.getEnd()}A.onKeyPress.add(function(s,D){var t;if((D.keyCode==8||D.keyCode==46)&&z()){t=y();A.getDoc().execCommand("delete",false,null);t();return l.cancel(D)}});A.dom.bind(A.getDoc(),"cut",function(t){var s;if(z()){s=y();A.onKeyUp.addToTop(l.cancel,l);setTimeout(function(){s();A.onKeyUp.remove(l.cancel,l)},0)}})}},_refreshContentEditable:function(){var r=this,p,q;if(r._isHidden()){p=r.getBody();q=p.parentNode;q.removeChild(p);q.appendChild(p);p.focus()}},_isHidden:function(){var p;if(!b){return 0}p=this.selection.getSel();return(!p||!p.rangeCount||p.rangeCount==0)}})})(tinymce);(function(a){var d=a.each,e,b=true,c=false;a.EditorCommands=function(f){var i=f.dom,u=f.selection,k={state:{},exec:{},value:{}},g=f.settings,q=f.formatter,m;function r(z,y,x){var v;z=z.toLowerCase();if(v=k.exec[z]){v(z,y,x);return b}return c}function h(x){var v;x=x.toLowerCase();if(v=k.state[x]){return v(x)}return -1}function l(x){var v;x=x.toLowerCase();if(v=k.value[x]){return v(x)}return c}function p(v,x){x=x||"exec";d(v,function(y,z){d(z.toLowerCase().split(","),function(A){k[x][A]=y})})}a.extend(this,{execCommand:r,queryCommandState:h,queryCommandValue:l,addCommands:p});function o(y,x,v){if(x===e){x=c}if(v===e){v=null}return f.getDoc().execCommand(y,x,v)}function t(v){return q.match(v)}function s(v,x){q.toggle(v,x?{value:x}:e)}function j(v){m=u.getBookmark(v)}function n(){u.moveToBookmark(m)}p({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){f.undoManager.add()},"Cut,Copy,Paste":function(z){var y=f.getDoc(),x;try{o(z)}catch(v){x=b}if(x||!y.queryCommandSupported(z)){if(a.isGecko){f.windowManager.confirm(f.getLang("clipboard_msg"),function(A){if(A){open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}})}else{f.windowManager.alert(f.getLang("clipboard_no_support"))}}},unlink:function(v){if(u.isCollapsed()){u.select(u.getNode())}o(v);u.collapse(c)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(v){var x=v.substring(7);d("left,center,right,full".split(","),function(y){if(x!=y){q.remove("align"+y)}});s("align"+x);r("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(y){var v,x;o(y);v=i.getParent(u.getNode(),"ol,ul");if(v){x=v.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(x.nodeName)){j();i.split(x,v);n()}}},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(v){s(v)},"ForeColor,HiliteColor,FontName":function(y,x,v){s(y,v)},FontSize:function(A,y,x){var v,z;if(x>=1&&x<=7){z=a.explode(g.font_size_style_values);v=a.explode(g.font_size_classes);if(v){x=v[x-1]||x}else{x=z[x-1]||x}}s(A,x)},RemoveFormat:function(v){q.remove(v)},mceBlockQuote:function(v){s("blockquote")},FormatBlock:function(y,x,v){return s(v||"p")},mceCleanup:function(){var v=u.getBookmark();f.setContent(f.getContent({cleanup:b}),{cleanup:b});u.moveToBookmark(v)},mceRemoveNode:function(z,y,x){var v=x||u.getNode();if(v!=f.getBody()){j();f.dom.remove(v,b);n()}},mceSelectNodeDepth:function(z,y,x){var v=0;i.getParent(u.getNode(),function(A){if(A.nodeType==1&&v++==x){u.select(A);return c}},f.getBody())},mceSelectNode:function(y,x,v){u.select(v)},mceInsertContent:function(C,I,J){var G,M,A,E,y,F,B,D,K,x,z,L,v,H;G=f.parser;M=new a.html.Serializer({},f.schema);v='<span id="mce_marker" data-mce-type="bookmark">\uFEFF</span>';F={content:J,format:"html"};u.onBeforeSetContent.dispatch(u,F);J=F.content;if(J.indexOf("{$caret}")==-1){J+="{$caret}"}J=J.replace(/\{\$caret\}/,v);if(!u.isCollapsed()){f.getDoc().execCommand("Delete",false,null)}A=u.getNode();F={context:A.nodeName.toLowerCase()};y=G.parse(J,F);z=y.lastChild;if(z.attr("id")=="mce_marker"){B=z;for(z=z.prev;z;z=z.walk(true)){if(z.type==3||!i.isBlock(z.name)){z.parent.insert(B,z,z.name==="br");break}}}if(!F.invalid){J=M.serialize(y);z=A.firstChild;L=A.lastChild;if(!z||(z===L&&z.nodeName==="BR")){i.setHTML(A,J)}else{u.setContent(J)}}else{u.setContent(v);A=f.selection.getNode();E=f.getBody();if(A.nodeType==9){A=z=E}else{z=A}while(z!==E){A=z;z=z.parentNode}J=A==E?E.innerHTML:i.getOuterHTML(A);J=M.serialize(G.parse(J.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return M.serialize(y)})));if(A==E){i.setHTML(E,J)}else{i.setOuterHTML(A,J)}}B=i.get("mce_marker");D=i.getRect(B);K=i.getViewPort(f.getWin());if((D.y+D.h>K.y+K.h||D.y<K.y)||(D.x>K.x+K.w||D.x<K.x)){H=a.isIE?f.getDoc().documentElement:f.getBody();H.scrollLeft=D.x;H.scrollTop=D.y-K.h+25}x=i.createRng();z=B.previousSibling;if(z&&z.nodeType==3){x.setStart(z,z.nodeValue.length)}else{x.setStartBefore(B);x.setEndBefore(B)}i.remove(B);u.setRng(x);u.onSetContent.dispatch(u,F);f.addVisual()},mceInsertRawHTML:function(y,x,v){u.setContent("tiny_mce_marker");f.setContent(f.getContent().replace(/tiny_mce_marker/g,function(){return v}))},mceSetContent:function(y,x,v){f.setContent(v)},"Indent,Outdent":function(z){var x,v,y;x=g.indentation;v=/[a-z%]+$/i.exec(x);x=parseInt(x);if(!h("InsertUnorderedList")&&!h("InsertOrderedList")){d(u.getSelectedBlocks(),function(A){if(z=="outdent"){y=Math.max(0,parseInt(A.style.paddingLeft||0)-x);i.setStyle(A,"paddingLeft",y?y+v:"")}else{i.setStyle(A,"paddingLeft",(parseInt(A.style.paddingLeft||0)+x)+v)}})}else{o(z)}},mceRepaint:function(){var x;if(a.isGecko){try{j(b);if(u.getSel()){u.getSel().selectAllChildren(f.getBody())}u.collapse(b);n()}catch(v){}}},mceToggleFormat:function(y,x,v){q.toggle(v)},InsertHorizontalRule:function(){f.execCommand("mceInsertContent",false,"<hr />")},mceToggleVisualAid:function(){f.hasVisual=!f.hasVisual;f.addVisual()},mceReplaceContent:function(y,x,v){f.execCommand("mceInsertContent",false,v.replace(/\{\$selection\}/g,u.getContent({format:"text"})))},mceInsertLink:function(z,y,x){var v;if(typeof(x)=="string"){x={href:x}}v=i.getParent(u.getNode(),"a");x.href=x.href.replace(" ","%20");if(!v||!x.href){q.remove("link")}if(x.href){q.apply("link",x,v)}},selectAll:function(){var x=i.getRoot(),v=i.createRng();v.setStart(x,0);v.setEnd(x,x.childNodes.length);f.selection.setRng(v)}});p({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(v){return t("align"+v.substring(7))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(v){return t(v)},mceBlockQuote:function(){return t("blockquote")},Outdent:function(){var v;if(g.inline_styles){if((v=i.getParent(u.getStart(),i.isBlock))&&parseInt(v.style.paddingLeft)>0){return b}if((v=i.getParent(u.getEnd(),i.isBlock))&&parseInt(v.style.paddingLeft)>0){return b}}return h("InsertUnorderedList")||h("InsertOrderedList")||(!g.inline_styles&&!!i.getParent(u.getNode(),"BLOCKQUOTE"))},"InsertUnorderedList,InsertOrderedList":function(v){return i.getParent(u.getNode(),v=="insertunorderedlist"?"UL":"OL")}},"state");p({"FontSize,FontName":function(y){var x=0,v;if(v=i.getParent(u.getNode(),"span")){if(y=="fontsize"){x=v.style.fontSize}else{x=v.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()}}return x}},"value");if(g.custom_undo_redo){p({Undo:function(){f.undoManager.undo()},Redo:function(){f.undoManager.redo()}})}}})(tinymce);(function(b){var a=b.util.Dispatcher;b.UndoManager=function(d){var c,e=0,h=[],f;function g(){return b.trim(d.getContent({format:"raw",no_events:1}))}return c={typing:false,onAdd:new a(c),onUndo:new a(c),onRedo:new a(c),beforeChange:function(){f=d.selection.getBookmark(2,true)},add:function(m){var j,k=d.settings,l;m=m||{};m.content=g();l=h[e];if(l&&l.content==m.content){return null}if(h[e]){h[e].beforeBookmark=f}if(k.custom_undo_redo_levels){if(h.length>k.custom_undo_redo_levels){for(j=0;j<h.length-1;j++){h[j]=h[j+1]}h.length--;e=h.length}}m.bookmark=d.selection.getBookmark(2,true);if(e<h.length-1){h.length=e+1}h.push(m);e=h.length-1;c.onAdd.dispatch(c,m);d.isNotDirty=0;return m},undo:function(){var k,j;if(c.typing){c.add();c.typing=false}if(e>0){k=h[--e];d.setContent(k.content,{format:"raw"});d.selection.moveToBookmark(k.beforeBookmark);c.onUndo.dispatch(c,k)}return k},redo:function(){var i;if(e<h.length-1){i=h[++e];d.setContent(i.content,{format:"raw"});d.selection.moveToBookmark(i.bookmark);c.onRedo.dispatch(c,i)}return i},clear:function(){h=[];e=0;c.typing=false},hasUndo:function(){return e>0||this.typing},hasRedo:function(){return e<h.length-1&&!this.typing}}}})(tinymce);(function(k){var l=k.dom.Event,d=k.isIE,a=k.isGecko,c=k.isOpera,i=k.each,b=k.extend,e=true,h=false;function j(o){var p,n,m;do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(o.nodeName)){if(p){n=o.cloneNode(false);n.appendChild(p);p=n}else{p=m=o.cloneNode(false)}p.removeAttribute("id")}}while(o=o.parentNode);if(p){return{wrapper:p,inner:m}}}function g(n,o){var m=o.ownerDocument.createRange();m.setStart(n.endContainer,n.endOffset);m.setEndAfter(o);return m.cloneContents().textContent.length==0}function f(n,q,m){var o,p;if(q.isEmpty(m)){o=q.getParent(m,"ul,ol");if(!q.getParent(o.parentNode,"ul,ol")){q.split(o,m);p=q.create("p",0,'<br data-mce-bogus="1" />');q.replace(p,m);n.select(p,1)}return h}return e}k.create("tinymce.ForceBlocks",{ForceBlocks:function(m){var n=this,o=m.settings,p;n.editor=m;n.dom=m.dom;p=(o.forced_root_block||"p").toLowerCase();o.element=p.toUpperCase();m.onPreInit.add(n.setup,n)},setup:function(){var p=this,o=p.editor,q=o.settings,v=o.dom,n=o.selection,m=o.schema.getBlockElements();if(q.forced_root_block){function r(){var x=n.getStart(),C=o.getBody(),s,B,t,F,E,y,A,z=-16777215;if(!x||x.nodeType!==1){return}while(x!=C){if(m[x.nodeName]){return}x=x.parentNode}s=n.getRng();if(s.setStart){B=s.startContainer;t=s.startOffset;F=s.endContainer;E=s.endOffset}else{if(s.item){s=o.getDoc().body.createTextRange();s.moveToElementText(s.item(0))}tmpRng=s.duplicate();tmpRng.collapse(true);t=tmpRng.move("character",z)*-1;if(!tmpRng.collapsed){tmpRng=s.duplicate();tmpRng.collapse(false);E=(tmpRng.move("character",z)*-1)-t}}for(x=C.firstChild;x;x){if(x.nodeType===3||(x.nodeType==1&&!m[x.nodeName])){if(!y){y=v.create(q.forced_root_block);x.parentNode.insertBefore(y,x)}A=x;x=x.nextSibling;y.appendChild(A)}else{y=null;x=x.nextSibling}}if(s.setStart){s.setStart(B,t);s.setEnd(F,E);n.setRng(s)}else{try{s=o.getDoc().body.createTextRange();s.moveToElementText(C);s.collapse(true);s.moveStart("character",t);if(E>0){s.moveEnd("character",E)}s.select()}catch(D){}}o.nodeChanged()}o.onKeyUp.add(r);o.onClick.add(r)}if(q.force_br_newlines){if(d){o.onKeyPress.add(function(s,t){var x;if(t.keyCode==13&&n.getNode().nodeName!="LI"){n.setContent('<br id="__" /> ',{format:"raw"});x=v.get("__");x.removeAttribute("id");n.select(x);n.collapse();return l.cancel(t)}})}}if(q.force_p_newlines){if(!d){o.onKeyPress.add(function(s,t){if(t.keyCode==13&&!t.shiftKey&&!p.insertPara(t)){l.cancel(t)}})}else{k.addUnload(function(){p._previousFormats=0});o.onKeyPress.add(function(s,t){p._previousFormats=0;if(t.keyCode==13&&!t.shiftKey&&s.selection.isCollapsed()&&q.keep_styles){p._previousFormats=j(s.selection.getStart())}});o.onKeyUp.add(function(x,y){if(y.keyCode==13&&!y.shiftKey){var t=x.selection.getStart(),s=p._previousFormats;if(!t.hasChildNodes()&&s){t=v.getParent(t,v.isBlock);if(t&&t.nodeName!="LI"){t.innerHTML="";if(p._previousFormats){t.appendChild(s.wrapper);s.inner.innerHTML="\uFEFF"}else{t.innerHTML="\uFEFF"}n.select(t,1);n.collapse(true);x.getDoc().execCommand("Delete",false,null);p._previousFormats=0}}}})}if(a){o.onKeyDown.add(function(s,t){if((t.keyCode==8||t.keyCode==46)&&!t.shiftKey){p.backspaceDelete(t,t.keyCode==8)}})}}if(k.isWebKit){function u(x){var t=n.getRng(),y,A=v.create("div",null," "),z,s=v.getViewPort(x.getWin()).h;t.insertNode(y=v.create("br"));t.setStartAfter(y);t.setEndAfter(y);n.setRng(t);if(n.getSel().focusNode==y.previousSibling){n.select(v.insertAfter(v.doc.createTextNode("\u00a0"),y));n.collapse(e)}v.insertAfter(A,y);z=v.getPos(A).y;v.remove(A);if(z>s){x.getWin().scrollTo(0,z)}}o.onKeyPress.add(function(s,t){if(t.keyCode==13&&(t.shiftKey||(q.force_br_newlines&&!v.getParent(n.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul")))){u(s);l.cancel(t)}})}if(d){if(q.element!="P"){o.onKeyPress.add(function(s,t){p.lastElm=n.getNode().nodeName});o.onKeyUp.add(function(t,x){var z,y=n.getNode(),s=t.getBody();if(s.childNodes.length===1&&y.nodeName=="P"){y=v.rename(y,q.element);n.select(y);n.collapse();t.nodeChanged()}else{if(x.keyCode==13&&!x.shiftKey&&p.lastElm!="P"){z=v.getParent(y,"p");if(z){v.rename(z,q.element);t.nodeChanged()}}}})}}},getParentBlock:function(o){var m=this.dom;return m.getParent(o,m.isBlock)},insertPara:function(Q){var E=this,v=E.editor,N=v.dom,R=v.getDoc(),V=v.settings,F=v.selection.getSel(),G=F.getRangeAt(0),U=R.body;var J,K,H,O,M,q,o,u,z,m,C,T,p,x,I,L=N.getViewPort(v.getWin()),B,D,A;v.undoManager.beforeChange();J=R.createRange();J.setStart(F.anchorNode,F.anchorOffset);J.collapse(e);K=R.createRange();K.setStart(F.focusNode,F.focusOffset);K.collapse(e);H=J.compareBoundaryPoints(J.START_TO_END,K)<0;O=H?F.anchorNode:F.focusNode;M=H?F.anchorOffset:F.focusOffset;q=H?F.focusNode:F.anchorNode;o=H?F.focusOffset:F.anchorOffset;if(O===q&&/^(TD|TH)$/.test(O.nodeName)){if(O.firstChild.nodeName=="BR"){N.remove(O.firstChild)}if(O.childNodes.length==0){v.dom.add(O,V.element,null,"<br />");T=v.dom.add(O,V.element,null,"<br />")}else{I=O.innerHTML;O.innerHTML="";v.dom.add(O,V.element,null,I);T=v.dom.add(O,V.element,null,"<br />")}G=R.createRange();G.selectNodeContents(T);G.collapse(1);v.selection.setRng(G);return h}if(O==U&&q==U&&U.firstChild&&v.dom.isBlock(U.firstChild)){O=q=O.firstChild;M=o=0;J=R.createRange();J.setStart(O,0);K=R.createRange();K.setStart(q,0)}if(!R.body.hasChildNodes()){R.body.appendChild(N.create("br"))}O=O.nodeName=="HTML"?R.body:O;O=O.nodeName=="BODY"?O.firstChild:O;q=q.nodeName=="HTML"?R.body:q;q=q.nodeName=="BODY"?q.firstChild:q;u=E.getParentBlock(O);z=E.getParentBlock(q);m=u?u.nodeName:V.element;if(I=E.dom.getParent(u,"li,pre")){if(I.nodeName=="LI"){return f(v.selection,E.dom,I)}return e}if(u&&(u.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(N.getStyle(u,"position",1)))){m=V.element;u=null}if(z&&(z.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(N.getStyle(u,"position",1)))){m=V.element;z=null}if(/(TD|TABLE|TH|CAPTION)/.test(m)||(u&&m=="DIV"&&/left|right/gi.test(N.getStyle(u,"float",1)))){m=V.element;u=z=null}C=(u&&u.nodeName==m)?u.cloneNode(0):v.dom.create(m);T=(z&&z.nodeName==m)?z.cloneNode(0):v.dom.create(m);T.removeAttribute("id");if(/^(H[1-6])$/.test(m)&&g(G,u)){T=v.dom.create(V.element)}I=p=O;do{if(I==U||I.nodeType==9||E.dom.isBlock(I)||/(TD|TABLE|TH|CAPTION)/.test(I.nodeName)){break}p=I}while((I=I.previousSibling?I.previousSibling:I.parentNode));I=x=q;do{if(I==U||I.nodeType==9||E.dom.isBlock(I)||/(TD|TABLE|TH|CAPTION)/.test(I.nodeName)){break}x=I}while((I=I.nextSibling?I.nextSibling:I.parentNode));if(p.nodeName==m){J.setStart(p,0)}else{J.setStartBefore(p)}J.setEnd(O,M);C.appendChild(J.cloneContents()||R.createTextNode(""));try{K.setEndAfter(x)}catch(P){}K.setStart(q,o);T.appendChild(K.cloneContents()||R.createTextNode(""));G=R.createRange();if(!p.previousSibling&&p.parentNode.nodeName==m){G.setStartBefore(p.parentNode)}else{if(J.startContainer.nodeName==m&&J.startOffset==0){G.setStartBefore(J.startContainer)}else{G.setStart(J.startContainer,J.startOffset)}}if(!x.nextSibling&&x.parentNode.nodeName==m){G.setEndAfter(x.parentNode)}else{G.setEnd(K.endContainer,K.endOffset)}G.deleteContents();if(c){v.getWin().scrollTo(0,L.y)}if(C.firstChild&&C.firstChild.nodeName==m){C.innerHTML=C.firstChild.innerHTML}if(T.firstChild&&T.firstChild.nodeName==m){T.innerHTML=T.firstChild.innerHTML}function S(y,s){var r=[],X,W,t;y.innerHTML="";if(V.keep_styles){W=s;do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(W.nodeName)){X=W.cloneNode(h);N.setAttrib(X,"id","");r.push(X)}}while(W=W.parentNode)}if(r.length>0){for(t=r.length-1,X=y;t>=0;t--){X=X.appendChild(r[t])}r[0].innerHTML=c?"\u00a0":"<br />";return r[0]}else{y.innerHTML=c?"\u00a0":"<br />"}}if(N.isEmpty(C)){S(C,O)}if(N.isEmpty(T)){A=S(T,q)}if(c&&parseFloat(opera.version())<9.5){G.insertNode(C);G.insertNode(T)}else{G.insertNode(T);G.insertNode(C)}T.normalize();C.normalize();v.selection.select(T,true);v.selection.collapse(true);B=v.dom.getPos(T).y;if(B<L.y||B+25>L.y+L.h){v.getWin().scrollTo(0,B<L.y?B:B-L.h+25)}v.undoManager.add();return h},backspaceDelete:function(u,B){var C=this,q=C.editor,y=q.getBody(),p=q.dom,o,s=q.selection,m=s.getRng(),x=m.startContainer,o,z,A,v;if(!B&&m.collapsed&&x.nodeType==1&&m.startOffset==x.childNodes.length){v=new k.dom.TreeWalker(x.lastChild,x);for(o=x.lastChild;o;o=v.prev()){if(o.nodeType==3){m.setStart(o,o.nodeValue.length);m.collapse(true);s.setRng(m);return}}}if(x&&q.dom.isBlock(x)&&!/^(TD|TH)$/.test(x.nodeName)&&B){if(x.childNodes.length==0||(x.childNodes.length==1&&x.firstChild.nodeName=="BR")){o=x;while((o=o.previousSibling)&&!q.dom.isBlock(o)){}if(o){if(x!=y.firstChild){z=q.dom.doc.createTreeWalker(o,NodeFilter.SHOW_TEXT,null,h);while(A=z.nextNode()){o=A}m=q.getDoc().createRange();m.setStart(o,o.nodeValue?o.nodeValue.length:0);m.setEnd(o,o.nodeValue?o.nodeValue.length:0);s.setRng(m);q.dom.remove(x)}return l.cancel(u)}}}}})})(tinymce);(function(b){var c=b.DOM,a=b.dom.Event,d=b.each,e=b.extend;b.create("tinymce.ControlManager",{ControlManager:function(f,j){var h=this,g;j=j||{};h.editor=f;h.controls={};h.onAdd=new b.util.Dispatcher(h);h.onPostRender=new b.util.Dispatcher(h);h.prefix=j.prefix||f.id+"_";h._cls={};h.onPostRender.add(function(){d(h.controls,function(i){i.postRender()})})},get:function(f){return this.controls[this.prefix+f]||this.controls[f]},setActive:function(h,f){var g=null;if(g=this.get(h)){g.setActive(f)}return g},setDisabled:function(h,f){var g=null;if(g=this.get(h)){g.setDisabled(f)}return g},add:function(g){var f=this;if(g){f.controls[g.id]=g;f.onAdd.dispatch(g,f)}return g},createControl:function(i){var h,g=this,f=g.editor;d(f.plugins,function(j){if(j.createControl){h=j.createControl(i,g);if(h){return false}}});switch(i){case"|":case"separator":return g.createSeparator()}if(!h&&f.buttons&&(h=f.buttons[i])){return g.createButton(i,h)}return g.add(h)},createDropMenu:function(f,n,h){var m=this,i=m.editor,j,g,k,l;n=e({"class":"mceDropDown",constrain:i.settings.constrain_menus},n);n["class"]=n["class"]+" "+i.getParam("skin")+"Skin";if(k=i.getParam("skin_variant")){n["class"]+=" "+i.getParam("skin")+"Skin"+k.substring(0,1).toUpperCase()+k.substring(1)}f=m.prefix+f;l=h||m._cls.dropmenu||b.ui.DropMenu;j=m.controls[f]=new l(f,n);j.onAddItem.add(function(r,q){var p=q.settings;p.title=i.getLang(p.title,p.title);if(!p.onclick){p.onclick=function(o){if(p.cmd){i.execCommand(p.cmd,p.ui||false,p.value)}}}});i.onRemove.add(function(){j.destroy()});if(b.isIE){j.onShowMenu.add(function(){i.focus();g=i.selection.getBookmark(1)});j.onHideMenu.add(function(){if(g){i.selection.moveToBookmark(g);g=0}})}return m.add(j)},createListBox:function(f,n,i){var m=this,j=m.editor,h,k,l;if(m.get(f)){return null}n.title=j.translate(n.title);n.scope=n.scope||j;if(!n.onselect){n.onselect=function(o){j.execCommand(n.cmd,n.ui||false,o||n.value)}}n=e({title:n.title,"class":"mce_"+f,scope:n.scope,control_manager:m},n);f=m.prefix+f;function g(o){return o.settings.use_accessible_selects&&!b.isGecko}if(j.settings.use_native_selects||g(j)){k=new b.ui.NativeListBox(f,n)}else{l=i||m._cls.listbox||b.ui.ListBox;k=new l(f,n,j)}m.controls[f]=k;if(b.isWebKit){k.onPostRender.add(function(p,o){a.add(o,"mousedown",function(){j.bookmark=j.selection.getBookmark(1)});a.add(o,"focus",function(){j.selection.moveToBookmark(j.bookmark);j.bookmark=null})})}if(k.hideMenu){j.onMouseDown.add(k.hideMenu,k)}return m.add(k)},createButton:function(m,i,l){var h=this,g=h.editor,j,k,f;if(h.get(m)){return null}i.title=g.translate(i.title);i.label=g.translate(i.label);i.scope=i.scope||g;if(!i.onclick&&!i.menu_button){i.onclick=function(){g.execCommand(i.cmd,i.ui||false,i.value)}}i=e({title:i.title,"class":"mce_"+m,unavailable_prefix:g.getLang("unavailable",""),scope:i.scope,control_manager:h},i);m=h.prefix+m;if(i.menu_button){f=l||h._cls.menubutton||b.ui.MenuButton;k=new f(m,i,g);g.onMouseDown.add(k.hideMenu,k)}else{f=h._cls.button||b.ui.Button;k=new f(m,i,g)}return h.add(k)},createMenuButton:function(h,f,g){f=f||{};f.menu_button=1;return this.createButton(h,f,g)},createSplitButton:function(m,i,l){var h=this,g=h.editor,j,k,f;if(h.get(m)){return null}i.title=g.translate(i.title);i.scope=i.scope||g;if(!i.onclick){i.onclick=function(n){g.execCommand(i.cmd,i.ui||false,n||i.value)}}if(!i.onselect){i.onselect=function(n){g.execCommand(i.cmd,i.ui||false,n||i.value)}}i=e({title:i.title,"class":"mce_"+m,scope:i.scope,control_manager:h},i);m=h.prefix+m;f=l||h._cls.splitbutton||b.ui.SplitButton;k=h.add(new f(m,i,g));g.onMouseDown.add(k.hideMenu,k);return k},createColorSplitButton:function(f,n,i){var m=this,j=m.editor,h,k,l,g;if(m.get(f)){return null}n.title=j.translate(n.title);n.scope=n.scope||j;if(!n.onclick){n.onclick=function(o){if(b.isIE){g=j.selection.getBookmark(1)}j.execCommand(n.cmd,n.ui||false,o||n.value)}}if(!n.onselect){n.onselect=function(o){j.execCommand(n.cmd,n.ui||false,o||n.value)}}n=e({title:n.title,"class":"mce_"+f,menu_class:j.getParam("skin")+"Skin",scope:n.scope,more_colors_title:j.getLang("more_colors")},n);f=m.prefix+f;l=i||m._cls.colorsplitbutton||b.ui.ColorSplitButton;k=new l(f,n,j);j.onMouseDown.add(k.hideMenu,k);j.onRemove.add(function(){k.destroy()});if(b.isIE){k.onShowMenu.add(function(){j.focus();g=j.selection.getBookmark(1)});k.onHideMenu.add(function(){if(g){j.selection.moveToBookmark(g);g=0}})}return m.add(k)},createToolbar:function(k,h,j){var i,g=this,f;k=g.prefix+k;f=j||g._cls.toolbar||b.ui.Toolbar;i=new f(k,h,g.editor);if(g.get(k)){return null}return g.add(i)},createToolbarGroup:function(k,h,j){var i,g=this,f;k=g.prefix+k;f=j||this._cls.toolbarGroup||b.ui.ToolbarGroup;i=new f(k,h,g.editor);if(g.get(k)){return null}return g.add(i)},createSeparator:function(g){var f=g||this._cls.separator||b.ui.Separator;return new f()},setControlType:function(g,f){return this._cls[g.toLowerCase()]=f},destroy:function(){d(this.controls,function(f){f.destroy()});this.controls=null}})})(tinymce);(function(b){var a=b.util.Dispatcher,e=b.each,d=b.isIE,c=b.isOpera;b.create("tinymce.WindowManager",{WindowManager:function(f){var g=this;g.editor=f;g.onOpen=new a(g);g.onClose=new a(g);g.params={};g.features={}},open:function(z,h){var v=this,k="",n,m,i=v.editor.settings.dialog_type=="modal",q,o,j,g=b.DOM.getViewPort(),r;z=z||{};h=h||{};o=c?g.w:screen.width;j=c?g.h:screen.height;z.name=z.name||"mc_"+new Date().getTime();z.width=parseInt(z.width||320);z.height=parseInt(z.height||240);z.resizable=true;z.left=z.left||parseInt(o/2)-(z.width/2);z.top=z.top||parseInt(j/2)-(z.height/2);h.inline=false;h.mce_width=z.width;h.mce_height=z.height;h.mce_auto_focus=z.auto_focus;if(i){if(d){z.center=true;z.help=false;z.dialogWidth=z.width+"px";z.dialogHeight=z.height+"px";z.scroll=z.scrollbars||false}}e(z,function(p,f){if(b.is(p,"boolean")){p=p?"yes":"no"}if(!/^(name|url)$/.test(f)){if(d&&i){k+=(k?";":"")+f+":"+p}else{k+=(k?",":"")+f+"="+p}}});v.features=z;v.params=h;v.onOpen.dispatch(v,z,h);r=z.url||z.file;r=b._addVer(r);try{if(d&&i){q=1;window.showModalDialog(r,window,k)}else{q=window.open(r,z.name,k)}}catch(l){}if(!q){alert(v.editor.getLang("popup_blocked"))}},close:function(f){f.close();this.onClose.dispatch(this)},createInstance:function(i,h,g,m,l,k){var j=b.resolve(i);return new j(h,g,m,l,k)},confirm:function(h,f,i,g){g=g||window;f.call(i||this,g.confirm(this._decode(this.editor.getLang(h,h))))},alert:function(h,f,j,g){var i=this;g=g||window;g.alert(i._decode(i.editor.getLang(h,h)));if(f){f.call(j||i)}},resizeBy:function(f,g,h){h.resizeBy(f,g)},_decode:function(f){return b.DOM.decode(f).replace(/\\n/g,"\n")}})}(tinymce));(function(a){a.Formatter=function(U){var i={},M=a.each,c=U.dom,G=U.selection,E=a.dom.TreeWalker,j=new a.dom.RangeUtils(c),d=U.schema.isValidChild,B=c.isBlock,k=U.settings.forced_root_block,q=c.nodeIndex,u="\uFEFF",e=/^(src|href|style)$/,R=false,A=true,H;function y(V){return V instanceof Array}function l(W,V){return c.getParents(W,V,c.getRoot())}function b(V){return V.nodeType===1&&(V.face==="mceinline"||V.style.fontFamily==="mceinline")}function Q(V){return V?i[V]:i}function K(V,W){if(V){if(typeof(V)!=="string"){M(V,function(Y,X){K(X,Y)})}else{W=W.length?W:[W];M(W,function(X){if(X.deep===H){X.deep=!X.selector}if(X.split===H){X.split=!X.selector||X.inline}if(X.remove===H&&X.selector&&!X.inline){X.remove="none"}if(X.selector&&X.inline){X.mixed=true;X.block_expand=true}if(typeof(X.classes)==="string"){X.classes=X.classes.split(/\s+/)}});i[V]=W}}}var N=function(W){var V;U.dom.getParent(W,function(X){V=U.dom.getStyle(X,"text-decoration");return V&&V!=="none"});return V};var I=function(V){var W;if(V.nodeType===1&&V.parentNode&&V.parentNode.nodeType===1){W=N(V.parentNode);if(U.dom.getStyle(V,"color")&&W){U.dom.setStyle(V,"text-decoration",W)}else{if(U.dom.getStyle(V,"textdecoration")===W){U.dom.setStyle(V,"text-decoration",null)}}}};function S(Y,ag,ab){var ad=Q(Y),ai=ad[0],af,W,ae,ac=G.isCollapsed();function Z(ak){var am=ak.startContainer,ao=ak.startOffset,an,al;if(am.nodeType==1||am.nodeValue===""){am=am.nodeType==1?am.childNodes[ao]:am;if(am){an=new E(am,am.parentNode);for(al=an.current();al;al=an.next()){if(al.nodeType==3&&!P(al)){ak.setStart(al,0);break}}}}return ak}function V(al,ak){ak=ak||ai;if(al){if(ak.onformat){ak.onformat(al,ak,ag,ab)}M(ak.styles,function(an,am){c.setStyle(al,am,p(an,ag))});M(ak.attributes,function(an,am){c.setAttrib(al,am,p(an,ag))});M(ak.classes,function(am){am=p(am,ag);if(!c.hasClass(al,am)){c.addClass(al,am)}})}}function aa(){function ao(at,aq){var ar=new E(aq);for(ab=ar.current();ab;ab=ar.prev()){if(ab.childNodes.length>1||ab==at){return ab}}}var am=U.selection.getRng();var ap=am.startContainer;var al=am.endContainer;if(ap!=al&&am.endOffset==0){var ak=ao(ap,al);var an=ak.nodeType==3?ak.length:ak.childNodes.length;am.setEnd(ak,an)}return am}function X(al,aq,ao,am,at){var ak=[],ap=-1,ar,av=-1,an=-1,au;M(al.childNodes,function(ax,aw){if(ax.nodeName==="UL"||ax.nodeName==="OL"){ap=aw;ar=ax;return false}});M(al.childNodes,function(ax,aw){if(ax.nodeName==="SPAN"&&c.getAttrib(ax,"data-mce-type")=="bookmark"){if(ax.id==aq.id+"_start"){av=aw}else{if(ax.id==aq.id+"_end"){an=aw}}}});if(ap<=0||(av<ap&&an>ap)){M(a.grep(al.childNodes),at);return 0}else{au=ao.cloneNode(R);M(a.grep(al.childNodes),function(ax,aw){if((av<ap&&aw<ap)||(av>ap&&aw>ap)){ak.push(ax);ax.parentNode.removeChild(ax)}});if(av<ap){al.insertBefore(au,ar)}else{if(av>ap){al.insertBefore(au,ar.nextSibling)}}am.push(au);M(ak,function(aw){au.appendChild(aw)});return au}}function ah(ak,am,ap){var an=[],ao,al;ao=ai.inline||ai.block;al=c.create(ao);V(al);j.walk(ak,function(aq){var ar;function at(au){var ax=au.nodeName.toLowerCase(),aw=au.parentNode.nodeName.toLowerCase(),av;if(f(ax,"br")){ar=0;if(ai.block){c.remove(au)}return}if(ai.wrapper&&t(au,Y,ag)){ar=0;return}if(ai.block&&!ai.wrapper&&C(ax)){au=c.rename(au,ao);V(au);an.push(au);ar=0;return}if(ai.selector){M(ad,function(ay){if("collapsed" in ay&&ay.collapsed!==ac){return}if(c.is(au,ay.selector)&&!b(au)){V(au,ay);av=true}});if(!ai.inline||av){ar=0;return}}if(d(ao,ax)&&d(aw,ao)&&!(!ap&&au.nodeType===3&&au.nodeValue.length===1&&au.nodeValue.charCodeAt(0)===65279)&&au.id!=="_mce_caret"){if(!ar){ar=al.cloneNode(R);au.parentNode.insertBefore(ar,au);an.push(ar)}ar.appendChild(au)}else{if(ax=="li"&&am){ar=X(au,am,al,an,at)}else{ar=0;M(a.grep(au.childNodes),at);ar=0}}}M(aq,at)});if(ai.wrap_links===false){M(an,function(aq){function ar(aw){var av,au,at;if(aw.nodeName==="A"){au=al.cloneNode(R);an.push(au);at=a.grep(aw.childNodes);for(av=0;av<at.length;av++){au.appendChild(at[av])}aw.appendChild(au)}M(a.grep(aw.childNodes),ar)}ar(aq)})}M(an,function(at){var aq;function au(aw){var av=0;M(aw.childNodes,function(ax){if(!P(ax)&&!F(ax)){av++}});return av}function ar(av){var ax,aw;M(av.childNodes,function(ay){if(ay.nodeType==1&&!F(ay)&&!b(ay)){ax=ay;return R}});if(ax&&g(ax,ai)){aw=ax.cloneNode(R);V(aw);c.replace(aw,av,A);c.remove(ax,1)}return aw||av}aq=au(at);if((an.length>1||!B(at))&&aq===0){c.remove(at,1);return}if(ai.inline||ai.wrapper){if(!ai.exact&&aq===1){at=ar(at)}M(ad,function(av){M(c.select(av.inline,at),function(ax){var aw;if(av.wrap_links===false){aw=ax.parentNode;do{if(aw.nodeName==="A"){return}}while(aw=aw.parentNode)}T(av,ag,ax,av.exact?ax:null)})});if(t(at.parentNode,Y,ag)){c.remove(at,1);at=0;return A}if(ai.merge_with_parents){c.getParent(at.parentNode,function(av){if(t(av,Y,ag)){c.remove(at,1);at=0;return A}})}if(at&&ai.merge_siblings!==false){at=D(s(at),at);at=D(at,s(at,A))}}})}if(ai){if(ab){if(ab.nodeType){W=c.createRng();W.setStartBefore(ab);W.setEndAfter(ab);ah(o(W,ad),null,true)}else{ah(ab,null,true)}}else{if(!ac||!ai.inline||c.select("td.mceSelected,th.mceSelected").length){var aj=U.selection.getNode();U.selection.setRng(aa());af=G.getBookmark();ah(o(G.getRng(A),ad),af);if(ai.styles&&(ai.styles.color||ai.styles.textDecoration)){a.walk(aj,I,"childNodes");I(aj)}G.moveToBookmark(af);G.setRng(Z(G.getRng(A)));U.nodeChanged()}else{O("apply",Y,ag)}}}}function x(X,ag,Z){var ab=Q(X),aj=ab[0],af,ad,W;function Y(ak){var ao=ak.startContainer,aq=ak.startOffset,ap,an,am,al;if(ao.nodeType==3&&aq>=ao.nodeValue.length-1){ao=ao.parentNode;aq=q(ao)+1}if(ao.nodeType==1){am=ao.childNodes;ao=am[Math.min(aq,am.length-1)];ap=new E(ao);if(aq>am.length-1){ap.next()}for(an=ap.current();an;an=ap.next()){if(an.nodeType==3&&!P(an)){al=c.create("a",null,u);an.parentNode.insertBefore(al,an);ak.setStart(an,0);G.setRng(ak);c.remove(al);return}}}}function ae(an){var am,al,ak;am=a.grep(an.childNodes);for(al=0,ak=ab.length;al<ak;al++){if(T(ab[al],ag,an,an)){break}}if(aj.deep){for(al=0,ak=am.length;al<ak;al++){ae(am[al])}}}function ac(al){var ak;M(l(al.parentNode).reverse(),function(am){var an;if(!ak&&am.id!="_start"&&am.id!="_end"){an=t(am,X,ag);if(an&&an.split!==false){ak=am}}});return ak}function V(am,aq,ak,ar){var au,at,ap,ao,an,al;if(am){al=am.parentNode;for(au=aq.parentNode;au&&au!=al;au=au.parentNode){at=au.cloneNode(R);for(an=0;an<ab.length;an++){if(T(ab[an],ag,at,at)){at=0;break}}if(at){if(ap){at.appendChild(ap)}if(!ao){ao=at}ap=at}}if(ar&&(!aj.mixed||!B(am))){aq=c.split(am,aq)}if(ap){ak.parentNode.insertBefore(ap,ak);ao.appendChild(ak)}}return aq}function ah(ak){return V(ac(ak),ak,ak,true)}function aa(am){var al=c.get(am?"_start":"_end"),ak=al[am?"firstChild":"lastChild"];if(F(ak)){ak=ak[am?"firstChild":"lastChild"]}c.remove(al,true);return ak}function ai(am){var al,ak;am=o(am,ab,A);if(aj.split){al=n(am,A);ak=n(am);if(al!=ak){al=L(al,"span",{id:"_start","data-mce-type":"bookmark"});ak=L(ak,"span",{id:"_end","data-mce-type":"bookmark"});ah(al);ah(ak);al=aa(A);ak=aa()}else{al=ak=ah(al)}am.startContainer=al.parentNode;am.startOffset=q(al);am.endContainer=ak.parentNode;am.endOffset=q(ak)+1}j.walk(am,function(an){M(an,function(ao){ae(ao);if(ao.nodeType===1&&U.dom.getStyle(ao,"text-decoration")==="underline"&&ao.parentNode&&N(ao.parentNode)==="underline"){T({deep:false,exact:true,inline:"span",styles:{textDecoration:"underline"}},null,ao)}})})}if(Z){if(Z.nodeType){W=c.createRng();W.setStartBefore(Z);W.setEndAfter(Z);ai(W)}else{ai(Z)}return}if(!G.isCollapsed()||!aj.inline||c.select("td.mceSelected,th.mceSelected").length){af=G.getBookmark();ai(G.getRng(A));G.moveToBookmark(af);if(aj.inline&&h(X,ag,G.getStart())){Y(G.getRng(true))}U.nodeChanged()}else{O("remove",X,ag)}if(a.isWebKit){U.execCommand("mceCleanup")}}function v(W,Y,X){var V=Q(W);if(h(W,Y,X)&&(!("toggle" in V[0])||V[0]["toggle"])){x(W,Y,X)}else{S(W,Y,X)}}function t(W,V,ab,Z){var Y=Q(V),ad,aa,X;function ac(ah,ak,aj){var ag,ai,ae=ak[aj],af;if(ak.onmatch){return ak.onmatch(ah,ak,aj)}if(ae){if(ae.length===H){for(ag in ae){if(ae.hasOwnProperty(ag)){if(aj==="attributes"){ai=c.getAttrib(ah,ag)}else{ai=J(ah,ag)}if(Z&&!ai&&!ak.exact){return}if((!Z||ak.exact)&&!f(ai,p(ae[ag],ab))){return}}}}else{for(af=0;af<ae.length;af++){if(aj==="attributes"?c.getAttrib(ah,ae[af]):J(ah,ae[af])){return ak}}}}return ak}if(Y&&W){for(aa=0;aa<Y.length;aa++){ad=Y[aa];if(g(W,ad)&&ac(W,ad,"attributes")&&ac(W,ad,"styles")){if(X=ad.classes){for(aa=0;aa<X.length;aa++){if(!c.hasClass(W,X[aa])){return}}}return ad}}}}function h(W,Z,Y){var X;function V(aa){aa=c.getParent(aa,function(ab){return !!t(ab,W,Z,true)});return t(aa,W,Z)}if(Y){return V(Y)}Y=G.getNode();if(V(Y)){return A}X=G.getStart();if(X!=Y){if(V(X)){return A}}return R}function r(ac,ab){var X,V=[],W={},aa,Z,Y;X=G.getStart();c.getParent(X,function(af){var ae,ad;for(ae=0;ae<ac.length;ae++){ad=ac[ae];if(!W[ad]&&t(af,ad,ab)){W[ad]=true;V.push(ad)}}});return V}function z(X){var ab=Q(X),aa,Z,Y,W,V;if(ab){aa=G.getStart();Z=l(aa);for(W=ab.length-1;W>=0;W--){V=ab[W].selector;if(!V){return A}for(Y=Z.length-1;Y>=0;Y--){if(c.is(Z[Y],V)){return A}}}}return R}a.extend(this,{get:Q,register:K,apply:S,remove:x,toggle:v,match:h,matchAll:r,matchNode:t,canApply:z});function g(V,W){if(f(V,W.inline)){return A}if(f(V,W.block)){return A}if(W.selector){return c.is(V,W.selector)}}function f(W,V){W=W||"";V=V||"";W=""+(W.nodeName||W);V=""+(V.nodeName||V);return W.toLowerCase()==V.toLowerCase()}function J(W,V){var X=c.getStyle(W,V);if(V=="color"||V=="backgroundColor"){X=c.toHex(X)}if(V=="fontWeight"&&X==700){X="bold"}return""+X}function p(V,W){if(typeof(V)!="string"){V=V(W)}else{if(W){V=V.replace(/%(\w+)/g,function(Y,X){return W[X]||Y})}}return V}function P(V){return V&&V.nodeType===3&&/^([\t \r\n]+|)$/.test(V.nodeValue)}function L(X,W,V){var Y=c.create(W,V);X.parentNode.insertBefore(Y,X);Y.appendChild(X);return Y}function o(V,ak,Y){var aa=V.startContainer,W=V.startOffset,ag=V.endContainer,ae=V.endOffset,ai,aj,ac,af;function ah(aq){var ao,am,ap,an,al;ao=am=aq?aa:ag;al=aq?"previousSibling":"nextSibling";root=c.getRoot();if(ao.nodeType==3&&!P(ao)){if(aq?W>0:ae<ao.nodeValue.length){return ao}}for(;;){if(am==root||(!ak[0].block_expand&&B(am))){return am}for(an=am[al];an;an=an[al]){if(!F(an)&&!P(an)){return am}}am=am.parentNode}return ao}function X(al,am){if(am===H){am=al.nodeType===3?al.length:al.childNodes.length}while(al&&al.hasChildNodes()){al=al.childNodes[am];if(al){am=al.nodeType===3?al.length:al.childNodes.length}}return{node:al,offset:am}}if(aa.nodeType==1&&aa.hasChildNodes()){aj=aa.childNodes.length-1;aa=aa.childNodes[W>aj?aj:W];if(aa.nodeType==3){W=0}}if(ag.nodeType==1&&ag.hasChildNodes()){aj=ag.childNodes.length-1;ag=ag.childNodes[ae>aj?aj:ae-1];if(ag.nodeType==3){ae=ag.nodeValue.length}}if(F(aa.parentNode)||F(aa)){aa=F(aa)?aa:aa.parentNode;aa=aa.nextSibling||aa;if(aa.nodeType==3){W=0}}if(F(ag.parentNode)||F(ag)){ag=F(ag)?ag:ag.parentNode;ag=ag.previousSibling||ag;if(ag.nodeType==3){ae=ag.length}}if(ak[0].inline){if(V.collapsed){function ad(an,aq,at){var ap,am,ar,al;function ao(av,ax){var ay,au,aw=av.nodeValue;if(typeof(ax)=="undefined"){ax=at?aw.length:0}if(at){ay=aw.lastIndexOf(" ",ax);au=aw.lastIndexOf("\u00a0",ax);ay=ay>au?ay:au;if(ay!==-1&&!Y){ay++}}else{ay=aw.indexOf(" ",ax);au=aw.indexOf("\u00a0",ax);ay=ay!==-1&&(au===-1||ay<au)?ay:au}return ay}if(an.nodeType===3){ar=ao(an,aq);if(ar!==-1){return{container:an,offset:ar}}al=an}ap=new E(an,c.getParent(an,B)||U.getBody());while(am=ap[at?"prev":"next"]()){if(am.nodeType===3){al=am;ar=ao(am);if(ar!==-1){return{container:am,offset:ar}}}else{if(B(am)){break}}}if(al){if(at){aq=0}else{aq=al.length}return{container:al,offset:aq}}}af=ad(aa,W,true);if(af){aa=af.container;W=af.offset}af=ad(ag,ae);if(af){ag=af.container;ae=af.offset}}ac=X(ag,ae);if(ac.node){while(ac.node&&ac.offset===0&&ac.node.previousSibling){ac=X(ac.node.previousSibling)}if(ac.node&&ac.offset>0&&ac.node.nodeType===3&&ac.node.nodeValue.charAt(ac.offset-1)===" "){if(ac.offset>1){ag=ac.node;ag.splitText(ac.offset-1)}else{if(ac.node.previousSibling){}}}}}if(ak[0].inline||ak[0].block_expand){if(!ak[0].inline||(aa.nodeType!=3||W===0)){aa=ah(true)}if(!ak[0].inline||(ag.nodeType!=3||ae===ag.nodeValue.length)){ag=ah()}}if(ak[0].selector&&ak[0].expand!==R&&!ak[0].inline){function ab(ao,ap){var an,am,aq,al;if(ao.nodeType==3&&ao.nodeValue.length==0&&ao[ap]){ao=ao[ap]}an=l(ao);for(am=0;am<an.length;am++){for(aq=0;aq<ak.length;aq++){al=ak[aq];if("collapsed" in al&&al.collapsed!==V.collapsed){continue}if(c.is(an[am],al.selector)){return an[am]}}}return ao}aa=ab(aa,"previousSibling");ag=ab(ag,"nextSibling")}if(ak[0].block||ak[0].selector){function Z(an,ao,al){var am;if(!ak[0].wrapper){am=c.getParent(an,ak[0].block)}if(!am){am=c.getParent(an.nodeType==3?an.parentNode:an,B)}if(am&&ak[0].wrapper){am=l(am,"ul,ol").reverse()[0]||am}if(!am){am=an;while(am[ao]&&!B(am[ao])){am=am[ao];if(f(am,"br")){break}}}return am||an}aa=Z(aa,"previousSibling");ag=Z(ag,"nextSibling");if(ak[0].block){if(!B(aa)){aa=ah(true)}if(!B(ag)){ag=ah()}}}if(aa.nodeType==1){W=q(aa);aa=aa.parentNode}if(ag.nodeType==1){ae=q(ag)+1;ag=ag.parentNode}return{startContainer:aa,startOffset:W,endContainer:ag,endOffset:ae}}function T(ab,Z,Y,V){var X,W,aa;if(!g(Y,ab)){return R}if(ab.remove!="all"){M(ab.styles,function(ad,ac){ad=p(ad,Z);if(typeof(ac)==="number"){ac=ad;V=0}if(!V||f(J(V,ac),ad)){c.setStyle(Y,ac,"")}aa=1});if(aa&&c.getAttrib(Y,"style")==""){Y.removeAttribute("style");Y.removeAttribute("data-mce-style")}M(ab.attributes,function(ae,ad){var ac;ae=p(ae,Z);if(typeof(ad)==="number"){ad=ae;V=0}if(!V||f(c.getAttrib(V,ad),ae)){if(ad=="class"){ae=c.getAttrib(Y,ad);if(ae){ac="";M(ae.split(/\s+/),function(af){if(/mce\w+/.test(af)){ac+=(ac?" ":"")+af}});if(ac){c.setAttrib(Y,ad,ac);return}}}if(ad=="class"){Y.removeAttribute("className")}if(e.test(ad)){Y.removeAttribute("data-mce-"+ad)}Y.removeAttribute(ad)}});M(ab.classes,function(ac){ac=p(ac,Z);if(!V||c.hasClass(V,ac)){c.removeClass(Y,ac)}});W=c.getAttribs(Y);for(X=0;X<W.length;X++){if(W[X].nodeName.indexOf("_")!==0){return R}}}if(ab.remove!="none"){m(Y,ab);return A}}function m(W,Z){var X=W.parentNode,V;if(Z.block){if(!k){function Y(ab,aa,ac){ab=s(ab,aa,ac);return !ab||(ab.nodeName=="BR"||B(ab))}if(B(W)&&!B(X)){if(!Y(W,R)&&!Y(W.firstChild,A,1)){W.insertBefore(c.create("br"),W.firstChild)}if(!Y(W,A)&&!Y(W.lastChild,R,1)){W.appendChild(c.create("br"))}}}else{if(X==c.getRoot()){if(!Z.list_block||!f(W,Z.list_block)){M(a.grep(W.childNodes),function(aa){if(d(k,aa.nodeName.toLowerCase())){if(!V){V=L(aa,k)}else{V.appendChild(aa)}}else{V=0}})}}}}if(Z.selector&&Z.inline&&!f(Z.inline,W)){return}c.remove(W,1)}function s(W,V,X){if(W){V=V?"nextSibling":"previousSibling";for(W=X?W:W[V];W;W=W[V]){if(W.nodeType==1||!P(W)){return W}}}}function F(V){return V&&V.nodeType==1&&V.getAttribute("data-mce-type")=="bookmark"}function D(Z,X){var Y,W,V;function ab(ae,ad){if(ae.nodeName!=ad.nodeName){return R}function ac(ag){var ah={};M(c.getAttribs(ag),function(ai){var aj=ai.nodeName.toLowerCase();if(aj.indexOf("_")!==0&&aj!=="style"){ah[aj]=c.getAttrib(ag,aj)}});return ah}function af(aj,ai){var ah,ag;for(ag in aj){if(aj.hasOwnProperty(ag)){ah=ai[ag];if(ah===H){return R}if(aj[ag]!=ah){return R}delete ai[ag]}}for(ag in ai){if(ai.hasOwnProperty(ag)){return R}}return A}if(!af(ac(ae),ac(ad))){return R}if(!af(c.parseStyle(c.getAttrib(ae,"style")),c.parseStyle(c.getAttrib(ad,"style")))){return R}return A}if(Z&&X){function aa(ac,ad){for(W=ac;W;W=W[ad]){if(W.nodeType==3&&W.nodeValue.length!==0){return ac}if(W.nodeType==1&&!F(W)){return W}}return ac}Z=aa(Z,"previousSibling");X=aa(X,"nextSibling");if(ab(Z,X)){for(W=Z.nextSibling;W&&W!=X;){V=W;W=W.nextSibling;Z.appendChild(V)}c.remove(X);M(a.grep(X.childNodes),function(ac){Z.appendChild(ac)});return Z}}return X}function C(V){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(V)}function n(V,aa){var W,Y,Z,X;W=V[aa?"startContainer":"endContainer"];Y=V[aa?"startOffset":"endOffset"];if(W.nodeType==1){Z=W.childNodes.length-1;if(!aa&&Y){Y--}W=W.childNodes[Y>Z?Z:Y]}if(W.nodeType===3&&aa&&Y>=W.nodeValue.length){W=new E(W,U.getBody()).next()||W}if(W.nodeType===3&&!aa&&Y==0){W=new E(W,U.getBody()).prev()||W}return W}function O(ae,X,ad){var ah,ag="_mce_caret",W=U.settings.caret_debug;ah=a.isGecko?"\u200B":u;function ab(aj){var ai=c.create("span",{id:ag,"data-mce-bogus":true,style:W?"color:red":""});if(aj){ai.appendChild(U.getDoc().createTextNode(ah))}return ai}function ac(aj,ai){while(aj){if((aj.nodeType===3&&aj.nodeValue!==ah)||aj.childNodes.length>1){return false}if(ai&&aj.nodeType===1){ai.push(aj)}aj=aj.firstChild}return true}function Y(ai){while(ai){if(ai.id===ag){return ai}ai=ai.parentNode}}function Z(ai){var aj;if(ai){aj=new E(ai,ai);for(ai=aj.current();ai;ai=aj.next()){if(ai.nodeType===3){return ai}}}}function aa(ak,aj){var al,ai;if(!ak){ak=Y(G.getStart());if(!ak){while(ak=c.get(ag)){aa(ak,false)}}}else{ai=G.getRng(true);if(ac(ak)){if(aj!==false){ai.setStartBefore(ak);ai.setEndBefore(ak)}c.remove(ak)}else{al=Z(ak);al=al.deleteData(0,1);c.remove(ak,1)}G.setRng(ai)}}function V(){var ai,al,ao,an,aj,ak,am;ai=G.getRng(true);an=ai.startOffset;ak=ai.startContainer;am=ak.nodeValue;al=Y(G.getStart());if(al){ao=Z(al)}if(am&&an>0&&an<am.length&&/\w/.test(am.charAt(an))&&/\w/.test(am.charAt(an-1))){aj=G.getBookmark();ai.collapse(true);ai=o(ai,Q(X));ai=j.split(ai);S(X,ad,ai);G.moveToBookmark(aj)}else{if(!al||ao.nodeValue!==ah){al=ab(true);ao=al.firstChild;ai.insertNode(al);an=1;S(X,ad,al)}else{S(X,ad,al)}G.setCursorLocation(ao,an)}}function af(){var aj=G.getRng(true),ap,al,ao,an,ak,ar,aq=[],am,ai;ap=aj.startContainer;al=aj.startOffset;ak=ap;if(ap.nodeType==3){if(al!=ap.nodeValue.length||ap.nodeValue===ah){an=true}ak=ak.parentNode}while(ak){if(t(ak,X,ad)){ar=ak;break}if(ak.nextSibling){an=true}aq.push(ak);ak=ak.parentNode}if(!ar){return}if(an){ao=G.getBookmark();aj.collapse(true);aj=o(aj,Q(X),true);aj=j.split(aj);x(X,ad,aj);G.moveToBookmark(ao)}else{ai=ab();ak=ai;for(am=aq.length-1;am>=0;am--){ak.appendChild(aq[am].cloneNode(false));ak=ak.firstChild}ak.appendChild(c.doc.createTextNode(ah));ak=ak.firstChild;c.insertAfter(ai,ar);G.setCursorLocation(ak,1)}}U.onBeforeGetContent.addToTop(function(){var ai=[],aj;if(ac(Y(G.getStart()),ai)){aj=ai.length;while(aj--){c.setAttrib(ai[aj],"data-mce-bogus","1")}}});a.each("onMouseUp onKeyUp".split(" "),function(ai){U[ai].addToTop(function(){aa()})});U.onKeyDown.addToTop(function(ai,aj){var ak=aj.keyCode;if(ak==8||ak==37||ak==39){aa(Y(G.getStart()))}});if(ae=="apply"){V()}else{af()}}}})(tinymce);tinymce.onAddEditor.add(function(b,c){var a,g,h,e=c.settings;if(e.inline_styles){g=b.explode(e.font_size_legacy_values);function d(j,i){b.each(i,function(l,k){if(l){h.setStyle(j,k,l)}});h.rename(j,"span")}a={font:function(j,i){d(i,{backgroundColor:i.style.backgroundColor,color:i.color,fontFamily:i.face,fontSize:g[parseInt(i.size)-1]})},u:function(j,i){d(i,{textDecoration:"underline"})},strike:function(j,i){d(i,{textDecoration:"line-through"})}};function f(i,j){h=i.dom;if(e.convert_fonts_to_spans){b.each(h.select("font,u,strike",j.node),function(k){a[k.nodeName.toLowerCase()](c.dom,k)})}}c.onPreProcess.add(f);c.onSetContent.add(f);c.onInit.add(function(){c.selection.onSetContent.add(f)})}});